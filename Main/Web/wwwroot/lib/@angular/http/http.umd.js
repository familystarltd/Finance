var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Observable")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Observable"],t):t((e.ng=e.ng||{},e.ng.http=e.ng.http||{}),e.ng.core,e.Rx)}(this,function(e,t,n){"use strict";function r(e){return void 0!==e&&null!==e}function o(e){return void 0===e||null===e}function s(e){return"string"==typeof e}function i(e){return Array.isArray(e)}function u(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function a(){if(o(O))if(r(b.Symbol)&&r(Symbol.iterator))O=Symbol.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),t=0;t<e.length;++t){var n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(O=n)}return O}function c(e,t){if(r(e))for(var n=0;n<e.length;n++){var o=e[n];i(o)?c(o,t):t.push(o)}return t}function p(e){return u(e)?i(e)||!(e instanceof S)&&a()in e:!1}function f(e,t){if(i(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,o=e[a()]();!(r=o.next()).done;)t(r.value)}function l(e){return new TypeError(e)}function h(t){if(s(t)){var n=t;if(t=t.replace(/(\w)(\w*)/g,function(e,t,n){return t.toUpperCase()+n.toLowerCase()}),t=e.RequestMethod[t],"number"!=typeof t)throw l('Invalid request method. The method "'+n+'" is not supported.')}return t}function d(e){return"responseURL"in e?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):void 0}function y(e){void 0===e&&(e="");var t=new S;if(e.length>0){var n=e.split("&");n.forEach(function(e){var n=e.split("="),o=n[0],s=n[1],i=r(t.get(o))?t.get(o):[];i.push(s),t.set(o,i)})}return t}function v(e,t){return e.createConnection(t).response}function m(e,t,n,o){var s=e;return s.merge(r(t)?new D({method:t.method||n,url:t.url||o,search:t.search,headers:t.headers,body:t.body}):r(n)?new D({method:n,url:o}):new D({url:o}))}function g(){return null===Z&&(Z=_[Y]={}),Z}var b;b="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;var _=b;_.assert=function(e){};var w=function(){function e(){}return e.fromCharCode=function(e){return String.fromCharCode(e)},e.charCodeAt=function(e,t){return e.charCodeAt(t)},e.split=function(e,t){return e.split(t)},e.equals=function(e,t){return e===t},e.stripLeft=function(e,t){if(e&&e.length){for(var n=0,r=0;r<e.length&&e[r]==t;r++)n++;e=e.substring(n)}return e},e.stripRight=function(e,t){if(e&&e.length){for(var n=e.length,r=e.length-1;r>=0&&e[r]==t;r--)n--;e=e.substring(0,n)}return e},e.replace=function(e,t,n){return e.replace(t,n)},e.replaceAll=function(e,t,n){return e.replace(t,n)},e.slice=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=null),e.slice(t,null===n?void 0:n)},e.replaceAllMapped=function(e,t,n){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.splice(-2,2),n(e)})},e.contains=function(e,t){return-1!=e.indexOf(t)},e.compare=function(e,t){return t>e?-1:e>t?1:0},e}(),R=function(){function e(){}return e.parse=function(e){return _.JSON.parse(e)},e.stringify=function(e){return _.JSON.stringify(e,null,2)},e}(),O=null,S=_.Map,M=_.Set,x=function(){try{if(1===new S([[1,2]]).size)return function(e){return new S(e)}}catch(e){}return function(e){for(var t=new S,n=0;n<e.length;n++){var r=e[n];t.set(r[0],r[1])}return t}}(),q=function(){try{if(new S(new S))return function(e){return new S(e)}}catch(e){}return function(e){var t=new S;return e.forEach(function(e,n){t.set(n,e)}),t}}(),C=function(){return(new S).keys().next?function(e){for(var t,n=e.keys();!(t=n.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,n){e.set(n,null)})}}(),P=function(){try{if((new S).values().next)return function(e,t){return Array.from(t?e.values():e.keys())}}catch(e){}return function(e,t){var n=A.createFixedSize(e.size),r=0;return e.forEach(function(e,o){n[r]=t?e:o,r++}),n}}(),E=function(){function e(){}return e.clone=function(e){return q(e)},e.createFromStringMap=function(e){var t=new S;for(var n in e)t.set(n,e[n]);return t},e.toStringMap=function(e){var t={};return e.forEach(function(e,n){return t[n]=e}),t},e.createFromPairs=function(e){return x(e)},e.clearValues=function(e){C(e)},e.iterable=function(e){return e},e.keys=function(e){return P(e,!1)},e.values=function(e){return P(e,!0)},e}(),k=function(){function e(){}return e.create=function(){return{}},e.contains=function(e,t){return e.hasOwnProperty(t)},e.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},e.set=function(e,t,n){e[t]=n},e.keys=function(e){return Object.keys(e)},e.values=function(e){return Object.keys(e).reduce(function(t,n){return t.push(e[n]),t},[])},e.isEmpty=function(e){for(var t in e)return!1;return!0},e["delete"]=function(e,t){delete e[t]},e.forEach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},e.merge=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},e.equals=function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var o,s=0;s<n.length;s++)if(o=n[s],e[o]!==t[o])return!1;return!0},e}(),A=function(){function e(){}return e.createFixedSize=function(e){return new Array(e)},e.createGrowableSize=function(e){return new Array(e)},e.clone=function(e){return e.slice(0)},e.forEachWithIndex=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},e.first=function(e){return e?e[0]:null},e.last=function(e){return e&&0!=e.length?e[e.length-1]:null},e.indexOf=function(e,t,n){return void 0===n&&(n=0),e.indexOf(t,n)},e.contains=function(e,t){return-1!==e.indexOf(t)},e.reversed=function(t){var n=e.clone(t);return n.reverse()},e.concat=function(e,t){return e.concat(t)},e.insert=function(e,t,n){e.splice(t,0,n)},e.removeAt=function(e,t){var n=e[t];return e.splice(t,1),n},e.removeAll=function(e,t){for(var n=0;n<t.length;++n){var r=e.indexOf(t[n]);e.splice(r,1)}},e.remove=function(e,t){var n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1},e.clear=function(e){e.length=0},e.isEmpty=function(e){return 0==e.length},e.fill=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=null),e.fill(t,n,null===r?e.length:r)},e.equals=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.slice=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=null),e.slice(t,null===n?void 0:n)},e.splice=function(e,t,n){return e.splice(t,n)},e.sort=function(e,t){r(t)?e.sort(t):e.sort()},e.toString=function(e){return e.toString()},e.toJSON=function(e){return JSON.stringify(e)},e.maximum=function(e,t){if(0==e.length)return null;for(var n=null,r=-(1/0),s=0;s<e.length;s++){var i=e[s];if(!o(i)){var u=t(i);u>r&&(n=i,r=u)}}return n},e.flatten=function(e){var t=[];return c(e,t),t},e.addAll=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},e}(),L=(function(){var e=new M([1,2,3]);return 3===e.size?function(e){return new M(e)}:function(e){var t=new M(e);if(t.size!==e.length)for(var n=0;n<e.length;n++)t.add(e[n]);return t}}(),function(e){function t(t){void 0===t&&(t="--"),e.call(this,t),this.message=t,this.stack=new Error(t).stack}return __extends(t,e),t.prototype.toString=function(){return this.message},t}(Error)),N=function(){function e(){}return e}(),j=function(){function e(){}return e}(),T=function(){function e(t){var n=this;return t instanceof e?void(this._headersMap=t._headersMap):(this._headersMap=new S,void(o(t)||k.forEach(t,function(e,t){n._headersMap.set(t,p(e)?e:[e])})))}return e.fromResponseHeaderString=function(t){return t.trim().split("\n").map(function(e){return e.split(":")}).map(function(e){var t=e[0],n=e.slice(1);return[t.trim(),n.join(":").trim()]}).reduce(function(e,t){var n=t[0],r=t[1];return!e.set(n,r)&&e},new e)},e.prototype.append=function(e,t){var n=this._headersMap.get(e),r=p(n)?n:[];r.push(t),this._headersMap.set(e,r)},e.prototype["delete"]=function(e){this._headersMap["delete"](e)},e.prototype.forEach=function(e){this._headersMap.forEach(e)},e.prototype.get=function(e){return A.first(this._headersMap.get(e))},e.prototype.has=function(e){return this._headersMap.has(e)},e.prototype.keys=function(){return E.keys(this._headersMap)},e.prototype.set=function(e,t){var n=[];if(p(t)){var r=t.join(",");n.push(r)}else n.push(t);this._headersMap.set(e,n)},e.prototype.values=function(){return E.values(this._headersMap)},e.prototype.toJSON=function(){var e={};return this._headersMap.forEach(function(t,n){var r=[];f(t,function(e){return r=A.concat(r,e.split(","))}),e[n]=r}),e},e.prototype.getAll=function(e){var t=this._headersMap.get(e);return p(t)?t:[]},e.prototype.entries=function(){throw new L('"entries" method is not implemented on Headers class')},e}();e.RequestMethod,function(e){e[e.Get=0]="Get",e[e.Post=1]="Post",e[e.Put=2]="Put",e[e.Delete=3]="Delete",e[e.Options=4]="Options",e[e.Head=5]="Head",e[e.Patch=6]="Patch"}(e.RequestMethod||(e.RequestMethod={})),e.ReadyState,function(e){e[e.Unsent=0]="Unsent",e[e.Open=1]="Open",e[e.HeadersReceived=2]="HeadersReceived",e[e.Loading=3]="Loading",e[e.Done=4]="Done",e[e.Cancelled=5]="Cancelled"}(e.ReadyState||(e.ReadyState={})),e.ResponseType,function(e){e[e.Basic=0]="Basic",e[e.Cors=1]="Cors",e[e.Default=2]="Default",e[e.Error=3]="Error",e[e.Opaque=4]="Opaque"}(e.ResponseType||(e.ResponseType={}));var H=function(e){return e>=200&&300>e},J=function(){function e(e){var t=e.url;if(this.url=e.url,r(e.search)){var n=e.search.toString();if(n.length>0){var o="?";w.contains(this.url,"?")&&(o="&"==this.url[this.url.length-1]?"":"&"),this.url=t+o+n}}this._body=e.body,this.method=h(e.method),this.headers=new T(e.headers)}return e.prototype.text=function(){return r(this._body)?this._body.toString():""},e}(),I=function(){function e(e){void 0===e&&(e=""),this.rawParams=e,this.paramsMap=y(e)}return e.prototype.clone=function(){var t=new e;return t.appendAll(this),t},e.prototype.has=function(e){return this.paramsMap.has(e)},e.prototype.get=function(e){var t=this.paramsMap.get(e);return p(t)?A.first(t):null},e.prototype.getAll=function(e){var t=this.paramsMap.get(e);return r(t)?t:[]},e.prototype.set=function(e,t){var n=this.paramsMap.get(e),o=r(n)?n:[];A.clear(o),o.push(t),this.paramsMap.set(e,o)},e.prototype.setAll=function(e){var t=this;e.paramsMap.forEach(function(e,n){var o=t.paramsMap.get(n),s=r(o)?o:[];A.clear(s),s.push(e[0]),t.paramsMap.set(n,s)})},e.prototype.append=function(e,t){var n=this.paramsMap.get(e),o=r(n)?n:[];o.push(t),this.paramsMap.set(e,o)},e.prototype.appendAll=function(e){var t=this;e.paramsMap.forEach(function(e,n){for(var o=t.paramsMap.get(n),s=r(o)?o:[],i=0;i<e.length;++i)s.push(e[i]);t.paramsMap.set(n,s)})},e.prototype.replaceAll=function(e){var t=this;e.paramsMap.forEach(function(e,n){var o=t.paramsMap.get(n),s=r(o)?o:[];A.clear(s);for(var i=0;i<e.length;++i)s.push(e[i]);t.paramsMap.set(n,s)})},e.prototype.toString=function(){var e=[];return this.paramsMap.forEach(function(t,n){t.forEach(function(t){return e.push(n+"="+t)})}),e.join("&")},e.prototype["delete"]=function(e){this.paramsMap["delete"](e)},e}(),D=function(){function e(e){var t=void 0===e?{}:e,n=t.method,o=t.headers,i=t.body,u=t.url,a=t.search;this.method=r(n)?h(n):null,this.headers=r(o)?o:null,this.body=r(i)?i:null,this.url=r(u)?u:null,this.search=r(a)?s(a)?new I(a):a:null}return e.prototype.merge=function(t){return new e({method:r(t)&&r(t.method)?t.method:this.method,headers:r(t)&&r(t.headers)?t.headers:this.headers,body:r(t)&&r(t.body)?t.body:this.body,url:r(t)&&r(t.url)?t.url:this.url,search:r(t)&&r(t.search)?s(t.search)?new I(t.search):t.search.clone():this.search})},e}(),B=function(t){function n(){t.call(this,{method:e.RequestMethod.Get,headers:new T})}return __extends(n,t),n}(D);B.decorators=[{type:t.Injectable}],B.ctorParameters=[];var G=function(){function t(e,t){this._backend=e,this._defaultOptions=t}return t.prototype.request=function(t,n){var r;if(s(t))r=v(this._backend,new J(m(this._defaultOptions,n,e.RequestMethod.Get,t)));else{if(!(t instanceof J))throw l("First argument must be a url string or Request instance.");r=v(this._backend,t)}return r},t.prototype.get=function(t,n){return v(this._backend,new J(m(this._defaultOptions,n,e.RequestMethod.Get,t)))},t.prototype.post=function(t,n,r){return v(this._backend,new J(m(this._defaultOptions.merge(new D({body:n})),r,e.RequestMethod.Post,t)))},t.prototype.put=function(t,n,r){return v(this._backend,new J(m(this._defaultOptions.merge(new D({body:n})),r,e.RequestMethod.Put,t)))},t.prototype["delete"]=function(t,n){return v(this._backend,new J(m(this._defaultOptions,n,e.RequestMethod.Delete,t)))},t.prototype.patch=function(t,n,r){return v(this._backend,new J(m(this._defaultOptions.merge(new D({body:n})),r,e.RequestMethod.Patch,t)))},t.prototype.head=function(t,n){return v(this._backend,new J(m(this._defaultOptions,n,e.RequestMethod.Head,t)))},t}();G.decorators=[{type:t.Injectable}],G.ctorParameters=[{type:N},{type:D}];var U=function(t){function n(e,n){t.call(this,e,n)}return __extends(n,t),n.prototype.request=function(t,n){var r;if(s(t)&&(t=new J(m(this._defaultOptions,n,e.RequestMethod.Get,t))),!(t instanceof J))throw l("First argument must be a url string or Request instance.");return t.method!==e.RequestMethod.Get&&l("JSONP requests must use GET request method."),r=v(this._backend,t)},n}(G);U.decorators=[{type:t.Injectable}],U.ctorParameters=[{type:N},{type:D}];var z=function(){function e(e){this._body=e.body,this.status=e.status,this.ok=this.status>=200&&this.status<=299,this.statusText=e.statusText,this.headers=e.headers,this.type=e.type,this.url=e.url}return e.prototype.blob=function(){throw new L('"blob()" method not implemented on Response superclass')},e.prototype.json=function(){var e;return u(this._body)?e=this._body:s(this._body)&&(e=R.parse(this._body)),e},e.prototype.text=function(){return this._body.toString()},e.prototype.arrayBuffer=function(){throw new L('"arrayBuffer()" method not implemented on Response superclass')},e}(),F=function(){function e(e){var t=void 0===e?{}:e,n=t.body,o=t.status,s=t.headers,i=t.statusText,u=t.type,a=t.url;this.body=r(n)?n:null,this.status=r(o)?o:null,this.headers=r(s)?s:null,this.statusText=r(i)?i:null,this.type=r(u)?u:null,this.url=r(a)?a:null}return e.prototype.merge=function(t){return new e({body:r(t)&&r(t.body)?t.body:this.body,status:r(t)&&r(t.status)?t.status:this.status,headers:r(t)&&r(t.headers)?t.headers:this.headers,statusText:r(t)&&r(t.statusText)?t.statusText:this.statusText,type:r(t)&&r(t.type)?t.type:this.type,url:r(t)&&r(t.url)?t.url:this.url})},e}(),X=function(t){function n(){t.call(this,{status:200,statusText:"Ok",type:e.ResponseType.Default,headers:new T})}return __extends(n,t),n}(F);X.decorators=[{type:t.Injectable}],X.ctorParameters=[];var K=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}();K.decorators=[{type:t.Injectable}],K.ctorParameters=[];var V=function(){function t(t,o,s){var i=this;this.request=t,this.response=new n.Observable(function(n){var u=o.build();u.open(e.RequestMethod[t.method].toUpperCase(),t.url);var a=function(){var e=r(u.response)?u.response:u.responseText,t=T.fromResponseHeaderString(u.getAllResponseHeaders()),o=d(u),i=1223===u.status?204:u.status;0===i&&(i=e?200:0);var a=new F({body:e,status:i,headers:t,url:o});r(s)&&(a=s.merge(a));var c=new z(a);return H(i)?(n.next(c),void n.complete()):void n.error(c)},c=function(t){var o=new F({body:t,type:e.ResponseType.Error});r(s)&&(o=s.merge(o)),n.error(new z(o))};return r(t.headers)&&t.headers.forEach(function(e,t){return u.setRequestHeader(t,e.join(","))}),u.addEventListener("load",a),u.addEventListener("error",c),u.send(i.request.text()),function(){u.removeEventListener("load",a),u.removeEventListener("error",c),u.abort()}})}return t}(),W=function(){function e(e,t){this._browserXHR=e,this._baseResponseOptions=t}return e.prototype.createConnection=function(e){return new V(e,this._browserXHR,this._baseResponseOptions)},e}();W.decorators=[{type:t.Injectable}],W.ctorParameters=[{type:K},{type:F}];var Q=0,Y="__ng_jsonp__",Z=null,$=function(){function e(){}return e.prototype.build=function(e){var t=document.createElement("script");return t.src=e,t},e.prototype.nextRequestID=function(){return"__req"+Q++},e.prototype.requestCallback=function(e){return Y+"."+e+".finished"},e.prototype.exposeConnection=function(e,t){var n=g();n[e]=t},e.prototype.removeConnection=function(e){var t=g();t[e]=null},e.prototype.send=function(e){document.body.appendChild(e)},e.prototype.cleanup=function(e){e.parentNode&&e.parentNode.removeChild(e)},e}();$.decorators=[{type:t.Injectable}];var ee="JSONP injected script did not invoke callback.",te="JSONP requests must use GET request method.",ne=function(){function e(){}return e}(),re=function(t){function o(o,s,i){var u=this;if(t.call(this),this._dom=s,this.baseResponseOptions=i,this._finished=!1,o.method!==e.RequestMethod.Get)throw l(te);this.request=o,this.response=new n.Observable(function(t){u.readyState=e.ReadyState.Loading;var n=u._id=s.nextRequestID();s.exposeConnection(n,u);var a=s.requestCallback(u._id),c=o.url;c.indexOf("=JSONP_CALLBACK&")>-1?c=w.replace(c,"=JSONP_CALLBACK&","="+a+"&"):c.lastIndexOf("=JSONP_CALLBACK")===c.length-"=JSONP_CALLBACK".length&&(c=c.substring(0,c.length-"=JSONP_CALLBACK".length)+("="+a));var p=u._script=s.build(c),f=function(n){if(u.readyState!==e.ReadyState.Cancelled){if(u.readyState=e.ReadyState.Done,s.cleanup(p),!u._finished){var o=new F({body:ee,type:e.ResponseType.Error,url:c});return r(i)&&(o=i.merge(o)),void t.error(new z(o))}var a=new F({body:u._responseData,url:c});r(u.baseResponseOptions)&&(a=u.baseResponseOptions.merge(a)),t.next(new z(a)),t.complete()}},l=function(n){if(u.readyState!==e.ReadyState.Cancelled){u.readyState=e.ReadyState.Done,s.cleanup(p);var o=new F({body:n.message,type:e.ResponseType.Error});r(i)&&(o=i.merge(o)),t.error(new z(o))}};return p.addEventListener("load",f),p.addEventListener("error",l),s.send(p),function(){u.readyState=e.ReadyState.Cancelled,p.removeEventListener("load",f),p.removeEventListener("error",l),r(p)&&u._dom.cleanup(p)}})}return __extends(o,t),o.prototype.finished=function(t){this._finished=!0,this._dom.removeConnection(this._id),this.readyState!==e.ReadyState.Cancelled&&(this._responseData=t)},o}(ne),oe=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(N),se=function(e){function t(t,n){e.call(this),this._browserJSONP=t,this._baseResponseOptions=n}return __extends(t,e),t.prototype.createConnection=function(e){return new re(e,this._browserJSONP,this._baseResponseOptions)},t}(oe);se.decorators=[{type:t.Injectable}],se.ctorParameters=[{type:$},{type:F}];var ie=[t.provide(G,{useFactory:function(e,t){return new G(e,t)},deps:[W,D]}),K,t.provide(D,{useClass:B}),t.provide(F,{useClass:X}),W],ue=ie,ae=[t.provide(U,{useFactory:function(e,t){return new U(e,t)},deps:[oe,D]}),$,t.provide(D,{useClass:B}),t.provide(F,{useClass:X}),t.provide(oe,{useClass:se})],ce=ae;e.HTTP_PROVIDERS=ie,e.HTTP_BINDINGS=ue,e.JSONP_PROVIDERS=ae,e.JSON_BINDINGS=ce,e.Request=J,e.Response=z,e.Connection=j,e.ConnectionBackend=N,e.BrowserXhr=K,e.BaseRequestOptions=B,e.RequestOptions=D,e.BaseResponseOptions=X,e.ResponseOptions=F,e.XHRBackend=W,e.XHRConnection=V,e.JSONPBackend=oe,e.JSONPConnection=ne,e.Http=G,e.Jsonp=U,e.Headers=T,e.URLSearchParams=I});