var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/Subject"),require("rxjs/observable/PromiseObservable"),require("rxjs/operator/toPromise"),require("rxjs/Observable"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Subject","rxjs/observable/PromiseObservable","rxjs/operator/toPromise","rxjs/Observable","@angular/common","@angular/platform-browser"],e):e((t.ng=t.ng||{},t.ng.router=t.ng.router||{}),t.ng.core,t.Rx,t.Rx,t.Rx.Observable.prototype,t.Rx,t.ng.common,t.ng.platformBrowser)}(this,function(t,e,n,r,o,i,u,a){"use strict";function s(t){return void 0!==t&&null!==t}function c(t){return void 0===t||null===t}function l(t){return"string"==typeof t}function f(t){return"object"==typeof t&&null!==t}function h(t){return Array.isArray(t)}function p(){}function v(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.name)return t.name;if(t.overriddenName)return t.overriddenName;var e=t.toString(),n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function m(t,e){if(s(t))for(var n=0;n<t.length;n++){var r=t[n];h(r)?m(r,e):e.push(r)}return e}function g(t){return t._root}function d(t,e){if(t instanceof gt&&S(t,e.value))return e;if(t===e.value)return e;for(var n=0,r=e.children;n<r.length;n++){var o=r[n],i=d(t,o);if(s(i))return i}return null}function y(t,e,n){if(n.push(e),b(t,e.value))return n;for(var r=0,o=e.children;r<o.length;r++){var i=o[r],u=y(t,i,ut.clone(n));if(s(u))return u}return null}function _(t,e){if(!b(t.value,e.value))return!1;for(var n=function(e){var n=t.children.filter(function(t){return b(t.value,e.value)});return 0===n.length?{value:!1}:_(n[0],e)?void 0:{value:!1}},r=0,o=e.children;r<o.length;r++){var i=o[r],u=n(i);if("object"==typeof u)return u.value}return!0}function b(t,e){return t instanceof gt?S(t,e):t instanceof mt?x(t,e):t===e}function w(t){var e="";return it.forEach(t,function(t,n){return e+=";"+n+"="+t}),e}function S(t,e){return c(t)&&!c(e)?!1:!c(t)&&c(e)?!1:t._type!==e._type?!1:t.outlet!=e.outlet?!1:it.equals(t.parameters,e.parameters)}function x(t,e){return c(t)&&!c(e)?!1:!c(t)&&c(e)?!1:t.segment!=e.segment?!1:t.outlet!=e.outlet?!1:(c(t.parameters)&&console.log("a",t),c(e.parameters)&&console.log("b",e),it.equals(t.parameters,e.parameters))}function O(t){return t._componentFactory}function P(t,e,n){var r=new bt(e,[n.root],{},g(n).children,[]);return C(t,r).then(function(t){return new pt(t[0])})}function T(t,n,r){var o=U(n);if(c(o))throw new e.BaseException("Component '"+v(n)+"' does not have route configuration");var i;try{i=k(o,r)}catch(u){return st.reject(u,null)}var a=C(t,i),s=j(t,n,i.aux).then(E);return st.all([a,s]).then(ut.flatten)}function j(t,e,n){var r=n.map(function(n){return T(t,e,n)});return st.all(r).then(ut.flatten)}function C(t,e){return t.resolveComponent(e.component).then(function(n){var r=0===e.consumedUrlSegments.length||c(e.consumedUrlSegments[0].outlet)?_t:e.consumedUrlSegments[0].outlet,o=new gt(e.consumedUrlSegments,e.parameters,r,e.component,n);return e.leftOverUrl.length>0?j(t,e.component,e.leftOverUrl).then(function(t){return[new vt(o,t)]}):R(t,e.component).then(function(t){return[new vt(o,t)]})})}function R(t,e){return t.resolveComponent(e).then(function(n){var r=U(e);if(c(r))return[];var o=r.routes.filter(function(t){return""==t.path||"/"==t.path});return 0===o.length?st.resolve([]):R(t,o[0].component).then(function(e){return t.resolveComponent(o[0].component).then(function(t){var n=new gt([],{},_t,o[0].component,t);return[new vt(n,e)]})})})}function k(t,n){for(var r=0,o=t.routes;r<o.length;r++){var i=o[r],u=A(i,n);if(s(u))return u}var a=t.routes.map(function(t){return"'"+t.path+"'"}).join(", ");throw new e.BaseException("Cannot match any routes. Current segment: '"+n.value+"'. Available routes: ["+a+"].")}function A(t,e){var n=t.path.startsWith("/")?t.path.substring(1):t.path;if("*"==n)return new bt(t.component,[],null,[],[]);for(var r=n.split("/"),o={},i=[],u=null,a=null,l=e,f=0;f<r.length;++f){if(c(l))return null;var h=r[f],p=f===r.length-1,v=f===r.length-2,m=h.startsWith(":");if(!m&&h!=l.value.segment)return null;p&&(a=l),v&&(u=l),m&&(o[h.substring(1)]=l.value.segment),i.push(l.value),l=ut.first(l.children)}var g=a.value.parameters,d=it.merge(g,o),y=s(u)?u.children.slice(1):[];return new bt(t.component,i,d,a.children,y)}function E(t){var n={};return t.forEach(function(t){var r=n[t.value.outlet];if(s(r)){var o=r.stringifiedUrlSegments,i=t.value.stringifiedUrlSegments;throw new e.BaseException("Two segments cannot have the same outlet name: '"+o+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),t}function U(t){var n=e.reflector.annotations(t).filter(function(t){return t instanceof yt});return ut.first(n)}function D(t,e,n,r){if(0===r.length)return n;var o=W(r);if(z(o))return new ht(new vt(n.root,[]));var i=M(o,n,t,e),u=o.commands.length>0?N(ut.clone(i.children),o.commands):[],a=B(g(n),i,u);return new ht(a)}function z(t){return t.isAbsolute&&1===t.commands.length&&"/"==t.commands[0]}function W(t){"";if(l(t[0])&&1===t.length&&"/"==t[0])return new St(!0,0,t);for(var e=0,n=!1,r=[],o=0;o<t.length;++o){var i=t[o];if(l(i))for(var u=i.split("/"),a=0;a<u.length;++a){var s=u[a];0==o?0==a&&"."==s||(0==a&&""==s?n=!0:".."==s?e++:""!=s&&r.push(s)):""!=s&&r.push(s)}else r.push(i)}return new St(n,e,r)}function L(t,e,n,r){for(var o=t;0===o.urlSegments.length;)o=e.parent(o);var i=ut.last(o.urlSegments),u=n.pathFromRoot(i);if(u.length<=r)throw new wt("Invalid number of '../'");return u[u.length-1-r]}function M(t,e,n,r){if(t.isAbsolute)return g(e);var o=L(n,r,e,t.numberOfDoubleDots);return I(o,g(e))}function I(t,e){if(e.value===t)return e;for(var n=0,r=e.children;n<r.length;n++){var o=r[n],i=I(t,o);if(s(i))return i}return null}function B(t,e,n){return t===e?new vt(t.value,n):new vt(t.value,t.children.map(function(t){return B(t,e,n)}))}function q(t,e){var n=e.slice(1),r=0===n.length?null:n[0],o=V(e),i=H(e);if(c(t)&&!f(r)){var u=new mt(i,{},o),a=0===n.length?[]:[q(null,n)];return new vt(u,a)}if(c(t)&&f(r)){var u=new mt(i,r,o);return F(u,t,n.slice(1))}if(o!=t.value.outlet)return t;if(f(i)){var s=new mt(t.value.segment,i,t.value.outlet);return F(s,t,n)}if(f(r)){var u=new mt(i,r,o);return F(u,t,n.slice(1))}var u=new mt(i,{},o);return F(u,t,n)}function F(t,e,n){return 0===n.length?new vt(t,[]):new vt(t,N(ut.clone(e.children),n))}function N(t,e){var n=V(e),r=t.filter(function(t){return t.value.outlet==n});if(r.length>0){var o=r[0];t[t.indexOf(o)]=q(o,e)}else t.push(q(null,e));return t}function H(t){if(!l(t[0]))return t[0];var e=t[0].toString().split(":");return e.length>1?e[1]:t[0]}function V(t){if(!l(t[0]))return null;var e=t[0].toString().split(":");return e.length>1?e[0]:null}function Q(t,e){if(c(e))return!1;var n=e.constructor;return n instanceof et?t in n.prototype:!1}function G(t){return""+t.value+K(t)}function J(t){var e=t[0].value.toString(),n=t.slice(1),r=n.length>0?"("+n.map(G).join("//")+")":"",o=K(t[0]);return""+e+r+o}function K(t){return t.children.length>0?"/"+J(t.children):""}function X(t){var e=nt.firstMatch(kt,t);return s(e)?e[0]:""}function Y(t){var e=nt.firstMatch(At,t);return s(e)?e[0]:""}function Z(t,n,r,o,i){if(0==t.componentTypes.length)throw new e.BaseException("Bootstrap at least one component before injecting Router.");var u=new Ot(null,t.componentTypes[0],n,r,o,i);return t.registerDisposeListener(function(){return u.dispose()}),u}var $;$="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;var tt=$,et=Function;tt.assert=function(t){};var nt=function(){function t(){}return t.create=function(t,e){return void 0===e&&(e=""),e=e.replace(/g/g,""),new tt.RegExp(t,e+"g")},t.firstMatch=function(t,e){return t.lastIndex=0,t.exec(e)},t.test=function(t,e){return t.lastIndex=0,t.test(e)},t.matcher=function(t,e){return t.lastIndex=0,{re:t,input:e}},t.replaceAll=function(t,e,n){var r=t.exec(e),o="";t.lastIndex=0;for(var i=0;r;)o+=e.substring(i,r.index),o+=n(r),i=r.index+r[0].length,t.lastIndex=i,r=t.exec(e);return o+=e.substring(i)},t}(),rt=tt.Map,ot=tt.Set,it=(function(){try{if(1===new rt([[1,2]]).size)return function(t){return new rt(t)}}catch(t){}return function(t){for(var e=new rt,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),function(){try{if(new rt(new rt))return function(t){return new rt(t)}}catch(t){}return function(t){var e=new rt;return t.forEach(function(t,n){e.set(n,t)}),e}}(),function(){return(new rt).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),function(){try{if((new rt).values().next)return function(t,e){return Array.from(e?t.values():t.keys())}}catch(t){}return function(t,e){var n=ut.createFixedSize(t.size),r=0;return t.forEach(function(t,o){n[r]=e?t:o,r++}),n}}(),function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).reduce(function(e,n){return e.push(t[n]),e},[])},t.isEmpty=function(t){for(var e in t)return!1;return!0},t["delete"]=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},t.merge=function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var o,i=0;i<n.length;i++)if(o=n[i],t[o]!==e[o])return!1;return!0},t}()),ut=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return-1!==t.indexOf(e)},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1?(t.splice(n,1),!0):!1},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){s(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),o=0;o<t.length;o++){var i=t[o];if(!c(i)){var u=e(i);u>r&&(n=i,r=u)}}return n},t.flatten=function(t){var e=[];return m(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),at=(function(){var t=new ot([1,2,3]);return 3===t.size?function(t){return new ot(t)}:function(t){var e=new ot(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}()),st=function(){function t(){}return t.resolve=function(t){return Promise.resolve(t)},t.reject=function(t,e){return Promise.reject(t)},t.catchError=function(t,e){return t["catch"](e)},t.all=function(t){return 0==t.length?Promise.resolve([]):Promise.all(t)},t.then=function(t,e,n){return t.then(e,n)},t.wrap=function(t){return new Promise(function(e,n){try{e(t())}catch(r){n(r)}})},t.scheduleMicrotask=function(e){t.then(t.resolve(null),e,function(t){})},t.isPromise=function(t){return t instanceof Promise},t.completer=function(){return new at},t}(),ct=function(){function t(){}return t.subscribe=function(t,e,n,r){return void 0===r&&(r=function(){}),n="function"==typeof n&&n||p,r="function"==typeof r&&r||p,t.subscribe({next:e,error:n,complete:r})},t.isObservable=function(t){return!!t.subscribe},t.hasSubscribers=function(t){return t.observers.length>0},t.dispose=function(t){t.unsubscribe()},t.callNext=function(t,e){t.next(e)},t.callEmit=function(t,e){t.emit(e)},t.callError=function(t,e){t.error(e)},t.callComplete=function(t){t.complete()},t.fromPromise=function(t){return r.PromiseObservable.create(t)},t.toPromise=function(t){return o.toPromise.call(t)},t}(),lt=function(t){function e(e){void 0===e&&(e=!0),t.call(this),this._isAsync=e}return __extends(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.next=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var o,i=function(t){return null},u=function(){return null};return e&&"object"==typeof e?(o=this._isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(i=this._isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(u=this._isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this._isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(i=this._isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(u=this._isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),t.prototype.subscribe.call(this,o,i,u)},e}(n.Subject),ft=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=d(t,this._root);return s(e)?e.children.map(function(t){return t.value}):null},t.prototype.firstChild=function(t){var e=d(t,this._root);return s(e)&&e.children.length>0?e.children[0].value:null},t.prototype.pathFromRoot=function(t){return y(t,this._root,[]).map(function(t){return t.value})},t.prototype.contains=function(t){return _(this._root,t._root)},t}(),ht=function(t){function e(e){t.call(this,e)}return __extends(e,t),e}(ft),pt=function(t){function e(e){t.call(this,e)}return __extends(e,t),e}(ft),vt=function(){function t(t,e){this.value=t,this.children=e}return t}(),mt=function(){function t(t,e,n){this.segment=t,this.parameters=e,this.outlet=n}return t.prototype.toString=function(){var t=c(this.outlet)?"":this.outlet+":";return""+t+this.segment+w(this.parameters)},t}(),gt=function(){function t(t,e,n,r,o){this.urlSegments=t,this.parameters=e,this.outlet=n,this._type=r,this._componentFactory=o}return t.prototype.getParam=function(t){return s(this.parameters)?this.parameters[t]:null},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringifiedUrlSegments",{get:function(){return this.urlSegments.map(function(t){return t.toString()}).join("/")},enumerable:!0,configurable:!0}),t}(),dt=function(){function t(t){var e=void 0===t?{}:t,n=e.path,r=e.component;this.path=n,this.component=r}return t.prototype.toString=function(){return"@Route("+this.path+", "+v(this.component)+")"},t}(),yt=function(){function t(t){this.routes=t}return t.prototype.toString=function(){return"@Routes("+this.routes+")"},t}(),_t="__DEFAULT",bt=function(){function t(t,e,n,r,o){this.component=t,this.consumedUrlSegments=e,this.parameters=n,this.leftOverUrl=r,this.aux=o}return t}(),wt=function(t){function e(e){void 0===e&&(e="--"),t.call(this,e),this.message=e,this.stack=new Error(e).stack}return __extends(e,t),e.prototype.toString=function(){return this.message},e}(Error),St=function(){function t(t,e,n){this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n}return t}(),xt=function(){function t(){this._outlets={}}return t.prototype.registerOutlet=function(t,e){this._outlets[t]=e},t}(),Ot=function(){function t(t,e,n,r,o,i){this._rootComponent=t,this._rootComponentType=e,this._componentResolver=n,this._urlSerializer=r,this._routerOutletMap=o,this._location=i,this._changes=new lt,this._prevTree=this._createInitialTree(),this._setUpLocationChangeListener(),this.navigateByUrl(this._location.path())}return Object.defineProperty(t.prototype,"urlTree",{get:function(){return this._urlTree},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"routeTree",{get:function(){return this._prevTree},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changes",{get:function(){return this._changes},enumerable:!0,configurable:!0}),t.prototype.navigateByUrl=function(t){return this._navigate(this._urlSerializer.parse(t))},t.prototype.navigate=function(t,e){return this._navigate(this.createUrlTree(t,e))},t.prototype.dispose=function(){ct.dispose(this._locationSubscription)},t.prototype.createUrlTree=function(t,e){var n=s(e)?e:this._prevTree.root;return D(n,this._prevTree,this.urlTree,t)},t.prototype.serializeUrl=function(t){return this._urlSerializer.serialize(t)},t.prototype._createInitialTree=function(){var t=new gt([new mt("",{},null)],{},_t,this._rootComponentType,null);return new pt(new vt(t,[]))},t.prototype._setUpLocationChangeListener=function(){var t=this;this._locationSubscription=this._location.subscribe(function(e){t._navigate(t._urlSerializer.parse(e.url))})},t.prototype._navigate=function(t){var e=this;return this._urlTree=t,P(this._componentResolver,this._rootComponentType,t).then(function(t){return new Pt(t,e._prevTree).load(e._routerOutletMap,e._rootComponent).then(function(n){n&&(e._prevTree=t,e._location.go(e._urlSerializer.serialize(e._urlTree)),e._changes.emit(null))})})},t}(),Pt=function(){function t(t,e){this.currTree=t,this.prevTree=e,this.deactivations=[],this.performMutation=!0}return t.prototype.load=function(t,e){var n=this,r=s(this.prevTree)?g(this.prevTree):null,o=g(this.currTree);return this.canDeactivate(o,r,t,e).then(function(i){return n.performMutation=!0,i&&n.loadChildSegments(o,r,t,[e]),i})},t.prototype.canDeactivate=function(t,e,n,r){var o=this;this.performMutation=!1,this.loadChildSegments(t,e,n,[r]);var i=st.all(this.deactivations.map(function(t){return o.checkCanDeactivatePath(t)}));return i.then(function(t){return t.filter(function(t){return t}).length===t.length})},t.prototype.checkCanDeactivatePath=function(t){for(var e=this,n=st.resolve(!0),r=function(t){n=n.then(function(n){return Q("routerCanDeactivate",t)?t.routerCanDeactivate(e.prevTree,e.currTree):n})},o=0,i=ut.reversed(t);o<i.length;o++){var u=i[o];r(u)}return n},t.prototype.loadChildSegments=function(t,e,n,r){var o=this,i=s(e)?e.children.reduce(function(t,e){return t[e.value.outlet]=e,t},{}):{};t.children.forEach(function(t){o.loadSegments(t,i[t.value.outlet],n,r),it["delete"](i,t.value.outlet)}),it.forEach(i,function(t,e){return o.unloadOutlet(n._outlets[e],r)})},t.prototype.loadSegments=function(t,e,n,r){var o=t.value,i=s(e)?e.value:null,u=this.getOutlet(n,t.value);if(S(o,i))this.loadChildSegments(t,e,u.outletMap,r.concat([u.loadedComponent]));else if(this.unloadOutlet(u,r),this.performMutation){var a=new xt,c=this.loadNewSegment(a,o,i,u);this.loadChildSegments(t,e,a,r.concat([c]))}},t.prototype.loadNewSegment=function(t,n,r,o){var i=e.ReflectiveInjector.resolve([e.provide(xt,{useValue:t}),e.provide(gt,{useValue:n})]),u=o.load(O(n),i,t);return Q("routerOnActivate",u.instance)&&u.instance.routerOnActivate(n,r,this.currTree,this.prevTree),u.instance},t.prototype.getOutlet=function(t,n){var r=t._outlets[n.outlet];if(c(r))throw new e.BaseException(n.outlet==_t?"Cannot find default outlet":"Cannot find the outlet "+n.outlet);return r},t.prototype.unloadOutlet=function(t,e){var n=this;s(t)&&t.isLoaded&&(it.forEach(t.outletMap._outlets,function(t,r){return n.unloadOutlet(t,e)}),this.performMutation?t.unload():this.deactivations.push(e.concat([t.loadedComponent])))},t}(),Tt=e.__core_private__.makeDecorator,jt=Tt(yt),Ct=function(){function t(){}return t}(),Rt=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.parse=function(t){var e=(new Et).parse(t);return new ht(e)},e.prototype.serialize=function(t){return G(g(t))},e}(Ct),kt=nt.create("^[^\\/\\(\\)\\?;=&#]+"),At=nt.create("^[^\\(\\)\\?;&#]+"),Et=function(){function t(){}return t.prototype.peekStartsWith=function(t){return this._remaining.startsWith(t)},t.prototype.capture=function(t){if(!this._remaining.startsWith(t))throw new e.BaseException('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},t.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new vt(new mt("",{},null),[]):this.parseRoot()},t.prototype.parseRoot=function(){var t=this.parseSegments();return new vt(new mt("",{},null),t)},t.prototype.parseSegments=function(t){if(void 0===t&&(t=null),0==this._remaining.length)return[];this.peekStartsWith("/")&&this.capture("/");var e=X(this._remaining);if(this.capture(e),e.indexOf(":")>-1){var n=e.split(":");t=n[0],e=n[1]}var r={};this.peekStartsWith(";")&&(r=this.parseMatrixParams());var o=[];this.peekStartsWith("(")&&(o=this.parseAuxiliaryRoutes());var i=[];this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),i=this.parseSegments());var u=new mt(e,r,t),a=new vt(u,i);return[a].concat(o)},t.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseQueryParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},t.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=X(this._remaining);if(!c(e)){this.capture(e);var n="true";if(this.peekStartsWith("=")){this.capture("=");var r=X(this._remaining);s(r)&&(n=r,this.capture(n))}t[e]=n}},t.prototype.parseQueryParam=function(t){var e=X(this._remaining);if(!c(e)){this.capture(e);var n="true";if(this.peekStartsWith("=")){this.capture("=");var r=Y(this._remaining);s(r)&&(n=r,this.capture(n))}t[e]=n}},t.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t=t.concat(this.parseSegments("aux")),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},t}(),Ut=[xt,{provide:Ct,useClass:Rt},{provide:u.LocationStrategy,useClass:u.PathLocationStrategy},u.Location,{provide:Ot,useFactory:Z,deps:[e.ApplicationRef,e.ComponentResolver,Ct,xt,u.Location]}],Dt=[Ut,{provide:u.PlatformLocation,useClass:a.BrowserPlatformLocation}],zt=function(){function t(t,e,n){this._location=e,t.registerOutlet(c(n)?_t:n,this)}return t.prototype.unload=function(){this._loaded.destroy(),this._loaded=null},Object.defineProperty(t.prototype,"loadedComponent",{get:function(){return s(this._loaded)?this._loaded.instance:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return s(this._loaded)},enumerable:!0,configurable:!0}),t.prototype.load=function(t,n,r){this.outletMap=r;var o=e.ReflectiveInjector.fromResolvedProviders(n,this._location.parentInjector);return this._loaded=this._location.createComponent(t,this._location.length,o,[]),this._loaded},t}();zt.decorators=[{type:e.Directive,args:[{selector:"router-outlet"}]}],zt.ctorParameters=[{type:xt},{type:e.ViewContainerRef},{type:void 0,decorators:[{type:e.Attribute,args:["name"]}]}];var Wt=function(){function t(t,e){var n=this;this._routeSegment=t,this._router=e,this._commands=[],this.isActive=!1,this._subscription=ct.subscribe(e.changes,function(t){n._updateTargetUrlAndHref()})}return t.prototype.ngOnDestroy=function(){ct.dispose(this._subscription)},Object.defineProperty(t.prototype,"routerLink",{set:function(t){this._commands=h(t)?t:[t],this._updateTargetUrlAndHref()},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){return l(this.target)&&"_self"!=this.target?!0:(this._router.navigate(this._commands,this._routeSegment),!1)},t.prototype._updateTargetUrlAndHref=function(){var t=this._router.createUrlTree(this._commands,this._routeSegment);s(t)?(this.href=this._router.serializeUrl(t),this.isActive=this._router.urlTree.contains(t)):this.isActive=!1},t}();Wt.decorators=[{type:e.Directive,args:[{selector:"[routerLink]"}]}],Wt.ctorParameters=[{type:gt,decorators:[{type:e.Optional}]},{type:Ot}],Wt.propDecorators={target:[{type:e.Input}],href:[{type:e.HostBinding}],isActive:[{type:e.HostBinding,args:["class.router-link-active"]}],routerLink:[{type:e.Input}],onClick:[{type:e.HostListener,args:["click"]}]};var Lt=[zt,Wt];t.ROUTER_DIRECTIVES=Lt,t.Router=Ot,t.RouterOutletMap=xt,t.RouteSegment=gt,t.UrlSegment=mt,t.Tree=ft,t.UrlTree=ht,t.RouteTree=pt,t.Routes=jt,t.Route=dt,t.RouterUrlSerializer=Ct,t.DefaultRouterUrlSerializer=Rt,t.ROUTER_PROVIDERS=Dt});