var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/Subject"),require("rxjs/observable/PromiseObservable"),require("rxjs/operator/toPromise"),require("rxjs/Observable")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Subject","rxjs/observable/PromiseObservable","rxjs/operator/toPromise","rxjs/Observable"],e):e((t.ng=t.ng||{},t.ng.compiler=t.ng.compiler||{}),t.ng.core,t.Rx,t.Rx,t.Rx.Observable.prototype,t.Rx)}(this,function(t,e,n,i,r,s){"use strict";function o(){return zn}function a(t){return void 0!==t&&null!==t}function u(t){return void 0===t||null===t}function p(t){return"boolean"==typeof t}function c(t){return"number"==typeof t}function l(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}function f(t){return h(t)&&Object.getPrototypeOf(t)===Kn}function d(t){return Array.isArray(t)}function v(){}function m(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.name)return t.name;if(t.overriddenName)return t.overriddenName;var e=t.toString(),n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function y(t){return t}function g(t,e){return t[e]}function _(t){return u(t)?null:t}function w(t){return u(t)?!1:t}function x(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function E(t,e,n,i){var r=n+"\nreturn "+e+"\n//# sourceURL="+t,s=[],o=[];for(var a in i)s.push(a),o.push(i[a]);return(new(Function.bind.apply(Function,[void 0].concat(s.concat(r))))).apply(void 0,o)}function C(t){return!x(t)}function S(t,e,n){void 0===n&&(n=null);var i=[];return e.forEach(function(e){var r=e.visit(t,n);a(r)&&i.push(r)}),i}function b(t,e){if(a(t))for(var n=0;n<t.length;n++){var i=t[n];d(i)?b(i,e):e.push(i)}return e}function A(){throw new or("unimplemented")}function T(t,e){return new Nr(t,di.Character,e,Xn.fromCharCode(e))}function P(t,e){return new Nr(t,di.Identifier,0,e)}function k(t,e){return new Nr(t,di.Keyword,0,e)}function I(t,e){return new Nr(t,di.Operator,0,e)}function M(t,e){return new Nr(t,di.String,0,e)}function N(t,e){return new Nr(t,di.Number,e,"")}function O(t){return t>=Dr&&Br>=t||t==Ms}function R(t){return t>=_s&&Ts>=t||t>=cs&&hs>=t||t==ys||t==Qr}function D(t){if(0==t.length)return!1;var e=new Os(t);if(!R(e.peek))return!1;for(e.advance();e.peek!==Rr;){if(!V(e.peek))return!1;e.advance()}return!0}function V(t){return t>=_s&&Ts>=t||t>=cs&&hs>=t||t>=us&&ps>=t||t==ys||t==Qr}function L(t){return t>=us&&ps>=t}function U(t){return t==ws||t==ls}function F(t){return t==Zr||t==Yr}function B(t){return t===Kr||t===qr||t===gs}function j(t){switch(t){case Es:return Vr;case xs:return Ur;case Cs:return Fr;case Ss:return Dr;case As:return Lr;default:return t}}function q(t,e,n){void 0===n&&(n=null);var i=[];return e.forEach(function(e){var r=e.visit(t,n);a(r)&&i.push(r)}),i}function H(t){var e=ro[t.toLowerCase()];return a(e)?e:so}function Q(t){if("@"!=t[0])return[null,t];var e=$n.firstMatch(oo,t);return[e[1],e[2]]}function W(t){return Q(t)[0]}function z(t,e){return a(t)?"@"+t+":"+e:e}function K(t,e,n){return void 0===n&&(n=!1),new zo(new Ys(t,e),n).tokenize()}function X(t){var e=t===co?"EOF":Xn.fromCharCode(t);return'Unexpected character "'+e+'"'}function G(t){return'Unknown entity "'+t+'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax'}function J(t){return!Y(t)||t===co}function Y(t){return t>=lo&&vo>=t||t===Ho}function $(t){return Y(t)||t===ko||t===Eo||t===wo||t===yo||t===Po}function Z(t){return(Fo>t||t>jo)&&(Do>t||t>Uo)&&(Co>t||t>bo)}function tt(t){return t==So||t==co||!rt(t)}function et(t){return t==So||t==co||!it(t)}function nt(t,e){return t===No&&e!=No}function it(t){return t>=Fo&&jo>=t||t>=Do&&Uo>=t}function rt(t){return t>=Fo&&Bo>=t||t>=Do&&Vo>=t||t>=Co&&bo>=t}function st(t,e){return ot(t)==ot(e)}function ot(t){return t>=Fo&&jo>=t?t-Fo+Do:t}function at(t){for(var e,n=[],i=0;i<t.length;i++){var r=t[i];a(e)&&e.type==no.TEXT&&r.type==no.TEXT?(e.parts[0]+=r.parts[0],e.sourceSpan.end=r.sourceSpan.end):(e=r,n.push(e))}return n}function ut(t,e,n){return u(t)&&(t=H(e).implicitNamespacePrefix,u(t)&&a(n)&&(t=W(n.name))),z(t,e)}function pt(t,e){return t.length>0&&t[t.length-1]===e}function ct(t){var e=null,n=null,i=null,r=!1,s=null;t.attrs.forEach(function(t){var o=t.name.toLowerCase();o==ra?e=t.value:o==ua?n=t.value:o==aa?i=t.value:t.name==ha?r=!0:t.name==fa&&t.value.length>0&&(s=t.value)}),e=lt(e);var o=t.name.toLowerCase(),a=Jo.OTHER;return Q(o)[1]==sa?a=Jo.NG_CONTENT:o==ca?a=Jo.STYLE:o==la?a=Jo.SCRIPT:o==oa&&i==pa&&(a=Jo.STYLESHEET),new da(a,e,n,r,s)}function lt(t){return u(t)||0===t.length?"*":t}function ht(t){if(u(t)||0===t.length||"/"==t[0])return!1;var e=$n.firstMatch(ya,t);return u(e)||"package"==e[1]||"asset"==e[1]}function ft(t,e,n){var i=[],r=Xn.replaceAllMapped(n,ma,function(n){var r=a(n[1])?n[1]:n[2];return ht(r)?(i.push(t.resolve(e,r)),""):n[0]});return new va(r,i)}function dt(t){return Xn.replaceAllMapped(t,_a,function(t){return"-"+t[1].toLowerCase()})}function vt(t,e){var n=Xn.split(t.trim(),/\s*:\s*/g);return n.length>1?n:e}function mt(t){return Xn.replaceAll(t,/\W/g,"_")}function yt(t,e,n){return d(t)?e.visitArray(t,n):f(t)?e.visitStringMap(t,n):u(t)||C(t)?e.visitPrimitive(t,n):e.visitOther(t,n)}function gt(t,e,n){return void 0===e&&(e=null),void 0===n&&(n="src"),Hn?null==e?"asset:angular2/"+t+"/"+t+".dart":"asset:angular2/lib/"+t+"/src/"+e+".dart":null==e?"asset:@angular/lib/"+t+"/index":"asset:@angular/lib/"+t+"/src/"+e}function _t(){return new Ca(xa)}function wt(t){var e=Et(t);return e&&e[Sa.Scheme]||""}function xt(t,e,n,i,r,s,o){var u=[];return a(t)&&u.push(t+":"),a(n)&&(u.push("//"),a(e)&&u.push(e+"@"),u.push(n),a(i)&&u.push(":"+i)),a(r)&&u.push(r),a(s)&&u.push("?"+s),a(o)&&u.push("#"+o),u.join("")}function Et(t){return $n.firstMatch(ba,t)}function Ct(t){if("/"==t)return"/";for(var e="/"==t[0]?"/":"",n="/"===t[t.length-1]?"/":"",i=t.split("/"),r=[],s=0,o=0;o<i.length;o++){var a=i[o];switch(a){case"":case".":break;case"..":r.length>0?r.pop():s++;break;default:r.push(a)}}if(""==e){for(;s-->0;)r.unshift("..");0===r.length&&r.push(".")}return e+r.join("/")+n}function St(t){var e=t[Sa.Path];return e=u(e)?"":Ct(e),t[Sa.Path]=e,xt(t[Sa.Scheme],t[Sa.UserInfo],t[Sa.Domain],t[Sa.Port],e,t[Sa.QueryData],t[Sa.Fragment])}function bt(t,e){var n=Et(encodeURI(e)),i=Et(t);if(a(n[Sa.Scheme]))return St(n);n[Sa.Scheme]=i[Sa.Scheme];for(var r=Sa.Scheme;r<=Sa.Port;r++)u(n[r])&&(n[r]=i[r]);if("/"==n[Sa.Path][0])return St(n);var s=i[Sa.Path];u(s)&&(s="/");var o=s.lastIndexOf("/");return s=s.substring(0,o+1)+n[Sa.Path],n[Sa.Path]=s,St(n)}function At(t){return Ba[t["class"]](t)}function Tt(t,n){var i=ta.parse(n)[0].getMatchingElementTemplate();return Ua.create({type:new Da({runtime:Object,name:t.name+"_Host",moduleUrl:t.moduleUrl,isHost:!0}),template:new La({template:i,templateUrl:"",styles:[],styleUrls:[],ngContentSelectors:[]}),changeDetection:e.ChangeDetectionStrategy.Default,inputs:[],outputs:[],host:{},lifecycleHooks:[],isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],viewQueries:[]})}function Pt(t,e){return u(t)?null:t.map(function(t){return It(t,e)})}function kt(t){return u(t)?null:t.map(Mt)}function It(t,e){return d(t)?Pt(t,e):l(t)||u(t)||p(t)||c(t)?t:e(t)}function Mt(t){return d(t)?kt(t):l(t)||u(t)||p(t)||c(t)?t:t.toJson()}function Nt(t){return a(t)?t:[]}function Ot(t){return new Oa({identifier:t})}function Rt(t,e){var n=e.useExisting,i=e.useValue,r=e.deps;return new Ma({token:t.token,useClass:t.useClass,useExisting:n,useFactory:t.useFactory,useValue:i,deps:r,multi:t.multi})}function Dt(t,e){var n=e.eager,i=e.providers;return new hi(t.token,t.multiProvider,t.eager||n,i,t.providerType,t.sourceSpan)}function Vt(t,e,n,i){return void 0===i&&(i=null),u(i)&&(i=[]),a(t)&&t.forEach(function(t){if(d(t))Vt(t,e,n,i);else{var r;t instanceof Ma?r=t:t instanceof Da?r=new Ma({token:new Oa({identifier:t}),useClass:t}):n.push(new wu("Unknown provider type "+t,e)),a(r)&&i.push(r)}}),i}function Lt(e,n,i){var r=new Ra;e.forEach(function(e){var s=new Ma({token:new Oa({identifier:e.type}),useClass:e.type});Ut([s],e.isComponent?t.ProviderAstType.Component:t.ProviderAstType.Directive,!0,n,i,r)});var s=e.filter(function(t){return t.isComponent}).concat(e.filter(function(t){return!t.isComponent}));return s.forEach(function(e){Ut(Vt(e.providers,n,i),t.ProviderAstType.PublicService,!1,n,i,r),Ut(Vt(e.viewProviders,n,i),t.ProviderAstType.PrivateService,!1,n,i,r)}),r}function Ut(t,e,n,i,r,s){t.forEach(function(t){var o=s.get(t.token);a(o)&&o.multiProvider!==t.multi&&r.push(new wu("Mixing multi and non multi provider is not possible for token "+o.token.name,i)),u(o)?(o=new hi(t.token,t.multi,n,[t],e,i),s.add(t.token,o)):(t.multi||ir.clear(o.providers),o.providers.push(t))})}function Ft(t){var e=new Ra;return a(t.viewQueries)&&t.viewQueries.forEach(function(t){return jt(e,t)}),t.type.diDeps.forEach(function(t){a(t.viewQuery)&&jt(e,t.viewQuery)}),e}function Bt(t){var e=new Ra;return t.forEach(function(t){a(t.queries)&&t.queries.forEach(function(t){return jt(e,t)}),t.type.diDeps.forEach(function(t){a(t.query)&&jt(e,t.query)})}),e}function jt(t,e){e.selectors.forEach(function(n){var i=t.get(n);u(i)&&(i=[],t.add(n,i)),i.push(e)})}function qt(t){return Xn.split(t.trim(),/\s+/g)}function Ht(t,e){var n=new ta,i=Q(t)[1];n.setElement(i);for(var r=0;r<e.length;r++){var s=e[r][0],o=Q(s)[1],a=e[r][1];if(n.addAttribute(o,a),s.toLowerCase()==Tu){var u=qt(a);u.forEach(function(t){return n.addClassName(t)})}}return n}function Qt(t){var e=[];return t.forEach(function(t){var n=e.filter(function(e){return e.type.name==t.type.name&&e.type.moduleUrl==t.type.moduleUrl&&e.type.runtime==t.type.runtime}).length>0;n||e.push(t)}),e}function Wt(t,e,n){var i=new Xp(t,e);return n.visitExpression(i,null)}function zt(t){var e=new Gp;return e.visitAllStatements(t,null),e.varNames}function Kt(t,e){return void 0===e&&(e=null),new cp(t,e)}function Xt(t,e){return void 0===e&&(e=null),new _p(t,null,e)}function Gt(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),a(t)?new Zu(t,e,n):null}function Jt(t,e){return void 0===e&&(e=null),new gp(t,e)}function Yt(t,e){return void 0===e&&(e=null),new Pp(t,e)}function $t(t,e){return void 0===e&&(e=null),new kp(t,e)}function Zt(t){return new xp(t)}function te(t,e,n){return void 0===n&&(n=null),new Sp(t,e,n)}function ee(t){return t.dependencies.forEach(function(t){t.factoryPlaceholder.moduleUrl=ie(t.comp)}),t.statements}function ne(t,e){var n=oe(t)[1];return e.dependencies.forEach(function(t){t.valuePlaceholder.moduleUrl=re(t.moduleUrl,t.isShimmed,n)}),e.statements}function ie(t){var e=oe(t.type.moduleUrl);return e[0]+".ngfactory"+e[1]}function re(t,e,n){return e?t+".shim"+n:""+t+n}function se(t){if(!t.isComponent)throw new or("Could not compile '"+t.type.name+"' because it is not a component.")}function oe(t){var e=t.lastIndexOf(".");return-1!==e?[t.substring(0,e),t.substring(e)]:[t,""]}function ae(t){return Xn.replaceAllMapped(t,wc,function(t){return""})}function ue(t,e){var n=pe(t),i=0;return Xn.replaceAllMapped(n.escapedString,xc,function(t){var r=t[2],s="",o=t[4],u="";a(t[4])&&t[4].startsWith("{"+bc)&&(s=n.blocks[i++],o=t[4].substring(bc.length+1),u="{");var p=e(new Ac(r,s));return""+t[1]+p.selector+t[3]+u+p.content+o})}function pe(t){for(var e=Xn.split(t,Ec),n=[],i=[],r=0,s=[],o=0;o<e.length;o++){var a=e[o];a==Sc&&r--,r>0?s.push(a):(s.length>0&&(i.push(s.join("")),n.push(bc),s=[]),n.push(a)),a==Cc&&r++}return s.length>0&&(i.push(s.join("")),n.push(bc)),new Tc(n.join(""),i)}function ce(t){var e="styles";return a(t)&&(e+="_"+t.type.name),e}function le(t,e){if(u(e))return Np;var n=g(t.runtime,e);return Xt(new ka({name:t.name+"."+n,moduleUrl:t.moduleUrl,runtime:e}))}function he(t,e,n){if(e===n)return t;for(var i=Ip,r=e;r!==n&&a(r.declarationElement.view);)r=r.declarationElement.view,i=i.prop("parent");if(r!==n)throw new or("Internal error: Could not calculate a property in a parent view: "+t);if(t instanceof Ap){var s=t;(n.fields.some(function(t){return t.name==s.name})||n.getters.some(function(t){return t.name==s.name}))&&(i=i.cast(n.classType))}return Wt(Ip.name,i,t)}function fe(t,e){var n=[ve(t)];return e&&n.push(Np),Ip.prop("parentInjector").callMethod("get",n)}function de(t,e){return"viewFactory_"+t.type.name+e}function ve(t){return a(t.value)?Jt(t.value):t.identifierIsInstance?Xt(t.identifier).instantiate([],Gt(t.identifier,[],[Lu.Const])):Xt(t.identifier)}function me(t){for(var e=[],n=Yt([]),i=0;i<t.length;i++){var r=t[i];r.type instanceof tp?(e.length>0&&(n=n.callMethod(pp.ConcatArray,[Yt(e)]),e=[]),n=n.callMethod(pp.ConcatArray,[r])):e.push(r)}return e.length>0&&(n=n.callMethod(pp.ConcatArray,[Yt(e)])),n}function ye(t,e,n,i){i.fields.push(new Fp(n.name,null));var r=e<_u.pureProxies.length?_u.pureProxies[e]:null;if(u(r))throw new or("Unsupported number of argument for pure functions: "+e);i.createMethod.addStmt(Ip.prop(n.name).set(Xt(r).callFn([t])).toStmt())}function ge(t){return ir.flatten(t.values.map(function(t){return t instanceof Qc?_e(t.view.declarationElement.appElement,t.view,ge(t)):t}))}function _e(t,e,n){var i=n.map(function(t){return Wt(Ip.name,Kt("nestedView"),t)});return t.callMethod("mapNestedViews",[Kt(e.className),te([new Cp("nestedView",e.classType)],[new Lp(Yt(i))])])}function we(t,e,n,i){i.fields.push(new Fp(n,Gt(_u.QueryList)));var r=Ip.prop(n);return i.createMethod.addStmt(Ip.prop(n).set(Xt(_u.QueryList).instantiate([])).toStmt()),r}function xe(t,e){e.meta.selectors.forEach(function(n){var i=t.get(n);u(i)&&(i=[],t.add(n,i)),i.push(e)})}function Ee(t,e,n,i){var r;return r=e>0?Jt(t).lowerEquals(jc.requestNodeIndex).and(jc.requestNodeIndex.lowerEquals(Jt(t+e))):Jt(t).identical(jc.requestNodeIndex),new Hp(jc.token.identical(ve(n.token)).and(r),[new Lp(i)])}function Ce(t,e,n,i,r,s){var o,a,p=s.view;if(i?(o=Yt(n),a=new tp(np)):(o=n[0],a=n[0].type),u(a)&&(a=np),r)p.fields.push(new Fp(t,a)),p.createMethod.addStmt(Ip.prop(t).set(o).toStmt());else{var c="_"+t;p.fields.push(new Fp(c,a));var l=new Xc(p);l.resetDebugInfo(s.nodeIndex,s.sourceAst),l.addStmt(new Hp(Ip.prop(c).isBlank(),[Ip.prop(c).set(o).toStmt()])),l.addStmt(new Lp(Ip.prop(c))),p.getters.push(new jp(t,l.finish(),a))}return Ip.prop(t)}function Se(t){return yt(t,new $c,null)}function be(t,e){for(var n=null,i=t.pipeMetas.length-1;i>=0;i--){var r=t.pipeMetas[i];if(r.name==e){n=r;break}}if(u(n))throw new or("Illegal state: Could not find pipe "+e+" although the parser should have detected this error!");return n}function Ae(t,e){return e>0?Si.EMBEDDED:t.type.isHost?Si.HOST:Si.COMPONENT}function Te(t,e,n){var i=new ul(t,n);return S(i,e,t.declarationElement.isNull()?t.declarationElement:t.declarationElement.parent),i.nestedViewCount}function Pe(t,e){t.afterNodes(),Oe(t,e),t.nodes.forEach(function(t){t instanceof Jc&&t.hasEmbeddedView&&Pe(t.embeddedView,e)})}function ke(t,e){var n={};return nr.forEach(t,function(t,e){n[e]=t}),e.forEach(function(t){nr.forEach(t.hostAttributes,function(t,e){var i=n[e];n[e]=a(i)?Me(e,i,t):t})}),Ne(n)}function Ie(t){var e={};return t.forEach(function(t){e[t.name]=t.value}),e}function Me(t,e,n){return t==il||t==rl?e+" "+n:n}function Ne(t){var e=[];nr.forEach(t,function(t,n){e.push([n,t])}),ir.sort(e,function(t,e){return Xn.compare(t[0],e[0])});var n=[];return e.forEach(function(t){n.push([t[0],t[1]])}),n}function Oe(t,e){var n=Np;t.genConfig.genDebugInfo&&(n=Kt("nodeDebugInfos_"+t.component.type.name+t.viewIndex),e.push(n.set(Yt(t.nodes.map(Re),new tp(new Zu(_u.StaticNodeDebugInfo),[Lu.Const]))).toDeclStmt(null,[dp.Final])));var i=Kt("renderType_"+t.component.type.name);0===t.viewIndex&&e.push(i.set(Np).toDeclStmt(Gt(_u.RenderComponentType)));var r=De(t,i,n);e.push(r),e.push(Ve(t,r,i))}function Re(t){var e=t instanceof Jc?t:null,n=[],i=Np,r=[];return a(e)&&(n=e.getProviderTokens(),a(e.component)&&(i=ve(Ot(e.component.type))),nr.forEach(e.referenceTokens,function(t,e){r.push([e,a(t)?ve(t):Np])})),Xt(_u.StaticNodeDebugInfo).instantiate([Yt(n,new tp(np,[Lu.Const])),i,$t(r,new ep(np,[Lu.Const]))],Gt(_u.StaticNodeDebugInfo,null,[Lu.Const]))}function De(t,e,n){var i=[new Cp(Uc.viewUtils.name,Gt(_u.ViewUtils)),new Cp(Uc.parentInjector.name,Gt(_u.Injector)),new Cp(Uc.declarationEl.name,Gt(_u.AppElement))],r=[Kt(t.className),e,Rc.fromValue(t.viewType),Uc.viewUtils,Uc.parentInjector,Uc.declarationEl,Lc.fromValue(je(t))];t.genConfig.genDebugInfo&&r.push(n);var s=new Bp(null,i,[Mp.callFn(r).toStmt()]),o=[new Bp("createInternal",[new Cp(ol.name,sp)],Le(t),Gt(_u.AppElement)),new Bp("injectorGetInternal",[new Cp(jc.token.name,np),new Cp(jc.requestNodeIndex.name,rp),new Cp(jc.notFoundResult.name,np)],Fe(t.injectorGetMethod.finish(),jc.notFoundResult),np),new Bp("detectChangesInternal",[new Cp(qc.throwOnChange.name,ip)],Ue(t)),new Bp("dirtyParentQueriesInternal",[],t.dirtyParentQueriesMethod.finish()),new Bp("destroyInternal",[],t.destroyMethod.finish())].concat(t.eventHandlerMethods),a=t.genConfig.genDebugInfo?_u.DebugAppView:_u.AppView,u=new qp(t.className,Xt(a,[Be(t)]),t.fields,t.getters,s,o.filter(function(t){return t.body.length>0}));return u}function Ve(t,e,n){var i,r=[new Cp(Uc.viewUtils.name,Gt(_u.ViewUtils)),new Cp(Uc.parentInjector.name,Gt(_u.Injector)),new Cp(Uc.declarationEl.name,Gt(_u.AppElement))],s=[];return i=t.component.template.templateUrl==t.component.type.moduleUrl?t.component.type.moduleUrl+" class "+t.component.type.name+" - inline template":t.component.template.templateUrl,0===t.viewIndex&&(s=[new Hp(n.identical(Np),[n.set(Uc.viewUtils.callMethod("createRenderComponentType",[Jt(i),Jt(t.component.template.ngContentSelectors.length),Dc.fromValue(t.component.template.encapsulation),t.styles])).toStmt()])]),te(r,s.concat([new Lp(Kt(e.name).instantiate(e.constructorMethod.params.map(function(t){return Kt(t.name)})))]),Gt(_u.AppView,[Be(t)])).toDeclStmt(t.viewFactory.name,[dp.Final])}function Le(t){var e=Np,n=[];t.viewType===Si.COMPONENT&&(e=Fc.renderer.callMethod("createViewRoot",[Ip.prop("declarationAppElement").prop("nativeElement")]),n=[sl.set(e).toDeclStmt(Gt(t.genConfig.renderTypes.renderNode),[dp.Final])]);var i;return i=t.viewType===Si.HOST?t.nodes[0].appElement:Np,n.concat(t.createMethod.finish()).concat([Ip.callMethod("init",[me(t.rootNodesOrAppElements),Yt(t.nodes.map(function(t){return t.renderNode})),Yt(t.disposables),Yt(t.subscriptions)]).toStmt(),new Lp(i)])}function Ue(t){var e=[];if(t.detectChangesInInputsMethod.isEmpty()&&t.updateContentQueriesMethod.isEmpty()&&t.afterContentLifecycleCallbacksMethod.isEmpty()&&t.detectChangesRenderPropertiesMethod.isEmpty()&&t.updateViewQueriesMethod.isEmpty()&&t.afterViewLifecycleCallbacksMethod.isEmpty())return e;ir.addAll(e,t.detectChangesInInputsMethod.finish()),e.push(Ip.callMethod("detectContentChildrenChanges",[qc.throwOnChange]).toStmt());var n=t.updateContentQueriesMethod.finish().concat(t.afterContentLifecycleCallbacksMethod.finish());n.length>0&&e.push(new Hp(Zt(qc.throwOnChange),n)),ir.addAll(e,t.detectChangesRenderPropertiesMethod.finish()),e.push(Ip.callMethod("detectViewChildrenChanges",[qc.throwOnChange]).toStmt());var i=t.updateViewQueriesMethod.finish().concat(t.afterViewLifecycleCallbacksMethod.finish());i.length>0&&e.push(new Hp(Zt(qc.throwOnChange),i));var r=[],s=zt(e);return sr.has(s,qc.changed.name)&&r.push(qc.changed.set(Jt(!0)).toDeclStmt(ip)),sr.has(s,qc.changes.name)&&r.push(qc.changes.set(Np).toDeclStmt(new ep(Gt(_u.SimpleChange)))),sr.has(s,qc.valUnwrapper.name)&&r.push(qc.valUnwrapper.set(Xt(_u.ValueUnwrapper).instantiate([])).toDeclStmt(null,[dp.Final])),r.concat(e)}function Fe(t,e){return t.length>0?t.concat([new Lp(e)]):t}function Be(t){return t.viewType===Si.COMPONENT?Gt(t.component.type):np}function je(t){var n;return n=t.viewType===Si.COMPONENT?vi(t.component.changeDetection)?e.ChangeDetectionStrategy.CheckAlways:e.ChangeDetectionStrategy.CheckOnce:e.ChangeDetectionStrategy.CheckAlways}function qe(t,e,n,i){var r=new ll(t,e,i),s=n.visit(r,Hc.Expression);return new cl(s,r.needsValueUnwrapper)}function He(t,e,n){var i=new ll(t,e,null),r=[];return Ke(n.visit(i,Hc.Statement),r),r}function Qe(t,e){if(t!==Hc.Statement)throw new or("Expected a statement, but saw "+e)}function We(t,e){if(t!==Hc.Expression)throw new or("Expected an expression, but saw "+e)}function ze(t,e){return t===Hc.Statement?e.toStmt():e}function Ke(t,e){d(t)?t.forEach(function(t){return Ke(t,e)}):e.push(t)}function Xe(t){return Ip.prop("_expr_"+t)}function Ge(t){return Kt("currVal_"+t)}function Je(t,e,n,i,r,s,o){var a=qe(t,r,i,qc.valUnwrapper);if(!u(a.expression)){if(t.fields.push(new Fp(n.name,null,[dp.Private])),t.createMethod.addStmt(Ip.prop(n.name).set(Xt(_u.uninitialized)).toStmt()),a.needsValueUnwrapper){var p=qc.valUnwrapper.callMethod("reset",[]).toStmt();o.addStmt(p)}o.addStmt(e.set(a.expression).toDeclStmt(null,[dp.Final]));var c=Xt(_u.checkBinding).callFn([qc.throwOnChange,n,e]);a.needsValueUnwrapper&&(c=qc.valUnwrapper.prop("hasWrappedValue").or(c)),o.addStmt(new Hp(c,s.concat([Ip.prop(n.name).set(e).toStmt()])))}}function Ye(t,e,n){var i=n.bindings.length;n.bindings.push(new hl(e,t));var r=Ge(i),s=Xe(i);n.detectChangesRenderPropertiesMethod.resetDebugInfo(e.nodeIndex,t),Je(n,r,s,t.value,n.componentContext,[Ip.prop("renderer").callMethod("setText",[e.renderNode,r]).toStmt()],n.detectChangesRenderPropertiesMethod)}function $e(e,n,i){var r=i.view,s=i.renderNode;e.forEach(function(e){var o=r.bindings.length;r.bindings.push(new hl(i,e)),r.detectChangesRenderPropertiesMethod.resetDebugInfo(i.nodeIndex,e);var u,p=Xe(o),c=Ge(o),l=Ze(e,c),h=[];switch(e.type){case t.PropertyBindingType.Property:u="setElementProperty",r.genConfig.logBindingUpdate&&h.push(rn(s,e.name,c));break;case t.PropertyBindingType.Attribute:u="setElementAttribute",l=l.isBlank().conditional(Np,l.callMethod("toString",[]));break;case t.PropertyBindingType.Class:u="setElementClass";break;case t.PropertyBindingType.Style:u="setElementStyle";var f=l.callMethod("toString",[]);a(e.unit)&&(f=f.plus(Jt(e.unit))),l=l.isBlank().conditional(Np,f)}h.push(Ip.prop("renderer").callMethod(u,[s,Jt(e.name),l]).toStmt()),Je(r,c,p,e.value,n,h,r.detectChangesRenderPropertiesMethod)})}function Ze(t,e){var n;switch(t.securityContext){case Li.NONE:return e;case Li.HTML:n="HTML";break;case Li.STYLE:n="STYLE";break;case Li.SCRIPT:n="SCRIPT";break;case Li.URL:n="URL";break;case Li.RESOURCE_URL:n="RESOURCE_URL";break;default:throw new Error("internal error, unexpected SecurityContext "+t.securityContext+".")}var i=Fc.viewUtils.prop("sanitizer"),r=[Xt(_u.SecurityContext).prop(n),e];return i.callMethod("sanitize",r)}function tn(t,e){$e(t,e.view.componentContext,e)}function en(t,e,n){$e(t.hostProperties,e,n)}function nn(t,e,n){if(0!==t.inputs.length){var i=n.view,r=i.detectChangesInInputsMethod;r.resetDebugInfo(n.nodeIndex,n.sourceAst);var s=t.directive.lifecycleHooks,o=-1!==s.indexOf(gi.OnChanges),a=t.directive.isComponent&&!vi(t.directive.changeDetection);o&&r.addStmt(qc.changes.set(Np).toStmt()),a&&r.addStmt(qc.changed.set(Jt(!1)).toStmt()),t.inputs.forEach(function(t){var s=i.bindings.length;i.bindings.push(new hl(n,t)),r.resetDebugInfo(n.nodeIndex,t);var u=Xe(s),p=Ge(s),c=[e.prop(t.directiveName).set(p).toStmt()];o&&(c.push(new Hp(qc.changes.identical(Np),[qc.changes.set($t([],new ep(Gt(_u.SimpleChange)))).toStmt()])),c.push(qc.changes.key(Jt(t.directiveName)).set(Xt(_u.SimpleChange).instantiate([u,p])).toStmt())),a&&c.push(qc.changed.set(Jt(!0)).toStmt()),i.genConfig.logBindingUpdate&&c.push(rn(n.renderNode,t.directiveName,p)),Je(i,p,u,t.value,i.componentContext,c,r)}),a&&r.addStmt(new Hp(qc.changed,[n.appElement.prop("componentView").callMethod("markAsCheckOnce",[]).toStmt()]))}}function rn(t,e,n){return Ip.prop("renderer").callMethod("setBindingDebugInfo",[t,Jt("ng-reflect-"+dt(e)),n.isBlank().conditional(Np,n.callMethod("toString",[]))]).toStmt()}function sn(t,e,n){var i=[];return t.forEach(function(t){n.view.bindings.push(new hl(n,t));var e=fl.getOrCreate(n,t.target,t.name,i);e.addAction(t,null,null)}),ir.forEachWithIndex(e,function(t,e){var r=n.directiveInstances[e];t.hostEvents.forEach(function(e){n.view.bindings.push(new hl(n,e));var s=fl.getOrCreate(n,e.target,e.name,i);s.addAction(e,t.directive,r)})}),i.forEach(function(t){return t.finishMethod()}),i}function on(t,e,n){nr.forEach(t.directive.outputs,function(t,i){n.filter(function(e){return e.eventName==t}).forEach(function(t){t.listenToDirective(e,i)})})}function an(t){t.forEach(function(t){return t.listenToRenderer()})}function un(t){return t instanceof Vp?t.expr:t instanceof Lp?t.value:null}function pn(t){return Xn.replaceAll(t,/[^a-zA-Z_]/g,"_")}function cn(t,e,n){var i=n.view,r=i.detectChangesInInputsMethod,s=t.directive.lifecycleHooks;-1!==s.indexOf(gi.OnChanges)&&t.inputs.length>0&&r.addStmt(new Hp(qc.changes.notIdentical(Np),[e.callMethod("ngOnChanges",[qc.changes]).toStmt()])),-1!==s.indexOf(gi.OnInit)&&r.addStmt(new Hp(dl.and(vl),[e.callMethod("ngOnInit",[]).toStmt()])),-1!==s.indexOf(gi.DoCheck)&&r.addStmt(new Hp(vl,[e.callMethod("ngDoCheck",[]).toStmt()]))}function ln(t,e,n){var i=n.view,r=t.lifecycleHooks,s=i.afterContentLifecycleCallbacksMethod;s.resetDebugInfo(n.nodeIndex,n.sourceAst),-1!==r.indexOf(gi.AfterContentInit)&&s.addStmt(new Hp(dl,[e.callMethod("ngAfterContentInit",[]).toStmt()])),-1!==r.indexOf(gi.AfterContentChecked)&&s.addStmt(e.callMethod("ngAfterContentChecked",[]).toStmt())}function hn(t,e,n){var i=n.view,r=t.lifecycleHooks,s=i.afterViewLifecycleCallbacksMethod;s.resetDebugInfo(n.nodeIndex,n.sourceAst),-1!==r.indexOf(gi.AfterViewInit)&&s.addStmt(new Hp(dl,[e.callMethod("ngAfterViewInit",[]).toStmt()])),-1!==r.indexOf(gi.AfterViewChecked)&&s.addStmt(e.callMethod("ngAfterViewChecked",[]).toStmt())}function fn(t,e,n){var i=n.view.destroyMethod;i.resetDebugInfo(n.nodeIndex,n.sourceAst),-1!==t.lifecycleHooks.indexOf(gi.OnDestroy)&&i.addStmt(e.callMethod("ngOnDestroy",[]).toStmt())}function dn(t,e,n){var i=n.destroyMethod;-1!==t.lifecycleHooks.indexOf(gi.OnDestroy)&&i.addStmt(e.callMethod("ngOnDestroy",[]).toStmt())}function vn(t,e){var n=new ml(t);S(n,e),t.pipes.forEach(function(t){dn(t.meta,t.instance,t.view)})}function mn(t){return t instanceof e.DirectiveMetadata}function yn(t){return t instanceof e.PipeMetadata}function gn(t,e){if(!(e instanceof Wn))return!1;var n=e.prototype;switch(t){case gi.AfterContentInit:return!!n.ngAfterContentInit;case gi.AfterContentChecked:return!!n.ngAfterContentChecked;case gi.AfterViewInit:return!!n.ngAfterViewInit;case gi.AfterViewChecked:return!!n.ngAfterViewChecked;case gi.OnChanges:return!!n.ngOnChanges;case gi.DoCheck:return!!n.ngDoCheck;case gi.OnDestroy:return!!n.ngOnDestroy;case gi.OnInit:return!!n.ngOnInit;default:return!1}}function _n(t,e){if(o()&&!u(e)){if(!d(e))throw new or("Expected '"+t+"' to be an array of strings.");for(var n=0;n<e.length;n+=1)if(!l(e[n]))throw new or("Expected '"+t+"' to be an array of strings.")}}function wn(t,e){var n=[];return a(e)&&En(e,n),a(t.directives)&&En(t.directives,n),n}function xn(t,e){var n=[];return a(e)&&En(e,n),a(t.pipes)&&En(t.pipes,n),n}function En(t,n){for(var i=0;i<t.length;i++){var r=e.resolveForwardRef(t[i]);d(r)?En(r,n):n.push(r)}}function Cn(t){return h(t)&&a(t.name)&&a(t.filePath)}function Sn(t){return Cn(t)||t instanceof Wn}function bn(t){return Cn(t)?t.filePath:null}function An(t,e,n){if(Cn(e))return bn(e);if(a(n.moduleId)){var i=n.moduleId,r=wt(i);return a(r)&&r.length>0?i:"package:"+i+ga}return t.importUri(e)}function Tn(t){return yt(t,new Al,null)}function Pn(t,e){if(u(t))return null;var n=Xn.replaceAllMapped(t,Tl,function(t){return"$"==t[0]?e?"\\$":"$":"\n"==t[0]?"\\n":"\r"==t[0]?"\\r":"\\"+t[0]});return"'"+n+"'"}function kn(t){for(var e="",n=0;t>n;n++)e+="  ";return e}function In(t,e,n){var i=new Rl,r=Ml.createRoot([n]);return i.visitAllStatements(e,r),E(t,n,r.toSource(),i.getArgs())}function Mn(t){var e,n=new Vl(Dl),i=Ml.createRoot([]);return e=d(t)?t:[t],e.forEach(function(t){if(t instanceof Op)t.visitStatement(n,i);else if(t instanceof up)t.visitExpression(n,i);else{if(!(t instanceof Ju))throw new or("Don't know how to print debug info for "+t);t.visitType(n,i)}}),i.toSource()}function Nn(t){if(t instanceof Vp){var e=t.expr;if(e instanceof mp){var n=e.fn;if(n instanceof cp&&n.builtin===ap.Super)return e}}return null}function On(t){return a(t)&&t.hasModifier(Lu.Const)}function Rn(t){var e,n=new Ul(Ll),i=Ml.createRoot([]);return e=d(t)?t:[t],e.forEach(function(t){if(t instanceof Op)t.visitStatement(n,i);else if(t instanceof up)t.visitExpression(n,i);else{if(!(t instanceof Ju))throw new or("Don't know how to print debug info for "+t);t.visitType(n,i)}}),i.toSource()}function Dn(t,e,n){var i=t.concat([new Lp(Kt(e))]),r=new Bl(null,null,null,null,new Map,new Map,new Map,new Map,n),s=new Hl,o=s.visitAllStatements(i,r);return a(o)?o.value:null}function Vn(t){return Hn?t instanceof Fl:a(t)&&a(t.props)&&a(t.getters)&&a(t.methods)}function Ln(t,e,n,i,r){for(var s=i.createChildWihtLocalVars(),o=0;o<t.length;o++)s.vars.set(t[o],e[o]);var u=r.visitAllStatements(n,s);return a(u)?u.value:null}function Un(t,e,n,i){switch(t.length){case 0:return function(){return Ln(t,[],e,n,i)};case 1:return function(r){return Ln(t,[r],e,n,i)};case 2:return function(r,s){return Ln(t,[r,s],e,n,i)};case 3:return function(r,s,o){return Ln(t,[r,s,o],e,n,i)};case 4:return function(r,s,o,a){return Ln(t,[r,s,o,a],e,n,i)};case 5:return function(r,s,o,a,u){return Ln(t,[r,s,o,a,u],e,n,i)};case 6:return function(r,s,o,a,u,p){return Ln(t,[r,s,o,a,u,p],e,n,i)};case 7:return function(r,s,o,a,u,p,c){return Ln(t,[r,s,o,a,u,p,c],e,n,i)};case 8:return function(r,s,o,a,u,p,c,l){return Ln(t,[r,s,o,a,u,p,c,l],e,n,i)};case 9:return function(r,s,o,a,u,p,c,l,h){return Ln(t,[r,s,o,a,u,p,c,l,h],e,n,i)};case 10:return function(r,s,o,a,u,p,c,l,h,f){return Ln(t,[r,s,o,a,u,p,c,l,h,f],e,n,i)};default:throw new or("Declaring functions with more than 10 arguments is not supported right now")}}function Fn(t){if(!t.isComponent)throw new or("Could not compile '"+t.type.name+"' because it is not a component.")}function Bn(){return new zu(o(),!1,!0)}var jn,qn=function(){function t(){}return t}();jn="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;var Hn=!1,Qn=jn,Wn=Function,zn=!0;Qn.assert=function(t){};var Kn=Object.getPrototypeOf({}),Xn=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,i=0;i<t.length&&t[i]==e;i++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,i=t.length-1;i>=0&&t[i]==e;i--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return-1!=t.indexOf(e)},t.compare=function(t,e){return e>t?-1:t>e?1:0},t}(),Gn=function(){function t(t){void 0===t&&(t=[]),this.parts=t}return t.prototype.add=function(t){this.parts.push(t)},t.prototype.toString=function(){return this.parts.join("")},t}(),Jn=function(t){function e(e){t.call(this),this.message=e}return __extends(e,t),e.prototype.toString=function(){return this.message},e}(Error),Yn=function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Jn("Invalid integer literal when parsing "+t);

return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Jn("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return 0/0},enumerable:!0,configurable:!0}),t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),$n=function(){function t(){}return t.create=function(t,e){return void 0===e&&(e=""),e=e.replace(/g/g,""),new Qn.RegExp(t,e+"g")},t.firstMatch=function(t,e){return t.lastIndex=0,t.exec(e)},t.test=function(t,e){return t.lastIndex=0,t.test(e)},t.matcher=function(t,e){return t.lastIndex=0,{re:t,input:e}},t.replaceAll=function(t,e,n){var i=t.exec(e),r="";t.lastIndex=0;for(var s=0;i;)r+=e.substring(s,i.index),r+=n(i),s=i.index+i[0].length,t.lastIndex=s,i=t.exec(e);return r+=e.substring(s)},t}(),Zn=function(){function t(){}return t.next=function(t){return t.re.exec(t.input)},t}(),ti=function(){function t(){}return t.apply=function(t,e){return t.apply(null,e)},t}(),ei=function(){function t(t,e,n){this.value=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),ni=function(){function t(t,e,n){this.value=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitBoundText(this,e)},t}(),ii=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitAttr(this,e)},t}(),ri=function(){function t(t,e,n,i,r,s){this.name=t,this.type=e,this.securityContext=n,this.value=i,this.unit=r,this.sourceSpan=s}return t.prototype.visit=function(t,e){return t.visitElementProperty(this,e)},t}(),si=function(){function t(t,e,n,i){this.name=t,this.target=e,this.handler=n,this.sourceSpan=i}return t.prototype.visit=function(t,e){return t.visitEvent(this,e)},Object.defineProperty(t.prototype,"fullName",{get:function(){return a(this.target)?this.target+":"+this.name:this.name},enumerable:!0,configurable:!0}),t}(),oi=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitReference(this,e)},t}(),ai=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitVariable(this,e)},t}(),ui=function(){function t(t,e,n,i,r,s,o,a,u,p,c){this.name=t,this.attrs=e,this.inputs=n,this.outputs=i,this.references=r,this.directives=s,this.providers=o,this.hasViewContainer=a,this.children=u,this.ngContentIndex=p,this.sourceSpan=c}return t.prototype.visit=function(t,e){return t.visitElement(this,e)},t}(),pi=function(){function t(t,e,n,i,r,s,o,a,u,p){this.attrs=t,this.outputs=e,this.references=n,this.variables=i,this.directives=r,this.providers=s,this.hasViewContainer=o,this.children=a,this.ngContentIndex=u,this.sourceSpan=p}return t.prototype.visit=function(t,e){return t.visitEmbeddedTemplate(this,e)},t}(),ci=function(){function t(t,e,n,i){this.directiveName=t,this.templateName=e,this.value=n,this.sourceSpan=i}return t.prototype.visit=function(t,e){return t.visitDirectiveProperty(this,e)},t}(),li=function(){function t(t,e,n,i,r){this.directive=t,this.inputs=e,this.hostProperties=n,this.hostEvents=i,this.sourceSpan=r}return t.prototype.visit=function(t,e){return t.visitDirective(this,e)},t}(),hi=function(){function t(t,e,n,i,r,s){this.token=t,this.multiProvider=e,this.eager=n,this.providers=i,this.providerType=r,this.sourceSpan=s}return t.prototype.visit=function(t,e){return null},t}();t.ProviderAstType,function(t){t[t.PublicService=0]="PublicService",t[t.PrivateService=1]="PrivateService",t[t.Component=2]="Component",t[t.Directive=3]="Directive",t[t.Builtin=4]="Builtin"}(t.ProviderAstType||(t.ProviderAstType={}));var fi=function(){function t(t,e,n){this.index=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitNgContent(this,e)},t}();t.PropertyBindingType,function(t){t[t.Property=0]="Property",t[t.Attribute=1]="Attribute",t[t.Class=2]="Class",t[t.Style=3]="Style"}(t.PropertyBindingType||(t.PropertyBindingType={}));var di,vi=e.__core_private__.isDefaultChangeDetectionStrategy,mi=e.__core_private__.ChangeDetectorState,yi=e.__core_private__.CHANGE_DETECTION_STRATEGY_VALUES,gi=e.__core_private__.LifecycleHooks,_i=e.__core_private__.LIFECYCLE_HOOKS_VALUES,wi=e.__core_private__.ReflectorReader,xi=e.__core_private__.AppElement,Ei=e.__core_private__.AppView,Ci=e.__core_private__.DebugAppView,Si=e.__core_private__.ViewType,bi=e.__core_private__.MAX_INTERPOLATION_VALUES,Ai=e.__core_private__.checkBinding,Ti=e.__core_private__.flattenNestedViewRenderNodes,Pi=e.__core_private__.interpolate,ki=e.__core_private__.ViewUtils,Ii=e.__core_private__.VIEW_ENCAPSULATION_VALUES,Mi=e.__core_private__.DebugContext,Ni=e.__core_private__.StaticNodeDebugInfo,Oi=e.__core_private__.devModeEqual,Ri=e.__core_private__.uninitialized,Di=e.__core_private__.ValueUnwrapper,Vi=e.__core_private__.TemplateRef_,Li=e.__core_private__.SecurityContext,Ui=e.__core_private__.createProvider,Fi=e.__core_private__.isProviderLiteral,Bi=e.__core_private__.EMPTY_ARRAY,ji=e.__core_private__.EMPTY_MAP,qi=e.__core_private__.pureProxy1,Hi=e.__core_private__.pureProxy2,Qi=e.__core_private__.pureProxy3,Wi=e.__core_private__.pureProxy4,zi=e.__core_private__.pureProxy5,Ki=e.__core_private__.pureProxy6,Xi=e.__core_private__.pureProxy7,Gi=e.__core_private__.pureProxy8,Ji=e.__core_private__.pureProxy9,Yi=e.__core_private__.pureProxy10,$i=e.__core_private__.castByValue,Zi=e.__core_private__.Console,tr=Qn.Map,er=Qn.Set,nr=(function(){try{if(1===new tr([[1,2]]).size)return function(t){return new tr(t)}}catch(t){}return function(t){for(var e=new tr,n=0;n<t.length;n++){var i=t[n];e.set(i[0],i[1])}return e}}(),function(){try{if(new tr(new tr))return function(t){return new tr(t)}}catch(t){}return function(t){var e=new tr;return t.forEach(function(t,n){e.set(n,t)}),e}}(),function(){return(new tr).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),function(){try{if((new tr).values().next)return function(t,e){return Array.from(e?t.values():t.keys())}}catch(t){}return function(t,e){var n=ir.createFixedSize(t.size),i=0;return t.forEach(function(t,r){n[i]=e?t:r,i++}),n}}(),function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).reduce(function(e,n){return e.push(t[n]),e},[])},t.isEmpty=function(t){for(var e in t)return!1;return!0},t["delete"]=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},t.merge=function(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},t.equals=function(t,e){var n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(var r,s=0;s<n.length;s++)if(r=n[s],t[r]!==e[r])return!1;return!0},t}()),ir=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return-1!==t.indexOf(e)},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var i=t.indexOf(e[n]);t.splice(i,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1?(t.splice(n,1),!0):!1},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=null),t.fill(e,n,null===i?t.length:i)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){a(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,i=-(1/0),r=0;r<t.length;r++){var s=t[r];if(!u(s)){var o=e(s);o>i&&(n=s,i=o)}}return n},t.flatten=function(t){var e=[];return b(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),rr=function(){var t=new er([1,2,3]);return 3===t.size?function(t){return new er(t)}:function(t){var e=new er(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),sr=function(){function t(){}return t.createFromList=function(t){return rr(t)},t.has=function(t,e){return t.has(e)},t["delete"]=function(t,e){t["delete"](e)},t}(),or=function(t){function e(e){void 0===e&&(e="--"),t.call(this,e),this.message=e,this.stack=new Error(e).stack}return __extends(e,t),e.prototype.toString=function(){return this.message},e}(Error),ar=function(){function t(){}return t.prototype.visit=function(t,e){return void 0===e&&(e=null),null},t.prototype.toString=function(){return"AST"},t}(),ur=function(t){function e(e,n,i){t.call(this),this.prefix=e,this.uninterpretedExpression=n,this.location=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitQuote(this,e)},e.prototype.toString=function(){return"Quote"},e}(ar),pr=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.visit=function(t,e){void 0===e&&(e=null)},e}(ar),cr=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitImplicitReceiver(this,e)},e}(ar),lr=function(t){function e(e){t.call(this),this.expressions=e}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitChain(this,e)},e}(ar),hr=function(t){function e(e,n,i){t.call(this),this.condition=e,this.trueExp=n,this.falseExp=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitConditional(this,e)},e}(ar),fr=function(t){function e(e,n){t.call(this),this.receiver=e,this.name=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyRead(this,e)},e}(ar),dr=function(t){function e(e,n,i){t.call(this),this.receiver=e,this.name=n,this.value=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyWrite(this,e)},e}(ar),vr=function(t){function e(e,n){t.call(this),this.receiver=e,this.name=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafePropertyRead(this,e)},e}(ar),mr=function(t){function e(e,n){t.call(this),this.obj=e,this.key=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedRead(this,e)},e}(ar),yr=function(t){function e(e,n,i){t.call(this),this.obj=e,this.key=n,this.value=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedWrite(this,e)},e}(ar),gr=function(t){function e(e,n,i){t.call(this),this.exp=e,this.name=n,this.args=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPipe(this,e)},e}(ar),_r=function(t){function e(e){t.call(this),this.value=e}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralPrimitive(this,e)},e}(ar),wr=function(t){function e(e){t.call(this),this.expressions=e}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralArray(this,e)},e}(ar),xr=function(t){function e(e,n){t.call(this),this.keys=e,this.values=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralMap(this,e)},e}(ar),Er=function(t){function e(e,n){t.call(this),this.strings=e,this.expressions=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitInterpolation(this,e)},e}(ar),Cr=function(t){function e(e,n,i){t.call(this),this.operation=e,this.left=n,this.right=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitBinary(this,e)},e}(ar),Sr=function(t){function e(e){t.call(this),this.expression=e}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPrefixNot(this,e)},e}(ar),br=function(t){function e(e,n,i){t.call(this),this.receiver=e,this.name=n,this.args=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitMethodCall(this,e)},e}(ar),Ar=function(t){function e(e,n,i){t.call(this),this.receiver=e,this.name=n,this.args=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafeMethodCall(this,e)},e}(ar),Tr=function(t){function e(e,n){t.call(this),this.target=e,this.args=n}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitFunctionCall(this,e)},e}(ar),Pr=function(t){function e(e,n,i){t.call(this),this.ast=e,this.source=n,this.location=i}return __extends(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),this.ast.visit(t,e)},e.prototype.toString=function(){return this.source+" in "+this.location},e}(ar),kr=function(){function t(t,e,n,i){this.key=t,this.keyIsVar=e,this.name=n,this.expression=i}return t}(),Ir=function(){function t(){}return t.prototype.visitBinary=function(t,e){return t.left.visit(this),t.right.visit(this),null},t.prototype.visitChain=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitConditional=function(t,e){return t.condition.visit(this),t.trueExp.visit(this),t.falseExp.visit(this),null},t.prototype.visitPipe=function(t,e){return t.exp.visit(this),this.visitAll(t.args,e),null},t.prototype.visitFunctionCall=function(t,e){return t.target.visit(this),this.visitAll(t.args,e),null},t.prototype.visitImplicitReceiver=function(t,e){return null},t.prototype.visitInterpolation=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitKeyedRead=function(t,e){return t.obj.visit(this),t.key.visit(this),null},t.prototype.visitKeyedWrite=function(t,e){return t.obj.visit(this),t.key.visit(this),t.value.visit(this),null},t.prototype.visitLiteralArray=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitLiteralMap=function(t,e){return this.visitAll(t.values,e)},t.prototype.visitLiteralPrimitive=function(t,e){return null},t.prototype.visitMethodCall=function(t,e){return t.receiver.visit(this),this.visitAll(t.args,e)},t.prototype.visitPrefixNot=function(t,e){return t.expression.visit(this),null},t.prototype.visitPropertyRead=function(t,e){return t.receiver.visit(this),null},t.prototype.visitPropertyWrite=function(t,e){return t.receiver.visit(this),t.value.visit(this),null},t.prototype.visitSafePropertyRead=function(t,e){return t.receiver.visit(this),null},t.prototype.visitSafeMethodCall=function(t,e){return t.receiver.visit(this),this.visitAll(t.args,e)},t.prototype.visitAll=function(t,e){var n=this;return t.forEach(function(t){return t.visit(n,e)}),null},t.prototype.visitQuote=function(t,e){return null},t}();!function(t){t[t.Character=0]="Character",t[t.Identifier=1]="Identifier",t[t.Keyword=2]="Keyword",t[t.String=3]="String",t[t.Operator=4]="Operator",t[t.Number=5]="Number"}(di||(di={}));var Mr=function(){function t(){}return t.prototype.tokenize=function(t){for(var e=new Os(t),n=[],i=e.scanToken();null!=i;)n.push(i),i=e.scanToken();return n},t}();Mr.decorators=[{type:e.Injectable}];var Nr=function(){function t(t,e,n,i){this.index=t,this.type=e,this.numValue=n,this.strValue=i}return t.prototype.isCharacter=function(t){return this.type==di.Character&&this.numValue==t},t.prototype.isNumber=function(){return this.type==di.Number},t.prototype.isString=function(){return this.type==di.String},t.prototype.isOperator=function(t){return this.type==di.Operator&&this.strValue==t},t.prototype.isIdentifier=function(){return this.type==di.Identifier},t.prototype.isKeyword=function(){return this.type==di.Keyword},t.prototype.isKeywordDeprecatedVar=function(){return this.type==di.Keyword&&"var"==this.strValue},t.prototype.isKeywordLet=function(){return this.type==di.Keyword&&"let"==this.strValue},t.prototype.isKeywordNull=function(){return this.type==di.Keyword&&"null"==this.strValue},t.prototype.isKeywordUndefined=function(){return this.type==di.Keyword&&"undefined"==this.strValue},t.prototype.isKeywordTrue=function(){return this.type==di.Keyword&&"true"==this.strValue},t.prototype.isKeywordFalse=function(){return this.type==di.Keyword&&"false"==this.strValue},t.prototype.toNumber=function(){return this.type==di.Number?this.numValue:-1},t.prototype.toString=function(){switch(this.type){case di.Character:case di.Identifier:case di.Keyword:case di.Operator:case di.String:return this.strValue;case di.Number:return this.numValue.toString();default:return null}},t}(),Or=new Nr(-1,di.Character,0,""),Rr=0,Dr=9,Vr=10,Lr=11,Ur=12,Fr=13,Br=32,jr=33,qr=34,Hr=35,Qr=36,Wr=37,zr=38,Kr=39,Xr=40,Gr=41,Jr=42,Yr=43,$r=44,Zr=45,ts=46,es=47,ns=58,is=59,rs=60,ss=61,os=62,as=63,us=48,ps=57,cs=65,ls=69,hs=90,fs=91,ds=92,vs=93,ms=94,ys=95,gs=96,_s=97,ws=101,xs=102,Es=110,Cs=114,Ss=116,bs=117,As=118,Ts=122,Ps=123,ks=124,Is=125,Ms=160,Ns=function(t){function e(e){t.call(this),this.message=e}return __extends(e,t),e.prototype.toString=function(){return this.message},e}(or),Os=function(){function t(t){this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return t.prototype.advance=function(){this.peek=++this.index>=this.length?Rr:Xn.charCodeAt(this.input,this.index)},t.prototype.scanToken=function(){for(var t=this.input,e=this.length,n=this.peek,i=this.index;Br>=n;){if(++i>=e){n=Rr;break}n=Xn.charCodeAt(t,i)}if(this.peek=n,this.index=i,i>=e)return null;if(R(n))return this.scanIdentifier();if(L(n))return this.scanNumber(i);var r=i;switch(n){case ts:return this.advance(),L(this.peek)?this.scanNumber(r):T(r,ts);case Xr:case Gr:case Ps:case Is:case fs:case vs:case $r:case ns:case is:return this.scanCharacter(r,n);case Kr:case qr:return this.scanString();case Hr:case Yr:case Zr:case Jr:case es:case Wr:case ms:return this.scanOperator(r,Xn.fromCharCode(n));case as:return this.scanComplexOperator(r,"?",ts,".");case rs:case os:return this.scanComplexOperator(r,Xn.fromCharCode(n),ss,"=");case jr:case ss:return this.scanComplexOperator(r,Xn.fromCharCode(n),ss,"=",ss,"=");case zr:return this.scanComplexOperator(r,"&",zr,"&");case ks:return this.scanComplexOperator(r,"|",ks,"|");case Ms:for(;O(this.peek);)this.advance();return this.scanToken()}return this.error("Unexpected character ["+Xn.fromCharCode(n)+"]",0),null},t.prototype.scanCharacter=function(t,e){return this.advance(),T(t,e)},t.prototype.scanOperator=function(t,e){return this.advance(),I(t,e)},t.prototype.scanComplexOperator=function(t,e,n,i,r,s){this.advance();var o=e;return this.peek==n&&(this.advance(),o+=i),a(r)&&this.peek==r&&(this.advance(),o+=s),I(t,o)},t.prototype.scanIdentifier=function(){var t=this.index;for(this.advance();V(this.peek);)this.advance();var e=this.input.substring(t,this.index);return sr.has(Rs,e)?k(t,e):P(t,e)},t.prototype.scanNumber=function(t){var e=this.index===t;for(this.advance();;){if(L(this.peek));else if(this.peek==ts)e=!1;else{if(!U(this.peek))break;this.advance(),F(this.peek)&&this.advance(),L(this.peek)||this.error("Invalid exponent",-1),e=!1}this.advance()}var n=this.input.substring(t,this.index),i=e?Yn.parseIntAutoRadix(n):Yn.parseFloat(n);return N(t,i)},t.prototype.scanString=function(){var t=this.index,e=this.peek;this.advance();for(var n,i=this.index,r=this.input;this.peek!=e;)if(this.peek==ds){null==n&&(n=new Gn),n.add(r.substring(i,this.index)),this.advance();var s;if(this.peek==bs){var o=r.substring(this.index+1,this.index+5);try{s=Yn.parseInt(o,16)}catch(a){this.error("Invalid unicode escape [\\u"+o+"]",0)}for(var u=0;5>u;u++)this.advance()}else s=j(this.peek),this.advance();n.add(Xn.fromCharCode(s)),i=this.index}else this.peek==Rr?this.error("Unterminated quote",0):this.advance();var p=r.substring(i,this.index);this.advance();var c=p;return null!=n&&(n.add(p),c=n.toString()),M(t,c)},t.prototype.error=function(t,e){var n=this.index+e;throw new Ns("Lexer Error: "+t+" at column "+n+" in expression ["+this.input+"]")},t}(),Rs=(sr.createFromList(["+","-","*","/","%","^","=","==","!=","===","!==","<",">","<=",">=","&&","||","&","|","!","?","#","?."]),sr.createFromList(["var","let","null","undefined","true","false","if","else"])),Ds=new cr,Vs=/\{\{([\s\S]*?)\}\}/g,Ls=function(t){function e(e,n,i,r){t.call(this,"Parser Error: "+e+" "+i+" ["+n+"] in "+r)}return __extends(e,t),e}(or),Us=function(){function t(t,e){this.strings=t,this.expressions=e}return t}(),Fs=function(){function t(t,e){this.templateBindings=t,this.warnings=e}return t}(),Bs=function(){function t(t){this._lexer=t}return t.prototype.parseAction=function(t,e){this._checkNoInterpolation(t,e);var n=this._lexer.tokenize(this._stripComments(t)),i=new qs(t,e,n,!0).parseChain();return new Pr(i,t,e)},t.prototype.parseBinding=function(t,e){var n=this._parseBindingAst(t,e);return new Pr(n,t,e)},t.prototype.parseSimpleBinding=function(t,e){var n=this._parseBindingAst(t,e);if(!Hs.check(n))throw new Ls("Host binding expression can only contain field access and constants",t,e);return new Pr(n,t,e)},t.prototype._parseBindingAst=function(t,e){var n=this._parseQuote(t,e);if(a(n))return n;this._checkNoInterpolation(t,e);var i=this._lexer.tokenize(this._stripComments(t));return new qs(t,e,i,!1).parseChain()},t.prototype._parseQuote=function(t,e){if(u(t))return null;var n=t.indexOf(":");if(-1==n)return null;var i=t.substring(0,n).trim();if(!D(i))return null;var r=t.substring(n+1);return new ur(i,r,e)},t.prototype.parseTemplateBindings=function(t,e){var n=this._lexer.tokenize(t);return new qs(t,e,n,!1).parseTemplateBindings()},t.prototype.parseInterpolation=function(t,e){var n=this.splitInterpolation(t,e);if(null==n)return null;for(var i=[],r=0;r<n.expressions.length;++r){var s=this._lexer.tokenize(this._stripComments(n.expressions[r])),o=new qs(t,e,s,!1).parseChain();i.push(o)}return new Pr(new Er(n.strings,i),t,e)},t.prototype.splitInterpolation=function(t,e){var n=Xn.split(t,Vs);if(n.length<=1)return null;for(var i=[],r=[],s=0;s<n.length;s++){var o=n[s];if(s%2===0)i.push(o);else{if(!(o.trim().length>0))throw new Ls("Blank expressions are not allowed in interpolated strings",t,"at column "+this._findInterpolationErrorColumn(n,s)+" in",e);r.push(o)}}return new Us(i,r)},t.prototype.wrapLiteralPrimitive=function(t,e){return new Pr(new _r(t),t,e)},t.prototype._stripComments=function(t){var e=this._commentStart(t);return a(e)?t.substring(0,e).trim():t},t.prototype._commentStart=function(t){for(var e=null,n=0;n<t.length-1;n++){var i=Xn.charCodeAt(t,n),r=Xn.charCodeAt(t,n+1);if(i===es&&r==es&&u(e))return n;e===i?e=null:u(e)&&B(i)&&(e=i)}return null},t.prototype._checkNoInterpolation=function(t,e){var n=Xn.split(t,Vs);if(n.length>1)throw new Ls("Got interpolation ({{}}) where expression was expected",t,"at column "+this._findInterpolationErrorColumn(n,1)+" in",e)},t.prototype._findInterpolationErrorColumn=function(t,e){for(var n="",i=0;e>i;i++)n+=i%2===0?t[i]:"{{"+t[i]+"}}";return n.length},t}();Bs.decorators=[{type:e.Injectable}],Bs.ctorParameters=[{type:Mr}];var js,qs=function(){function t(t,e,n,i){this.input=t,this.location=e,this.tokens=n,this.parseAction=i,this.index=0}return t.prototype.peek=function(t){var e=this.index+t;return e<this.tokens.length?this.tokens[e]:Or},Object.defineProperty(t.prototype,"next",{get:function(){return this.peek(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputIndex",{get:function(){return this.index<this.tokens.length?this.next.index:this.input.length},enumerable:!0,configurable:!0}),t.prototype.advance=function(){this.index++},t.prototype.optionalCharacter=function(t){return this.next.isCharacter(t)?(this.advance(),!0):!1},t.prototype.peekKeywordLet=function(){return this.next.isKeywordLet()},t.prototype.peekDeprecatedKeywordVar=function(){return this.next.isKeywordDeprecatedVar()},t.prototype.peekDeprecatedOperatorHash=function(){return this.next.isOperator("#")},t.prototype.expectCharacter=function(t){this.optionalCharacter(t)||this.error("Missing expected "+Xn.fromCharCode(t))},t.prototype.optionalOperator=function(t){return this.next.isOperator(t)?(this.advance(),!0):!1},t.prototype.expectOperator=function(t){this.optionalOperator(t)||this.error("Missing expected operator "+t)},t.prototype.expectIdentifierOrKeyword=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()||this.error("Unexpected token "+t+", expected identifier or keyword"),this.advance(),t.toString()},t.prototype.expectIdentifierOrKeywordOrString=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()||t.isString()||this.error("Unexpected token "+t+", expected identifier, keyword, or string"),this.advance(),t.toString()},t.prototype.parseChain=function(){for(var t=[];this.index<this.tokens.length;){var e=this.parsePipe();if(t.push(e),this.optionalCharacter(is))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(is););else this.index<this.tokens.length&&this.error("Unexpected token '"+this.next+"'")}return 0==t.length?new pr:1==t.length?t[0]:new lr(t)},t.prototype.parsePipe=function(){var t=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var e=this.expectIdentifierOrKeyword(),n=[];this.optionalCharacter(ns);)n.push(this.parseExpression());t=new gr(t,e,n)}while(this.optionalOperator("|"))}return t},t.prototype.parseExpression=function(){return this.parseConditional()},t.prototype.parseConditional=function(){var t=this.inputIndex,e=this.parseLogicalOr();if(this.optionalOperator("?")){var n=this.parsePipe();if(!this.optionalCharacter(ns)){var i=this.inputIndex,r=this.input.substring(t,i);this.error("Conditional expression "+r+" requires all 3 expressions")}var s=this.parsePipe();return new hr(e,n,s)}return e},t.prototype.parseLogicalOr=function(){for(var t=this.parseLogicalAnd();this.optionalOperator("||");)t=new Cr("||",t,this.parseLogicalAnd());return t},t.prototype.parseLogicalAnd=function(){for(var t=this.parseEquality();this.optionalOperator("&&");)t=new Cr("&&",t,this.parseEquality());return t},t.prototype.parseEquality=function(){for(var t=this.parseRelational();;)if(this.optionalOperator("=="))t=new Cr("==",t,this.parseRelational());else if(this.optionalOperator("==="))t=new Cr("===",t,this.parseRelational());else if(this.optionalOperator("!="))t=new Cr("!=",t,this.parseRelational());else{if(!this.optionalOperator("!=="))return t;t=new Cr("!==",t,this.parseRelational())}},t.prototype.parseRelational=function(){for(var t=this.parseAdditive();;)if(this.optionalOperator("<"))t=new Cr("<",t,this.parseAdditive());else if(this.optionalOperator(">"))t=new Cr(">",t,this.parseAdditive());else if(this.optionalOperator("<="))t=new Cr("<=",t,this.parseAdditive());else{if(!this.optionalOperator(">="))return t;t=new Cr(">=",t,this.parseAdditive())}},t.prototype.parseAdditive=function(){for(var t=this.parseMultiplicative();;)if(this.optionalOperator("+"))t=new Cr("+",t,this.parseMultiplicative());else{if(!this.optionalOperator("-"))return t;t=new Cr("-",t,this.parseMultiplicative())}},t.prototype.parseMultiplicative=function(){for(var t=this.parsePrefix();;)if(this.optionalOperator("*"))t=new Cr("*",t,this.parsePrefix());else if(this.optionalOperator("%"))t=new Cr("%",t,this.parsePrefix());else{if(!this.optionalOperator("/"))return t;t=new Cr("/",t,this.parsePrefix())}},t.prototype.parsePrefix=function(){return this.optionalOperator("+")?this.parsePrefix():this.optionalOperator("-")?new Cr("-",new _r(0),this.parsePrefix()):this.optionalOperator("!")?new Sr(this.parsePrefix()):this.parseCallChain()},t.prototype.parseCallChain=function(){for(var t=this.parsePrimary();;)if(this.optionalCharacter(ts))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.optionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.optionalCharacter(fs)){var e=this.parsePipe();if(this.expectCharacter(vs),this.optionalOperator("=")){var n=this.parseConditional();t=new yr(t,e,n)}else t=new mr(t,e)}else{if(!this.optionalCharacter(Xr))return t;var i=this.parseCallArguments();this.expectCharacter(Gr),t=new Tr(t,i)}},t.prototype.parsePrimary=function(){if(this.optionalCharacter(Xr)){var t=this.parsePipe();return this.expectCharacter(Gr),t}if(this.next.isKeywordNull()||this.next.isKeywordUndefined())return this.advance(),new _r(null);if(this.next.isKeywordTrue())return this.advance(),new _r(!0);if(this.next.isKeywordFalse())return this.advance(),new _r(!1);if(this.optionalCharacter(fs)){var e=this.parseExpressionList(vs);return this.expectCharacter(vs),new wr(e)}if(this.next.isCharacter(Ps))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(Ds,!1);if(this.next.isNumber()){var n=this.next.toNumber();return this.advance(),new _r(n)}if(this.next.isString()){var i=this.next.toString();return this.advance(),new _r(i)}throw this.error(this.index>=this.tokens.length?"Unexpected end of expression: "+this.input:"Unexpected token "+this.next),new or("Fell through all cases in parsePrimary")},t.prototype.parseExpressionList=function(t){var e=[];if(!this.next.isCharacter(t))do e.push(this.parsePipe());while(this.optionalCharacter($r));return e},t.prototype.parseLiteralMap=function(){var t=[],e=[];if(this.expectCharacter(Ps),!this.optionalCharacter(Is)){do{var n=this.expectIdentifierOrKeywordOrString();t.push(n),this.expectCharacter(ns),e.push(this.parsePipe())}while(this.optionalCharacter($r));this.expectCharacter(Is)}return new xr(t,e)},t.prototype.parseAccessMemberOrMethodCall=function(t,e){void 0===e&&(e=!1);var n=this.expectIdentifierOrKeyword();if(this.optionalCharacter(Xr)){var i=this.parseCallArguments();return this.expectCharacter(Gr),e?new Ar(t,n,i):new br(t,n,i)}if(!e){if(this.optionalOperator("=")){this.parseAction||this.error("Bindings cannot contain assignments");var r=this.parseConditional();return new dr(t,n,r)}return new fr(t,n)}return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),null):new vr(t,n)},t.prototype.parseCallArguments=function(){if(this.next.isCharacter(Gr))return[];var t=[];do t.push(this.parsePipe());while(this.optionalCharacter($r));return t},t.prototype.parseBlockContent=function(){this.parseAction||this.error("Binding expression cannot contain chained expression");for(var t=[];this.index<this.tokens.length&&!this.next.isCharacter(Is);){var e=this.parseExpression();if(t.push(e),this.optionalCharacter(is))for(;this.optionalCharacter(is););}return 0==t.length?new pr:1==t.length?t[0]:new lr(t)},t.prototype.expectTemplateBindingKey=function(){var t="",e=!1;do t+=this.expectIdentifierOrKeywordOrString(),e=this.optionalOperator("-"),e&&(t+="-");while(e);return t.toString()},t.prototype.parseTemplateBindings=function(){for(var t=[],e=null,n=[];this.index<this.tokens.length;){var i=this.peekKeywordLet();!i&&this.peekDeprecatedKeywordVar()&&(i=!0,n.push('"var" inside of expressions is deprecated. Use "let" instead!')),!i&&this.peekDeprecatedOperatorHash()&&(i=!0,n.push('"#" inside of expressions is deprecated. Use "let" instead!')),i&&this.advance();

var r=this.expectTemplateBindingKey();i||(null==e?e=r:r=e+r[0].toUpperCase()+r.substring(1)),this.optionalCharacter(ns);var s=null,o=null;if(i)s=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.next!==Or&&!this.peekKeywordLet()&&!this.peekDeprecatedKeywordVar()&&!this.peekDeprecatedOperatorHash()){var a=this.inputIndex,u=this.parsePipe(),p=this.input.substring(a,this.inputIndex);o=new Pr(u,p,this.location)}t.push(new kr(r,i,s,o)),this.optionalCharacter(is)||this.optionalCharacter($r)}return new Fs(t,n)},t.prototype.error=function(t,e){void 0===e&&(e=null),u(e)&&(e=this.index);var n=e<this.tokens.length?"at column "+(this.tokens[e].index+1)+" in":"at the end of the expression";throw new Ls(t,this.input,n,this.location)},t}(),Hs=function(){function t(){this.simple=!0}return t.check=function(e){var n=new t;return e.visit(n),n.simple},t.prototype.visitImplicitReceiver=function(t,e){},t.prototype.visitInterpolation=function(t,e){this.simple=!1},t.prototype.visitLiteralPrimitive=function(t,e){},t.prototype.visitPropertyRead=function(t,e){},t.prototype.visitPropertyWrite=function(t,e){this.simple=!1},t.prototype.visitSafePropertyRead=function(t,e){this.simple=!1},t.prototype.visitMethodCall=function(t,e){this.simple=!1},t.prototype.visitSafeMethodCall=function(t,e){this.simple=!1},t.prototype.visitFunctionCall=function(t,e){this.simple=!1},t.prototype.visitLiteralArray=function(t,e){this.visitAll(t.expressions)},t.prototype.visitLiteralMap=function(t,e){this.visitAll(t.values)},t.prototype.visitBinary=function(t,e){this.simple=!1},t.prototype.visitPrefixNot=function(t,e){this.simple=!1},t.prototype.visitConditional=function(t,e){this.simple=!1},t.prototype.visitPipe=function(t,e){this.simple=!1},t.prototype.visitKeyedRead=function(t,e){this.simple=!1},t.prototype.visitKeyedWrite=function(t,e){this.simple=!1},t.prototype.visitAll=function(t){for(var e=ir.createFixedSize(t.length),n=0;n<t.length;++n)e[n]=t[n].visit(this);return e},t.prototype.visitChain=function(t,e){this.simple=!1},t.prototype.visitQuote=function(t,e){this.simple=!1},t}(),Qs=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),Ws=function(){function t(t,e,n,i,r){this.switchValue=t,this.type=e,this.cases=n,this.sourceSpan=i,this.switchValueSourceSpan=r}return t.prototype.visit=function(t,e){return t.visitExpansion(this,e)},t}(),zs=function(){function t(t,e,n,i,r){this.value=t,this.expression=e,this.sourceSpan=n,this.valueSourceSpan=i,this.expSourceSpan=r}return t.prototype.visit=function(t,e){return t.visitExpansionCase(this,e)},t}(),Ks=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitAttr(this,e)},t}(),Xs=function(){function t(t,e,n,i,r,s){this.name=t,this.attrs=e,this.children=n,this.sourceSpan=i,this.startSourceSpan=r,this.endSourceSpan=s}return t.prototype.visit=function(t,e){return t.visitElement(this,e)},t}(),Gs=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitComment(this,e)},t}(),Js=function(){function t(t,e,n,i){this.file=t,this.offset=e,this.line=n,this.col=i}return t.prototype.toString=function(){return this.file.url+"@"+this.line+":"+this.col},t}(),Ys=function(){function t(t,e){this.content=t,this.url=e}return t}(),$s=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.toString=function(){return this.start.file.content.substring(this.start.offset,this.end.offset)},t}();!function(t){t[t.WARNING=0]="WARNING",t[t.FATAL=1]="FATAL"}(js||(js={}));var Zs,to=function(){function t(t,e,n){void 0===n&&(n=js.FATAL),this.span=t,this.msg=e,this.level=n}return t.prototype.toString=function(){var t=this.span.start.file.content,e=this.span.start.offset;e>t.length-1&&(e=t.length-1);for(var n=e,i=0,r=0;100>i&&e>0&&(e--,i++,"\n"!=t[e]||3!=++r););for(i=0,r=0;100>i&&n<t.length-1&&(n++,i++,"\n"!=t[n]||3!=++r););var s=t.substring(e,this.span.start.offset)+"[ERROR ->]"+t.substring(this.span.start.offset,n+1);return this.msg+' ("'+s+'"): '+this.span.start},t}(),eo={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",alefsym:"ℵ",Alpha:"Α",alpha:"α",amp:"&",and:"∧",ang:"∠",apos:"'",Aring:"Å",aring:"å",asymp:"≈",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",bdquo:"„",Beta:"Β",beta:"β",brvbar:"¦",bull:"•",cap:"∩",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",Chi:"Χ",chi:"χ",circ:"ˆ",clubs:"♣",cong:"≅",copy:"©",crarr:"↵",cup:"∪",curren:"¤",dagger:"†",Dagger:"‡",darr:"↓",dArr:"⇓",deg:"°",Delta:"Δ",delta:"δ",diams:"♦",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",empty:"∅",emsp:" ",ensp:" ",Epsilon:"Ε",epsilon:"ε",equiv:"≡",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",exist:"∃",fnof:"ƒ",forall:"∀",frac12:"½",frac14:"¼",frac34:"¾",frasl:"⁄",Gamma:"Γ",gamma:"γ",ge:"≥",gt:">",harr:"↔",hArr:"⇔",hearts:"♥",hellip:"…",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",image:"ℑ",infin:"∞","int":"∫",Iota:"Ι",iota:"ι",iquest:"¿",isin:"∈",Iuml:"Ï",iuml:"ï",Kappa:"Κ",kappa:"κ",Lambda:"Λ",lambda:"λ",lang:"⟨",laquo:"«",larr:"←",lArr:"⇐",lceil:"⌈",ldquo:"“",le:"≤",lfloor:"⌊",lowast:"∗",loz:"◊",lrm:"‎",lsaquo:"‹",lsquo:"‘",lt:"<",macr:"¯",mdash:"—",micro:"µ",middot:"·",minus:"−",Mu:"Μ",mu:"μ",nabla:"∇",nbsp:" ",ndash:"–",ne:"≠",ni:"∋",not:"¬",notin:"∉",nsub:"⊄",Ntilde:"Ñ",ntilde:"ñ",Nu:"Ν",nu:"ν",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",OElig:"Œ",oelig:"œ",Ograve:"Ò",ograve:"ò",oline:"‾",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",oplus:"⊕",or:"∨",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",otimes:"⊗",Ouml:"Ö",ouml:"ö",para:"¶",permil:"‰",perp:"⊥",Phi:"Φ",phi:"φ",Pi:"Π",pi:"π",piv:"ϖ",plusmn:"±",pound:"£",prime:"′",Prime:"″",prod:"∏",prop:"∝",Psi:"Ψ",psi:"ψ",quot:'"',radic:"√",rang:"⟩",raquo:"»",rarr:"→",rArr:"⇒",rceil:"⌉",rdquo:"”",real:"ℜ",reg:"®",rfloor:"⌋",Rho:"Ρ",rho:"ρ",rlm:"‏",rsaquo:"›",rsquo:"’",sbquo:"‚",Scaron:"Š",scaron:"š",sdot:"⋅",sect:"§",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sim:"∼",spades:"♠",sub:"⊂",sube:"⊆",sum:"∑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supe:"⊇",szlig:"ß",Tau:"Τ",tau:"τ",there4:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thinsp:" ",THORN:"Þ",thorn:"þ",tilde:"˜",times:"×",trade:"™",Uacute:"Ú",uacute:"ú",uarr:"↑",uArr:"⇑",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",Uuml:"Ü",uuml:"ü",weierp:"℘",Xi:"Ξ",xi:"ξ",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ",Yuml:"Ÿ",Zeta:"Ζ",zeta:"ζ",zwj:"‍",zwnj:"‌"};!function(t){t[t.RAW_TEXT=0]="RAW_TEXT",t[t.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",t[t.PARSABLE_DATA=2]="PARSABLE_DATA"}(Zs||(Zs={}));var no,io=function(){function t(t){var e=this,n=void 0===t?{}:t,i=n.closedByChildren,r=n.requiredParents,s=n.implicitNamespacePrefix,o=n.contentType,u=n.closedByParent,p=n.isVoid,c=n.ignoreFirstLf;this.closedByChildren={},this.closedByParent=!1,a(i)&&i.length>0&&i.forEach(function(t){return e.closedByChildren[t]=!0}),this.isVoid=w(p),this.closedByParent=w(u)||this.isVoid,a(r)&&r.length>0&&(this.requiredParents={},this.parentToAdd=r[0],r.forEach(function(t){return e.requiredParents[t]=!0})),this.implicitNamespacePrefix=s,this.contentType=a(o)?o:Zs.PARSABLE_DATA,this.ignoreFirstLf=w(c)}return t.prototype.requireExtraParent=function(t){if(u(this.requiredParents))return!1;if(u(t))return!0;var e=t.toLowerCase();return 1!=this.requiredParents[e]&&"template"!=e},t.prototype.isClosedByChild=function(t){return this.isVoid||w(this.closedByChildren[t.toLowerCase()])},t}(),ro={base:new io({isVoid:!0}),meta:new io({isVoid:!0}),area:new io({isVoid:!0}),embed:new io({isVoid:!0}),link:new io({isVoid:!0}),img:new io({isVoid:!0}),input:new io({isVoid:!0}),param:new io({isVoid:!0}),hr:new io({isVoid:!0}),br:new io({isVoid:!0}),source:new io({isVoid:!0}),track:new io({isVoid:!0}),wbr:new io({isVoid:!0}),p:new io({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new io({closedByChildren:["tbody","tfoot"]}),tbody:new io({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new io({closedByChildren:["tbody"],closedByParent:!0}),tr:new io({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new io({closedByChildren:["td","th"],closedByParent:!0}),th:new io({closedByChildren:["td","th"],closedByParent:!0}),col:new io({requiredParents:["colgroup"],isVoid:!0}),svg:new io({implicitNamespacePrefix:"svg"}),math:new io({implicitNamespacePrefix:"math"}),li:new io({closedByChildren:["li"],closedByParent:!0}),dt:new io({closedByChildren:["dt","dd"]}),dd:new io({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new io({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new io({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new io({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new io({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new io({closedByChildren:["optgroup"],closedByParent:!0}),option:new io({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new io({ignoreFirstLf:!0}),listing:new io({ignoreFirstLf:!0}),style:new io({contentType:Zs.RAW_TEXT}),script:new io({contentType:Zs.RAW_TEXT}),title:new io({contentType:Zs.ESCAPABLE_RAW_TEXT}),textarea:new io({contentType:Zs.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},so=new io,oo=/^@([^:]+):(.+)/g;!function(t){t[t.TAG_OPEN_START=0]="TAG_OPEN_START",t[t.TAG_OPEN_END=1]="TAG_OPEN_END",t[t.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",t[t.TAG_CLOSE=3]="TAG_CLOSE",t[t.TEXT=4]="TEXT",t[t.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",t[t.RAW_TEXT=6]="RAW_TEXT",t[t.COMMENT_START=7]="COMMENT_START",t[t.COMMENT_END=8]="COMMENT_END",t[t.CDATA_START=9]="CDATA_START",t[t.CDATA_END=10]="CDATA_END",t[t.ATTR_NAME=11]="ATTR_NAME",t[t.ATTR_VALUE=12]="ATTR_VALUE",t[t.DOC_TYPE=13]="DOC_TYPE",t[t.EXPANSION_FORM_START=14]="EXPANSION_FORM_START",t[t.EXPANSION_CASE_VALUE=15]="EXPANSION_CASE_VALUE",t[t.EXPANSION_CASE_EXP_START=16]="EXPANSION_CASE_EXP_START",t[t.EXPANSION_CASE_EXP_END=17]="EXPANSION_CASE_EXP_END",t[t.EXPANSION_FORM_END=18]="EXPANSION_FORM_END",t[t.EOF=19]="EOF"}(no||(no={}));var ao=function(){function t(t,e,n){this.type=t,this.parts=e,this.sourceSpan=n}return t}(),uo=function(t){function e(e,n,i){t.call(this,i,e),this.tokenType=n}return __extends(e,t),e}(to),po=function(){function t(t,e){this.tokens=t,this.errors=e}return t}(),co=0,lo=9,ho=10,fo=13,vo=32,mo=33,yo=34,go=35,_o=38,wo=39,xo=45,Eo=47,Co=48,So=59,bo=57,Ao=58,To=60,Po=61,ko=62,Io=91,Mo=93,No=123,Oo=125,Ro=44,Do=65,Vo=70,Lo=88,Uo=90,Fo=97,Bo=102,jo=122,qo=120,Ho=160,Qo=/\r\n?/g,Wo=function(){function t(t){this.error=t}return t}(),zo=function(){function t(t,e){this.file=t,this.tokenizeExpansionForms=e,this.peek=-1,this.nextPeek=-1,this.index=-1,this.line=0,this.column=-1,this.expansionCaseStack=[],this.tokens=[],this.errors=[],this.input=t.content,this.length=t.content.length,this._advance()}return t.prototype._processCarriageReturns=function(t){return Xn.replaceAll(t,Qo,"\n")},t.prototype.tokenize=function(){for(;this.peek!==co;){var t=this._getLocation();try{this._attemptCharCode(To)?this._attemptCharCode(mo)?this._attemptCharCode(Io)?this._consumeCdata(t):this._attemptCharCode(xo)?this._consumeComment(t):this._consumeDocType(t):this._attemptCharCode(Eo)?this._consumeTagClose(t):this._consumeTagOpen(t):nt(this.peek,this.nextPeek)&&this.tokenizeExpansionForms?this._consumeExpansionFormStart():this.peek===Po&&this.tokenizeExpansionForms?this._consumeExpansionCaseStart():this.peek===Oo&&this.isInExpansionCase()&&this.tokenizeExpansionForms?this._consumeExpansionCaseEnd():this.peek===Oo&&this.isInExpansionForm()&&this.tokenizeExpansionForms?this._consumeExpansionFormEnd():this._consumeText()}catch(e){if(!(e instanceof Wo))throw e;this.errors.push(e.error)}}return this._beginToken(no.EOF),this._endToken([]),new po(at(this.tokens),this.errors)},t.prototype._getLocation=function(){return new Js(this.file,this.index,this.line,this.column)},t.prototype._getSpan=function(t,e){return u(t)&&(t=this._getLocation()),u(e)&&(e=this._getLocation()),new $s(t,e)},t.prototype._beginToken=function(t,e){void 0===e&&(e=null),u(e)&&(e=this._getLocation()),this.currentTokenStart=e,this.currentTokenType=t},t.prototype._endToken=function(t,e){void 0===e&&(e=null),u(e)&&(e=this._getLocation());var n=new ao(this.currentTokenType,t,new $s(this.currentTokenStart,e));return this.tokens.push(n),this.currentTokenStart=null,this.currentTokenType=null,n},t.prototype._createError=function(t,e){var n=new uo(t,this.currentTokenType,e);return this.currentTokenStart=null,this.currentTokenType=null,new Wo(n)},t.prototype._advance=function(){if(this.index>=this.length)throw this._createError(X(co),this._getSpan());this.peek===ho?(this.line++,this.column=0):this.peek!==ho&&this.peek!==fo&&this.column++,this.index++,this.peek=this.index>=this.length?co:Xn.charCodeAt(this.input,this.index),this.nextPeek=this.index+1>=this.length?co:Xn.charCodeAt(this.input,this.index+1)},t.prototype._attemptCharCode=function(t){return this.peek===t?(this._advance(),!0):!1},t.prototype._attemptCharCodeCaseInsensitive=function(t){return st(this.peek,t)?(this._advance(),!0):!1},t.prototype._requireCharCode=function(t){var e=this._getLocation();if(!this._attemptCharCode(t))throw this._createError(X(this.peek),this._getSpan(e,e))},t.prototype._attemptStr=function(t){for(var e=0;e<t.length;e++)if(!this._attemptCharCode(Xn.charCodeAt(t,e)))return!1;return!0},t.prototype._attemptStrCaseInsensitive=function(t){for(var e=0;e<t.length;e++)if(!this._attemptCharCodeCaseInsensitive(Xn.charCodeAt(t,e)))return!1;return!0},t.prototype._requireStr=function(t){var e=this._getLocation();if(!this._attemptStr(t))throw this._createError(X(this.peek),this._getSpan(e))},t.prototype._attemptCharCodeUntilFn=function(t){for(;!t(this.peek);)this._advance()},t.prototype._requireCharCodeUntilFn=function(t,e){var n=this._getLocation();if(this._attemptCharCodeUntilFn(t),this.index-n.offset<e)throw this._createError(X(this.peek),this._getSpan(n,n))},t.prototype._attemptUntilChar=function(t){for(;this.peek!==t;)this._advance()},t.prototype._readChar=function(t){if(t&&this.peek===_o)return this._decodeEntity();var e=this.index;return this._advance(),this.input[e]},t.prototype._decodeEntity=function(){var t=this._getLocation();if(this._advance(),!this._attemptCharCode(go)){var e=this._savePosition();if(this._attemptCharCodeUntilFn(et),this.peek!=So)return this._restorePosition(e),"&";this._advance();var n=this.input.substring(t.offset+1,this.index-1),i=eo[n];if(u(i))throw this._createError(G(n),this._getSpan(t));return i}var r=this._attemptCharCode(qo)||this._attemptCharCode(Lo),s=this._getLocation().offset;if(this._attemptCharCodeUntilFn(tt),this.peek!=So)throw this._createError(X(this.peek),this._getSpan());this._advance();var o=this.input.substring(s,this.index-1);try{var a=Yn.parseInt(o,r?16:10);return Xn.fromCharCode(a)}catch(p){var c=this.input.substring(t.offset+1,this.index-1);throw this._createError(G(c),this._getSpan(t))}},t.prototype._consumeRawText=function(t,e,n){var i,r=this._getLocation();this._beginToken(t?no.ESCAPABLE_RAW_TEXT:no.RAW_TEXT,r);for(var s=[];;){if(i=this._getLocation(),this._attemptCharCode(e)&&n())break;for(this.index>i.offset&&s.push(this.input.substring(i.offset,this.index));this.peek!==e;)s.push(this._readChar(t))}return this._endToken([this._processCarriageReturns(s.join(""))],i)},t.prototype._consumeComment=function(t){var e=this;this._beginToken(no.COMMENT_START,t),this._requireCharCode(xo),this._endToken([]);var n=this._consumeRawText(!1,xo,function(){return e._attemptStr("->")});this._beginToken(no.COMMENT_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeCdata=function(t){var e=this;this._beginToken(no.CDATA_START,t),this._requireStr("CDATA["),this._endToken([]);var n=this._consumeRawText(!1,Mo,function(){return e._attemptStr("]>")});this._beginToken(no.CDATA_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeDocType=function(t){this._beginToken(no.DOC_TYPE,t),this._attemptUntilChar(ko),this._advance(),this._endToken([this.input.substring(t.offset+2,this.index-1)])},t.prototype._consumePrefixAndName=function(){for(var t=this.index,e=null;this.peek!==Ao&&!Z(this.peek);)this._advance();var n;this.peek===Ao?(this._advance(),e=this.input.substring(t,this.index-1),n=this.index):n=t,this._requireCharCodeUntilFn($,this.index===n?1:0);var i=this.input.substring(n,this.index);return[e,i]},t.prototype._consumeTagOpen=function(t){var e,n=this._savePosition();try{if(!it(this.peek))throw this._createError(X(this.peek),this._getSpan());var i=this.index;for(this._consumeTagOpenStart(t),e=this.input.substring(i,this.index).toLowerCase(),this._attemptCharCodeUntilFn(J);this.peek!==Eo&&this.peek!==ko;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(J),this._attemptCharCode(Po)&&(this._attemptCharCodeUntilFn(J),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(J);this._consumeTagOpenEnd()}catch(r){if(r instanceof Wo)return this._restorePosition(n),this._beginToken(no.TEXT,t),void this._endToken(["<"]);throw r}var s=H(e).contentType;s===Zs.RAW_TEXT?this._consumeRawTextWithTagClose(e,!1):s===Zs.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(e,!0)},t.prototype._consumeRawTextWithTagClose=function(t,e){var n=this,i=this._consumeRawText(e,To,function(){return n._attemptCharCode(Eo)?(n._attemptCharCodeUntilFn(J),n._attemptStrCaseInsensitive(t)?(n._attemptCharCodeUntilFn(J),n._attemptCharCode(ko)?!0:!1):!1):!1});this._beginToken(no.TAG_CLOSE,i.sourceSpan.end),this._endToken([null,t])},t.prototype._consumeTagOpenStart=function(t){this._beginToken(no.TAG_OPEN_START,t);var e=this._consumePrefixAndName();this._endToken(e)},t.prototype._consumeAttributeName=function(){this._beginToken(no.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)},t.prototype._consumeAttributeValue=function(){this._beginToken(no.ATTR_VALUE);var t;if(this.peek===wo||this.peek===yo){var e=this.peek;this._advance();for(var n=[];this.peek!==e;)n.push(this._readChar(!0));t=n.join(""),this._advance()}else{var i=this.index;this._requireCharCodeUntilFn($,1),t=this.input.substring(i,this.index)}this._endToken([this._processCarriageReturns(t)])},t.prototype._consumeTagOpenEnd=function(){var t=this._attemptCharCode(Eo)?no.TAG_OPEN_END_VOID:no.TAG_OPEN_END;this._beginToken(t),this._requireCharCode(ko),this._endToken([])},t.prototype._consumeTagClose=function(t){this._beginToken(no.TAG_CLOSE,t),this._attemptCharCodeUntilFn(J);var e;e=this._consumePrefixAndName(),this._attemptCharCodeUntilFn(J),this._requireCharCode(ko),this._endToken(e)},t.prototype._consumeExpansionFormStart=function(){this._beginToken(no.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(No),this._endToken([]),this._beginToken(no.RAW_TEXT,this._getLocation());var t=this._readUntil(Ro);this._endToken([t],this._getLocation()),this._requireCharCode(Ro),this._attemptCharCodeUntilFn(J),this._beginToken(no.RAW_TEXT,this._getLocation());var e=this._readUntil(Ro);this._endToken([e],this._getLocation()),this._requireCharCode(Ro),this._attemptCharCodeUntilFn(J),this.expansionCaseStack.push(no.EXPANSION_FORM_START)},t.prototype._consumeExpansionCaseStart=function(){this._requireCharCode(Po),this._beginToken(no.EXPANSION_CASE_VALUE,this._getLocation());var t=this._readUntil(No).trim();this._endToken([t],this._getLocation()),this._attemptCharCodeUntilFn(J),this._beginToken(no.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(No),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(J),this.expansionCaseStack.push(no.EXPANSION_CASE_EXP_START)},t.prototype._consumeExpansionCaseEnd=function(){this._beginToken(no.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(Oo),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(J),this.expansionCaseStack.pop()},t.prototype._consumeExpansionFormEnd=function(){this._beginToken(no.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(Oo),this._endToken([]),this.expansionCaseStack.pop()},t.prototype._consumeText=function(){var t=this._getLocation();this._beginToken(no.TEXT,t);var e=[],n=!1;for(this.peek===No&&this.nextPeek===No?(e.push(this._readChar(!0)),e.push(this._readChar(!0)),n=!0):e.push(this._readChar(!0));!this.isTextEnd(n);)this.peek===No&&this.nextPeek===No?(e.push(this._readChar(!0)),e.push(this._readChar(!0)),n=!0):this.peek===Oo&&this.nextPeek===Oo&&n?(e.push(this._readChar(!0)),e.push(this._readChar(!0)),n=!1):e.push(this._readChar(!0));this._endToken([this._processCarriageReturns(e.join(""))])},t.prototype.isTextEnd=function(t){if(this.peek===To||this.peek===co)return!0;if(this.tokenizeExpansionForms){if(nt(this.peek,this.nextPeek))return!0;if(this.peek===Oo&&!t&&(this.isInExpansionCase()||this.isInExpansionForm()))return!0}return!1},t.prototype._savePosition=function(){return[this.peek,this.index,this.column,this.line,this.tokens.length]},t.prototype._readUntil=function(t){var e=this.index;return this._attemptUntilChar(t),this.input.substring(e,this.index)},t.prototype._restorePosition=function(t){this.peek=t[0],this.index=t[1],this.column=t[2],this.line=t[3];var e=t[4];e<this.tokens.length&&(this.tokens=ir.slice(this.tokens,0,e))},t.prototype.isInExpansionCase=function(){return this.expansionCaseStack.length>0&&this.expansionCaseStack[this.expansionCaseStack.length-1]===no.EXPANSION_CASE_EXP_START},t.prototype.isInExpansionForm=function(){return this.expansionCaseStack.length>0&&this.expansionCaseStack[this.expansionCaseStack.length-1]===no.EXPANSION_FORM_START},t}(),Ko=function(t){function e(e,n,i){t.call(this,n,i),this.elementName=e}return __extends(e,t),e.create=function(t,n,i){return new e(t,n,i)},e}(to),Xo=function(){function t(t,e){this.rootNodes=t,this.errors=e}return t}(),Go=function(){function t(){}return t.prototype.parse=function(t,e,n){void 0===n&&(n=!1);var i=K(t,e,n),r=new Yo(i.tokens).build();return new Xo(r.rootNodes,i.errors.concat(r.errors))},t}();Go.decorators=[{type:e.Injectable}];var Jo,Yo=function(){function t(t){this.tokens=t,this.index=-1,this.rootNodes=[],this.errors=[],this.elementStack=[],this._advance()}return t.prototype.build=function(){for(;this.peek.type!==no.EOF;)this.peek.type===no.TAG_OPEN_START?this._consumeStartTag(this._advance()):this.peek.type===no.TAG_CLOSE?this._consumeEndTag(this._advance()):this.peek.type===no.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this.peek.type===no.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this.peek.type===no.TEXT||this.peek.type===no.RAW_TEXT||this.peek.type===no.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this.peek.type===no.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new Xo(this.rootNodes,this.errors)},t.prototype._advance=function(){var t=this.peek;return this.index<this.tokens.length-1&&this.index++,this.peek=this.tokens[this.index],t},t.prototype._advanceIf=function(t){return this.peek.type===t?this._advance():null},t.prototype._consumeCdata=function(t){this._consumeText(this._advance()),this._advanceIf(no.CDATA_END)},t.prototype._consumeComment=function(t){var e=this._advanceIf(no.RAW_TEXT);this._advanceIf(no.COMMENT_END);var n=a(e)?e.parts[0].trim():null;this._addToParent(new Gs(n,t.sourceSpan))},t.prototype._consumeExpansion=function(t){for(var e=this._advance(),n=this._advance(),i=[];this.peek.type===no.EXPANSION_CASE_VALUE;){var r=this._parseExpansionCase();if(u(r))return;i.push(r)}if(this.peek.type!==no.EXPANSION_FORM_END)return void this.errors.push(Ko.create(null,this.peek.sourceSpan,"Invalid expansion form. Missing '}'."));this._advance();var s=new $s(t.sourceSpan.start,this.peek.sourceSpan.end);this._addToParent(new Ws(e.parts[0],n.parts[0],i,s,e.sourceSpan))},t.prototype._parseExpansionCase=function(){var e=this._advance();if(this.peek.type!==no.EXPANSION_CASE_EXP_START)return this.errors.push(Ko.create(null,this.peek.sourceSpan,"Invalid expansion form. Missing '{'.,")),null;var n=this._advance(),i=this._collectExpansionExpTokens(n);if(u(i))return null;var r=this._advance();i.push(new ao(no.EOF,[],r.sourceSpan));var s=new t(i).build();if(s.errors.length>0)return this.errors=this.errors.concat(s.errors),null;var o=new $s(e.sourceSpan.start,r.sourceSpan.end),a=new $s(n.sourceSpan.start,r.sourceSpan.end);return new zs(e.parts[0],s.rootNodes,o,e.sourceSpan,a)},t.prototype._collectExpansionExpTokens=function(t){for(var e=[],n=[no.EXPANSION_CASE_EXP_START];;){if((this.peek.type===no.EXPANSION_FORM_START||this.peek.type===no.EXPANSION_CASE_EXP_START)&&n.push(this.peek.type),this.peek.type===no.EXPANSION_CASE_EXP_END){if(!pt(n,no.EXPANSION_CASE_EXP_START))return this.errors.push(Ko.create(null,t.sourceSpan,"Invalid expansion form. Missing '}'.")),null;if(n.pop(),0==n.length)return e}if(this.peek.type===no.EXPANSION_FORM_END){if(!pt(n,no.EXPANSION_FORM_START))return this.errors.push(Ko.create(null,t.sourceSpan,"Invalid expansion form. Missing '}'.")),null;n.pop()}if(this.peek.type===no.EOF)return this.errors.push(Ko.create(null,t.sourceSpan,"Invalid expansion form. Missing '}'.")),null;e.push(this._advance())}},t.prototype._consumeText=function(t){var e=t.parts[0];if(e.length>0&&"\n"==e[0]){var n=this._getParentElement();a(n)&&0==n.children.length&&H(n.name).ignoreFirstLf&&(e=e.substring(1))}e.length>0&&this._addToParent(new Qs(e,t.sourceSpan))},t.prototype._closeVoidElement=function(){if(this.elementStack.length>0){var t=ir.last(this.elementStack);H(t.name).isVoid&&this.elementStack.pop()}},t.prototype._consumeStartTag=function(t){for(var e=t.parts[0],n=t.parts[1],i=[];this.peek.type===no.ATTR_NAME;)i.push(this._consumeAttr(this._advance()));var r=ut(e,n,this._getParentElement()),s=!1;this.peek.type===no.TAG_OPEN_END_VOID?(this._advance(),s=!0,null!=W(r)||H(r).isVoid||this.errors.push(Ko.create(r,t.sourceSpan,'Only void and foreign elements can be self closed "'+t.parts[1]+'"'))):this.peek.type===no.TAG_OPEN_END&&(this._advance(),s=!1);var o=this.peek.sourceSpan.start,a=new $s(t.sourceSpan.start,o),u=new Xs(r,i,[],a,a,null);this._pushElement(u),s&&(this._popElement(r),u.endSourceSpan=a)},t.prototype._pushElement=function(t){if(this.elementStack.length>0){var e=ir.last(this.elementStack);H(e.name).isClosedByChild(t.name)&&this.elementStack.pop()}var n=H(t.name),e=this._getParentElement();if(n.requireExtraParent(a(e)?e.name:null)){var i=new Xs(n.parentToAdd,[],[t],t.sourceSpan,t.startSourceSpan,t.endSourceSpan);this._addToParent(i),this.elementStack.push(i),this.elementStack.push(t)}else this._addToParent(t),this.elementStack.push(t)},t.prototype._consumeEndTag=function(t){var e=ut(t.parts[0],t.parts[1],this._getParentElement());this._getParentElement().endSourceSpan=t.sourceSpan,H(e).isVoid?this.errors.push(Ko.create(e,t.sourceSpan,'Void elements do not have end tags "'+t.parts[1]+'"')):this._popElement(e)||this.errors.push(Ko.create(e,t.sourceSpan,'Unexpected closing tag "'+t.parts[1]+'"'))},t.prototype._popElement=function(t){for(var e=this.elementStack.length-1;e>=0;e--){var n=this.elementStack[e];if(n.name==t)return ir.splice(this.elementStack,e,this.elementStack.length-e),!0;if(!H(n.name).closedByParent)return!1}return!1},t.prototype._consumeAttr=function(t){var e=z(t.parts[0],t.parts[1]),n=t.sourceSpan.end,i="";if(this.peek.type===no.ATTR_VALUE){var r=this._advance();i=r.parts[0],n=r.sourceSpan.end}return new Ks(e,i,new $s(t.sourceSpan.start,n))},t.prototype._getParentElement=function(){return this.elementStack.length>0?ir.last(this.elementStack):null},t.prototype._addToParent=function(t){var e=this._getParentElement();a(e)?e.children.push(t):this.rootNodes.push(t)},t}(),$o="",Zo=$n.create("(\\:not\\()|([-\\w]+)|(?:\\.([-\\w]+))|(?:\\[([-\\w*]+)(?:=([^\\]]*))?\\])|(\\))|(\\s*,\\s*)"),ta=function(){function t(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return t.parse=function(e){for(var n,i=[],r=function(t,e){e.notSelectors.length>0&&u(e.element)&&ir.isEmpty(e.classNames)&&ir.isEmpty(e.attrs)&&(e.element="*"),t.push(e)},s=new t,o=$n.matcher(Zo,e),p=s,c=!1;a(n=Zn.next(o));){if(a(n[1])){if(c)throw new or("Nesting :not is not allowed in a selector");c=!0,p=new t,s.notSelectors.push(p)}if(a(n[2])&&p.setElement(n[2]),a(n[3])&&p.addClassName(n[3]),a(n[4])&&p.addAttribute(n[4],n[5]),a(n[6])&&(c=!1,p=s),a(n[7])){if(c)throw new or("Multiple selectors in :not are not supported");r(i,s),s=p=new t}}return r(i,s),i},t.prototype.isElementSelector=function(){return a(this.element)&&ir.isEmpty(this.classNames)&&ir.isEmpty(this.attrs)&&0===this.notSelectors.length},t.prototype.setElement=function(t){void 0===t&&(t=null),this.element=t},t.prototype.getMatchingElementTemplate=function(){for(var t=a(this.element)?this.element:"div",e=this.classNames.length>0?' class="'+this.classNames.join(" ")+'"':"",n="",i=0;i<this.attrs.length;i+=2){var r=this.attrs[i],s=""!==this.attrs[i+1]?'="'+this.attrs[i+1]+'"':"";n+=" "+r+s}return"<"+t+e+n+"></"+t+">"},t.prototype.addAttribute=function(t,e){void 0===e&&(e=$o),this.attrs.push(t),e=a(e)?e.toLowerCase():$o,this.attrs.push(e)},t.prototype.addClassName=function(t){this.classNames.push(t.toLowerCase())},t.prototype.toString=function(){var t="";if(a(this.element)&&(t+=this.element),a(this.classNames))for(var e=0;e<this.classNames.length;e++)t+="."+this.classNames[e];if(a(this.attrs))for(var e=0;e<this.attrs.length;){var n=this.attrs[e++],i=this.attrs[e++];t+="["+n,i.length>0&&(t+="="+i),t+="]"}return this.notSelectors.forEach(function(e){return t+=":not("+e+")"}),t},t}(),ea=function(){function t(){this._elementMap=new tr,this._elementPartialMap=new tr,this._classMap=new tr,this._classPartialMap=new tr,this._attrValueMap=new tr,this._attrValuePartialMap=new tr,this._listContexts=[]}return t.createNotMatcher=function(e){var n=new t;return n.addSelectables(e,null),n},t.prototype.addSelectables=function(t,e){var n=null;t.length>1&&(n=new na(t),this._listContexts.push(n));for(var i=0;i<t.length;i++)this._addSelectable(t[i],e,n)},t.prototype._addSelectable=function(t,e,n){var i=this,r=t.element,s=t.classNames,o=t.attrs,p=new ia(t,e,n);if(a(r)){var c=0===o.length&&0===s.length;c?this._addTerminal(i._elementMap,r,p):i=this._addPartial(i._elementPartialMap,r)}if(a(s))for(var l=0;l<s.length;l++){var c=0===o.length&&l===s.length-1,h=s[l];c?this._addTerminal(i._classMap,h,p):i=this._addPartial(i._classPartialMap,h)}if(a(o))for(var l=0;l<o.length;){var c=l===o.length-2,f=o[l++],d=o[l++];if(c){var v=i._attrValueMap,m=v.get(f);u(m)&&(m=new tr,v.set(f,m)),this._addTerminal(m,d,p)}else{var y=i._attrValuePartialMap,g=y.get(f);u(g)&&(g=new tr,y.set(f,g)),i=this._addPartial(g,d)}}},t.prototype._addTerminal=function(t,e,n){var i=t.get(e);u(i)&&(i=[],t.set(e,i)),i.push(n)},t.prototype._addPartial=function(e,n){var i=e.get(n);return u(i)&&(i=new t,e.set(n,i)),i},t.prototype.match=function(t,e){for(var n=!1,i=t.element,r=t.classNames,s=t.attrs,o=0;o<this._listContexts.length;o++)this._listContexts[o].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,i,t,e)||n,n=this._matchPartial(this._elementPartialMap,i,t,e)||n,a(r))for(var u=0;u<r.length;u++){var p=r[u];n=this._matchTerminal(this._classMap,p,t,e)||n,n=this._matchPartial(this._classPartialMap,p,t,e)||n}if(a(s))for(var u=0;u<s.length;){var c=s[u++],l=s[u++],h=this._attrValueMap.get(c);Xn.equals(l,$o)||(n=this._matchTerminal(h,$o,t,e)||n),n=this._matchTerminal(h,l,t,e)||n;var f=this._attrValuePartialMap.get(c);Xn.equals(l,$o)||(n=this._matchPartial(f,$o,t,e)||n),n=this._matchPartial(f,l,t,e)||n}return n},t.prototype._matchTerminal=function(t,e,n,i){if(u(t)||u(e))return!1;var r=t.get(e),s=t.get("*");if(a(s)&&(r=r.concat(s)),
u(r))return!1;for(var o,p=!1,c=0;c<r.length;c++)o=r[c],p=o.finalize(n,i)||p;return p},t.prototype._matchPartial=function(t,e,n,i){if(u(t)||u(e))return!1;var r=t.get(e);return u(r)?!1:r.match(n,i)},t}(),na=function(){function t(t){this.selectors=t,this.alreadyMatched=!1}return t}(),ia=function(){function t(t,e,n){this.selector=t,this.cbContext=e,this.listContext=n,this.notSelectors=t.notSelectors}return t.prototype.finalize=function(t,e){var n=!0;if(this.notSelectors.length>0&&(u(this.listContext)||!this.listContext.alreadyMatched)){var i=ea.createNotMatcher(this.notSelectors);n=!i.match(t,null)}return n&&a(e)&&(u(this.listContext)||!this.listContext.alreadyMatched)&&(a(this.listContext)&&(this.listContext.alreadyMatched=!0),e(this.selector,this.cbContext)),n},t}(),ra="select",sa="ng-content",oa="link",aa="rel",ua="href",pa="stylesheet",ca="style",la="script",ha="ngNonBindable",fa="ngProjectAs";!function(t){t[t.NG_CONTENT=0]="NG_CONTENT",t[t.STYLE=1]="STYLE",t[t.STYLESHEET=2]="STYLESHEET",t[t.SCRIPT=3]="SCRIPT",t[t.OTHER=4]="OTHER"}(Jo||(Jo={}));var da=function(){function t(t,e,n,i,r){this.type=t,this.selectAttr=e,this.hrefAttr=n,this.nonBindable=i,this.projectAs=r}return t}(),va=function(){function t(t,e){this.style=t,this.styleUrls=e}return t}(),ma=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,ya=/^([a-zA-Z\-\+\.]+):/g,ga=Hn?".dart":"",_a=/([A-Z])/g,wa=function(){function t(){}return t.prototype.visitArray=function(t,e){var n=this;return t.map(function(t){return yt(t,n,e)})},t.prototype.visitStringMap=function(t,e){var n=this,i={};return nr.forEach(t,function(t,r){i[r]=yt(t,n,e)}),i},t.prototype.visitPrimitive=function(t,e){return t},t.prototype.visitOther=function(t,e){return t},t}(),xa="asset:",Ea={provide:e.PACKAGE_ROOT_URL,useValue:"/"},Ca=function(){function t(t){void 0===t&&(t=null),this._packagePrefix=t}return t.prototype.resolve=function(t,e){var n=e;a(t)&&t.length>0&&(n=bt(t,n));var i=Et(n),r=this._packagePrefix;if(a(r)&&a(i)&&"package"==i[Sa.Scheme]){var s=i[Sa.Path];if(this._packagePrefix!==xa)return r=Xn.stripRight(r,"/"),s=Xn.stripLeft(s,"/"),r+"/"+s;var o=s.split(/\//);n="asset:"+o[0]+"/lib/"+o.slice(1).join("/")}return n},t}();Ca.decorators=[{type:e.Injectable}],Ca.ctorParameters=[{type:void 0,decorators:[{type:e.Inject,args:[e.PACKAGE_ROOT_URL]}]}];var Sa,ba=$n.create("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(t){t[t.Scheme=1]="Scheme",t[t.UserInfo=2]="UserInfo",t[t.Domain=3]="Domain",t[t.Port=4]="Port",t[t.Path=5]="Path",t[t.QueryData=6]="QueryData",t[t.Fragment=7]="Fragment"}(Sa||(Sa={}));var Aa=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))$/g,Ta=function(){function t(){}return Object.defineProperty(t.prototype,"identifier",{get:function(){return A()},enumerable:!0,configurable:!0}),t}(),Pa=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return A()},enumerable:!0,configurable:!0}),e}(Ta),ka=function(){function t(t){var e=void 0===t?{}:t,n=e.runtime,i=e.name,r=e.moduleUrl,s=e.prefix,o=e.value;this.runtime=n,this.name=i,this.prefix=s,this.moduleUrl=r,this.value=o}return t.fromJson=function(e){var n=d(e.value)?Pt(e.value,At):It(e.value,At);return new t({name:e.name,prefix:e.prefix,moduleUrl:e.moduleUrl,value:n})},t.prototype.toJson=function(){var t=d(this.value)?kt(this.value):Mt(this.value);return{"class":"Identifier",name:this.name,moduleUrl:this.moduleUrl,prefix:this.prefix,value:t}},Object.defineProperty(t.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),t}(),Ia=function(){function t(t){var e=void 0===t?{}:t,n=e.isAttribute,i=e.isSelf,r=e.isHost,s=e.isSkipSelf,o=e.isOptional,a=e.isValue,u=e.query,p=e.viewQuery,c=e.token,l=e.value;this.isAttribute=w(n),this.isSelf=w(i),this.isHost=w(r),this.isSkipSelf=w(s),this.isOptional=w(o),this.isValue=w(a),this.query=u,this.viewQuery=p,this.token=c,this.value=l}return t.fromJson=function(e){return new t({token:It(e.token,Oa.fromJson),query:It(e.query,Va.fromJson),viewQuery:It(e.viewQuery,Va.fromJson),value:e.value,isAttribute:e.isAttribute,isSelf:e.isSelf,isHost:e.isHost,isSkipSelf:e.isSkipSelf,isOptional:e.isOptional,isValue:e.isValue})},t.prototype.toJson=function(){return{token:Mt(this.token),query:Mt(this.query),viewQuery:Mt(this.viewQuery),value:this.value,isAttribute:this.isAttribute,isSelf:this.isSelf,isHost:this.isHost,isSkipSelf:this.isSkipSelf,isOptional:this.isOptional,isValue:this.isValue}},t}(),Ma=function(){function t(t){var e=t.token,n=t.useClass,i=t.useValue,r=t.useExisting,s=t.useFactory,o=t.deps,a=t.multi;this.token=e,this.useClass=n,this.useValue=i,this.useExisting=r,this.useFactory=s,this.deps=_(o),this.multi=w(a)}return t.fromJson=function(e){return new t({token:It(e.token,Oa.fromJson),useClass:It(e.useClass,Da.fromJson),useExisting:It(e.useExisting,Oa.fromJson),useValue:It(e.useValue,ka.fromJson),useFactory:It(e.useFactory,Na.fromJson),multi:e.multi,deps:Pt(e.deps,Ia.fromJson)})},t.prototype.toJson=function(){return{"class":"Provider",token:Mt(this.token),useClass:Mt(this.useClass),useExisting:Mt(this.useExisting),useValue:Mt(this.useValue),useFactory:Mt(this.useFactory),multi:this.multi,deps:kt(this.deps)}},t}(),Na=function(){function t(t){var e=t.runtime,n=t.name,i=t.moduleUrl,r=t.prefix,s=t.diDeps,o=t.value;this.runtime=e,this.name=n,this.prefix=r,this.moduleUrl=i,this.diDeps=Nt(s),this.value=o}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),t.fromJson=function(e){return new t({name:e.name,prefix:e.prefix,moduleUrl:e.moduleUrl,value:e.value,diDeps:Pt(e.diDeps,Ia.fromJson)})},t.prototype.toJson=function(){return{"class":"Factory",name:this.name,prefix:this.prefix,moduleUrl:this.moduleUrl,value:this.value,diDeps:kt(this.diDeps)}},t}(),Oa=function(){function t(t){var e=t.value,n=t.identifier,i=t.identifierIsInstance;this.value=e,this.identifier=n,this.identifierIsInstance=w(i)}return t.fromJson=function(e){return new t({value:e.value,identifier:It(e.identifier,ka.fromJson),identifierIsInstance:e.identifierIsInstance})},t.prototype.toJson=function(){return{value:this.value,identifier:Mt(this.identifier),identifierIsInstance:this.identifierIsInstance}},Object.defineProperty(t.prototype,"runtimeCacheKey",{get:function(){return a(this.identifier)?this.identifier.runtime:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"assetCacheKey",{get:function(){return a(this.identifier)?a(this.identifier.moduleUrl)&&a(wt(this.identifier.moduleUrl))?this.identifier.name+"|"+this.identifier.moduleUrl+"|"+this.identifierIsInstance:null:this.value},enumerable:!0,configurable:!0}),t.prototype.equalsTo=function(t){var e=this.runtimeCacheKey,n=this.assetCacheKey;return a(e)&&e==t.runtimeCacheKey||a(n)&&n==t.assetCacheKey},Object.defineProperty(t.prototype,"name",{get:function(){return a(this.value)?mt(this.value):this.identifier.name},enumerable:!0,configurable:!0}),t}(),Ra=function(){function t(){this._valueMap=new Map,this._values=[]}return t.prototype.add=function(t,e){var n=this.get(t);if(a(n))throw new or("Can only add to a TokenMap! Token: "+t.name);this._values.push(e);var i=t.runtimeCacheKey;a(i)&&this._valueMap.set(i,e);var r=t.assetCacheKey;a(r)&&this._valueMap.set(r,e)},t.prototype.get=function(t){var e,n=t.runtimeCacheKey,i=t.assetCacheKey;return a(n)&&(e=this._valueMap.get(n)),u(e)&&a(i)&&(e=this._valueMap.get(i)),e},t.prototype.values=function(){return this._values},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t}(),Da=function(){function t(t){var e=void 0===t?{}:t,n=e.runtime,i=e.name,r=e.moduleUrl,s=e.prefix,o=e.isHost,a=e.value,u=e.diDeps;this.runtime=n,this.name=i,this.moduleUrl=r,this.prefix=s,this.isHost=w(o),this.value=a,this.diDeps=Nt(u)}return t.fromJson=function(e){return new t({name:e.name,moduleUrl:e.moduleUrl,prefix:e.prefix,isHost:e.isHost,value:e.value,diDeps:Pt(e.diDeps,Ia.fromJson)})},Object.defineProperty(t.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.toJson=function(){return{"class":"Type",name:this.name,moduleUrl:this.moduleUrl,prefix:this.prefix,isHost:this.isHost,value:this.value,diDeps:kt(this.diDeps)}},t}(),Va=function(){function t(t){var e=void 0===t?{}:t,n=e.selectors,i=e.descendants,r=e.first,s=e.propertyName,o=e.read;this.selectors=n,this.descendants=w(i),this.first=w(r),this.propertyName=s,this.read=o}return t.fromJson=function(e){return new t({selectors:Pt(e.selectors,Oa.fromJson),descendants:e.descendants,first:e.first,propertyName:e.propertyName,read:It(e.read,Oa.fromJson)})},t.prototype.toJson=function(){return{selectors:kt(this.selectors),descendants:this.descendants,first:this.first,propertyName:this.propertyName,read:Mt(this.read)}},t}(),La=function(){function t(t){var n=void 0===t?{}:t,i=n.encapsulation,r=n.template,s=n.templateUrl,o=n.styles,u=n.styleUrls,p=n.ngContentSelectors;this.encapsulation=a(i)?i:e.ViewEncapsulation.Emulated,this.template=r,this.templateUrl=s,this.styles=a(o)?o:[],this.styleUrls=a(u)?u:[],this.ngContentSelectors=a(p)?p:[]}return t.fromJson=function(e){return new t({encapsulation:a(e.encapsulation)?Ii[e.encapsulation]:e.encapsulation,template:e.template,templateUrl:e.templateUrl,styles:e.styles,styleUrls:e.styleUrls,ngContentSelectors:e.ngContentSelectors})},t.prototype.toJson=function(){return{encapsulation:a(this.encapsulation)?y(this.encapsulation):this.encapsulation,template:this.template,templateUrl:this.templateUrl,styles:this.styles,styleUrls:this.styleUrls,ngContentSelectors:this.ngContentSelectors}},t}(),Ua=function(){function t(t){var e=void 0===t?{}:t,n=e.type,i=e.isComponent,r=e.selector,s=e.exportAs,o=e.changeDetection,a=e.inputs,u=e.outputs,p=e.hostListeners,c=e.hostProperties,l=e.hostAttributes,h=e.lifecycleHooks,f=e.providers,d=e.viewProviders,v=e.queries,m=e.viewQueries,y=e.template;this.type=n,this.isComponent=i,this.selector=r,this.exportAs=s,this.changeDetection=o,this.inputs=a,this.outputs=u,this.hostListeners=p,this.hostProperties=c,this.hostAttributes=l,this.lifecycleHooks=Nt(h),this.providers=Nt(f),this.viewProviders=Nt(d),this.queries=Nt(v),this.viewQueries=Nt(m),this.template=y}return t.create=function(e){var n=void 0===e?{}:e,i=n.type,r=n.isComponent,s=n.selector,o=n.exportAs,p=n.changeDetection,c=n.inputs,l=n.outputs,h=n.host,f=n.lifecycleHooks,d=n.providers,v=n.viewProviders,m=n.queries,y=n.viewQueries,g=n.template,_={},x={},E={};a(h)&&nr.forEach(h,function(t,e){var n=$n.firstMatch(Aa,e);u(n)?E[e]=t:a(n[1])?x[n[1]]=t:a(n[2])&&(_[n[2]]=t)});var C={};a(c)&&c.forEach(function(t){var e=vt(t,[t,t]);C[e[0]]=e[1]});var S={};return a(l)&&l.forEach(function(t){var e=vt(t,[t,t]);S[e[0]]=e[1]}),new t({type:i,isComponent:w(r),selector:s,exportAs:o,changeDetection:p,inputs:C,outputs:S,hostListeners:_,hostProperties:x,hostAttributes:E,lifecycleHooks:a(f)?f:[],providers:d,viewProviders:v,queries:m,viewQueries:y,template:g})},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),t.fromJson=function(e){return new t({isComponent:e.isComponent,selector:e.selector,exportAs:e.exportAs,type:a(e.type)?Da.fromJson(e.type):e.type,changeDetection:a(e.changeDetection)?yi[e.changeDetection]:e.changeDetection,inputs:e.inputs,outputs:e.outputs,hostListeners:e.hostListeners,hostProperties:e.hostProperties,hostAttributes:e.hostAttributes,lifecycleHooks:e.lifecycleHooks.map(function(t){return _i[t]}),template:a(e.template)?La.fromJson(e.template):e.template,providers:Pt(e.providers,At),viewProviders:Pt(e.viewProviders,At),queries:Pt(e.queries,Va.fromJson),viewQueries:Pt(e.viewQueries,Va.fromJson)})},t.prototype.toJson=function(){return{"class":"Directive",isComponent:this.isComponent,selector:this.selector,exportAs:this.exportAs,type:a(this.type)?this.type.toJson():this.type,changeDetection:a(this.changeDetection)?y(this.changeDetection):this.changeDetection,inputs:this.inputs,outputs:this.outputs,hostListeners:this.hostListeners,hostProperties:this.hostProperties,hostAttributes:this.hostAttributes,lifecycleHooks:this.lifecycleHooks.map(function(t){return y(t)}),template:a(this.template)?this.template.toJson():this.template,providers:kt(this.providers),viewProviders:kt(this.viewProviders),queries:kt(this.queries),viewQueries:kt(this.viewQueries)}},t}(),Fa=function(){function t(t){var e=void 0===t?{}:t,n=e.type,i=e.name,r=e.pure,s=e.lifecycleHooks;this.type=n,this.name=i,this.pure=w(r),this.lifecycleHooks=Nt(s)}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),t.fromJson=function(e){return new t({type:a(e.type)?Da.fromJson(e.type):e.type,name:e.name,pure:e.pure})},t.prototype.toJson=function(){return{"class":"Pipe",type:a(this.type)?this.type.toJson():null,name:this.name,pure:this.pure}},t}(),Ba={Directive:Ua.fromJson,Pipe:Fa.fromJson,Type:Da.fromJson,Provider:Ma.fromJson,Identifier:ka.fromJson,Factory:Na.fromJson},ja=gt("core","linker/view"),qa=gt("core","linker/view_utils"),Ha=gt("core","change_detection/change_detection"),Qa=ki,Wa=Ei,za=Ci,Ka=Mi,Xa=xi,Ga=e.ElementRef,Ja=e.ViewContainerRef,Ya=e.ChangeDetectorRef,$a=e.RenderComponentType,Za=e.QueryList,tu=e.TemplateRef,eu=Vi,nu=Di,iu=e.Injector,ru=e.ViewEncapsulation,su=Si,ou=e.ChangeDetectionStrategy,au=Ni,uu=e.Renderer,pu=e.SimpleChange,cu=Ri,lu=mi,hu=Ti,fu=Oi,du=Pi,vu=Ai,mu=$i,yu=Bi,gu=ji,_u=function(){function t(){}return t}();_u.ViewUtils=new ka({name:"ViewUtils",moduleUrl:gt("core","linker/view_utils"),runtime:Qa}),_u.AppView=new ka({name:"AppView",moduleUrl:ja,runtime:Wa}),_u.DebugAppView=new ka({name:"DebugAppView",moduleUrl:ja,runtime:za}),_u.AppElement=new ka({name:"AppElement",moduleUrl:gt("core","linker/element"),runtime:Xa}),_u.ElementRef=new ka({name:"ElementRef",moduleUrl:gt("core","linker/element_ref"),runtime:Ga}),_u.ViewContainerRef=new ka({name:"ViewContainerRef",moduleUrl:gt("core","linker/view_container_ref"),runtime:Ja}),_u.ChangeDetectorRef=new ka({name:"ChangeDetectorRef",moduleUrl:gt("core","change_detection/change_detector_ref"),runtime:Ya}),_u.RenderComponentType=new ka({name:"RenderComponentType",moduleUrl:gt("core","render/api"),runtime:$a}),_u.QueryList=new ka({name:"QueryList",moduleUrl:gt("core","linker/query_list"),runtime:Za}),_u.TemplateRef=new ka({name:"TemplateRef",moduleUrl:gt("core","linker/template_ref"),runtime:tu}),_u.TemplateRef_=new ka({name:"TemplateRef_",moduleUrl:gt("core","linker/template_ref"),runtime:eu}),_u.ValueUnwrapper=new ka({name:"ValueUnwrapper",moduleUrl:Ha,runtime:nu}),_u.Injector=new ka({name:"Injector",moduleUrl:gt("core","di/injector"),runtime:iu}),_u.ViewEncapsulation=new ka({name:"ViewEncapsulation",moduleUrl:gt("core","metadata/view"),runtime:ru}),_u.ViewType=new ka({name:"ViewType",moduleUrl:gt("core","linker/view_type"),runtime:su}),_u.ChangeDetectionStrategy=new ka({name:"ChangeDetectionStrategy",moduleUrl:Ha,runtime:ou}),_u.StaticNodeDebugInfo=new ka({name:"StaticNodeDebugInfo",moduleUrl:gt("core","linker/debug_context"),runtime:au}),_u.DebugContext=new ka({name:"DebugContext",moduleUrl:gt("core","linker/debug_context"),runtime:Ka}),_u.Renderer=new ka({name:"Renderer",moduleUrl:gt("core","render/api"),runtime:uu}),_u.SimpleChange=new ka({name:"SimpleChange",moduleUrl:Ha,runtime:pu}),_u.uninitialized=new ka({name:"uninitialized",moduleUrl:Ha,runtime:cu}),_u.ChangeDetectorState=new ka({name:"ChangeDetectorState",moduleUrl:Ha,runtime:lu}),_u.checkBinding=new ka({name:"checkBinding",moduleUrl:qa,runtime:vu}),_u.flattenNestedViewRenderNodes=new ka({name:"flattenNestedViewRenderNodes",moduleUrl:qa,runtime:hu}),_u.devModeEqual=new ka({name:"devModeEqual",moduleUrl:Ha,runtime:fu}),_u.interpolate=new ka({name:"interpolate",moduleUrl:qa,runtime:du}),_u.castByValue=new ka({name:"castByValue",moduleUrl:qa,runtime:mu}),_u.EMPTY_ARRAY=new ka({name:"EMPTY_ARRAY",moduleUrl:qa,runtime:yu}),_u.EMPTY_MAP=new ka({name:"EMPTY_MAP",moduleUrl:qa,runtime:gu}),_u.pureProxies=[null,new ka({name:"pureProxy1",moduleUrl:qa,runtime:qi}),new ka({name:"pureProxy2",moduleUrl:qa,runtime:Hi}),new ka({name:"pureProxy3",moduleUrl:qa,runtime:Qi}),new ka({name:"pureProxy4",moduleUrl:qa,runtime:Wi}),new ka({name:"pureProxy5",moduleUrl:qa,runtime:zi}),new ka({name:"pureProxy6",moduleUrl:qa,runtime:Ki}),new ka({name:"pureProxy7",moduleUrl:qa,runtime:Xi}),new ka({name:"pureProxy8",moduleUrl:qa,runtime:Gi}),new ka({name:"pureProxy9",moduleUrl:qa,runtime:Ji}),new ka({name:"pureProxy10",moduleUrl:qa,runtime:Yi})],_u.SecurityContext=new ka({name:"SecurityContext",moduleUrl:gt("core","security"),runtime:Li});var wu=function(t){function e(e,n){t.call(this,n,e)}return __extends(e,t),e}(to),xu=function(){function t(t,e){var n=this;this.component=t,this.sourceSpan=e,this.errors=[],this.viewQueries=Ft(t),this.viewProviders=new Ra,Vt(t.viewProviders,e,this.errors).forEach(function(t){u(n.viewProviders.get(t.token))&&n.viewProviders.add(t.token,!0)})}return t}(),Eu=function(){function e(t,e,n,i,r,s,o){var u=this;this._viewContext=t,this._parent=e,this._isViewRoot=n,this._directiveAsts=i,this._sourceSpan=o,this._transformedProviders=new Ra,this._seenProviders=new Ra,this._hasViewContainer=!1,this._attrs={},r.forEach(function(t){return u._attrs[t.name]=t.value});var p=i.map(function(t){return t.directive});this._allProviders=Lt(p,o,t.errors),this._contentQueries=Bt(p);var c=new Ra;this._allProviders.values().forEach(function(t){u._addQueryReadsTo(t.token,c)}),s.forEach(function(t){u._addQueryReadsTo(new Oa({value:t.name}),c)}),a(c.get(Ot(_u.ViewContainerRef)))&&(this._hasViewContainer=!0),this._allProviders.values().forEach(function(t){var e=t.eager||a(c.get(t.token));e&&u._getOrCreateLocalProvider(t.providerType,t.token,!0)})}return e.prototype.afterElement=function(){var t=this;this._allProviders.values().forEach(function(e){t._getOrCreateLocalProvider(e.providerType,e.token,!1)})},Object.defineProperty(e.prototype,"transformProviders",{get:function(){return this._transformedProviders.values()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transformedDirectiveAsts",{get:function(){var t=this._transformedProviders.values().map(function(t){return t.token.identifier}),e=ir.clone(this._directiveAsts);return ir.sort(e,function(e,n){return t.indexOf(e.directive.type)-t.indexOf(n.directive.type)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transformedHasViewContainer",{get:function(){return this._hasViewContainer},enumerable:!0,configurable:!0}),e.prototype._addQueryReadsTo=function(t,e){this._getQueriesFor(t).forEach(function(n){var i=a(n.read)?n.read:t;u(e.get(i))&&e.add(i,!0)})},e.prototype._getQueriesFor=function(t){for(var e,n=[],i=this,r=0;null!==i;)e=i._contentQueries.get(t),a(e)&&ir.addAll(n,e.filter(function(t){return t.descendants||1>=r})),i._directiveAsts.length>0&&r++,i=i._parent;return e=this._viewContext.viewQueries.get(t),a(e)&&ir.addAll(n,e),n},e.prototype._getOrCreateLocalProvider=function(e,n,i){var r=this,s=this._allProviders.get(n);if(u(s)||(e===t.ProviderAstType.Directive||e===t.ProviderAstType.PublicService)&&s.providerType===t.ProviderAstType.PrivateService||(e===t.ProviderAstType.PrivateService||e===t.ProviderAstType.PublicService)&&s.providerType===t.ProviderAstType.Builtin)return null;var o=this._transformedProviders.get(n);if(a(o))return o;if(a(this._seenProviders.get(n)))return this._viewContext.errors.push(new wu("Cannot instantiate cyclic dependency! "+n.name,this._sourceSpan)),null;this._seenProviders.add(n,!0);var p=s.providers.map(function(t){var e,n=t.useValue,o=t.useExisting;if(a(t.useExisting)){var u=r._getDependency(s.providerType,new Ia({token:t.useExisting}),i);a(u.token)?o=u.token:(o=null,n=u.value)}else if(a(t.useFactory)){var p=a(t.deps)?t.deps:t.useFactory.diDeps;e=p.map(function(t){return r._getDependency(s.providerType,t,i)})}else if(a(t.useClass)){var p=a(t.deps)?t.deps:t.useClass.diDeps;e=p.map(function(t){return r._getDependency(s.providerType,t,i)})}return Rt(t,{useExisting:o,useValue:n,deps:e})});return o=Dt(s,{eager:i,providers:p}),this._transformedProviders.add(n,o),o},e.prototype._getLocalDependency=function(e,n,i){if(void 0===i&&(i=null),n.isAttribute){var r=this._attrs[n.token.value];return new Ia({isValue:!0,value:_(r)})}if(a(n.query)||a(n.viewQuery))return n;if(a(n.token)){if(e===t.ProviderAstType.Directive||e===t.ProviderAstType.Component){if(n.token.equalsTo(Ot(_u.Renderer))||n.token.equalsTo(Ot(_u.ElementRef))||n.token.equalsTo(Ot(_u.ChangeDetectorRef))||n.token.equalsTo(Ot(_u.TemplateRef)))return n;n.token.equalsTo(Ot(_u.ViewContainerRef))&&(this._hasViewContainer=!0)}if(n.token.equalsTo(Ot(_u.Injector)))return n;if(a(this._getOrCreateLocalProvider(e,n.token,i)))return n}return null},e.prototype._getDependency=function(e,n,i){void 0===i&&(i=null);var r=this,s=i,o=null;if(n.isSkipSelf||(o=this._getLocalDependency(e,n,i)),n.isSelf)u(o)&&n.isOptional&&(o=new Ia({isValue:!0,value:null}));else{for(;u(o)&&a(r._parent);){var p=r;r=r._parent,p._isViewRoot&&(s=!1),o=r._getLocalDependency(t.ProviderAstType.PublicService,n,s)}u(o)&&(o=!n.isHost||this._viewContext.component.type.isHost||Ot(this._viewContext.component.type).equalsTo(n.token)||a(this._viewContext.viewProviders.get(n.token))?n:n.isOptional?o=new Ia({isValue:!0,value:null}):null)}return u(o)&&this._viewContext.errors.push(new wu("No provider for "+n.token.name,this._sourceSpan)),o},e}(),Cu=/^(?:(?:(?:(bind-)|(var-)|(let-)|(ref-|#)|(on-)|(bindon-))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/g,Su="template",bu="template",Au="*",Tu="class",Pu=".",ku="attr",Iu="class",Mu="style",Nu=ta.parse("*")[0],Ou=new e.OpaqueToken("TemplateTransforms"),Ru=function(t){function e(e,n,i){t.call(this,n,e,i)}return __extends(e,t),e}(to),Du=function(){function t(t,e){this.templateAst=t,this.errors=e}return t}(),Vu=function(){function t(t,e,n,i,r){this._exprParser=t,this._schemaRegistry=e,this._htmlParser=n,this._console=i,this.transforms=r}return t.prototype.parse=function(t,e,n,i,r){var s=this.tryParse(t,e,n,i,r),o=s.errors.filter(function(t){return t.level===js.WARNING}),a=s.errors.filter(function(t){return t.level===js.FATAL});if(o.length>0&&this._console.warn("Template parse warnings:\n"+o.join("\n")),a.length>0){var u=a.join("\n");throw new or("Template parse errors:\n"+u)}return s.templateAst},t.prototype.tryParse=function(t,e,n,i,r){var s,o=this._htmlParser.parse(e,r),u=o.errors;if(o.rootNodes.length>0){var p=Qt(n),c=Qt(i),l=new xu(t,o.rootNodes[0].sourceSpan),h=new Uu(l,p,c,this._exprParser,this._schemaRegistry);s=q(h,o.rootNodes,Hu),u=u.concat(h.errors).concat(l.errors)}else s=[];return u.length>0?new Du(s,u):(a(this.transforms)&&this.transforms.forEach(function(t){s=S(t,s)}),new Du(s,u))},t}();Vu.decorators=[{type:e.Injectable}],Vu.ctorParameters=[{type:Bs},{type:qn},{type:Go},{type:Zi},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[Ou]}]}];var Lu,Uu=function(){function e(t,e,n,i,r){var s=this;this.providerViewContext=t,this._exprParser=i,this._schemaRegistry=r,this.errors=[],this.directivesIndex=new Map,this.ngContentCount=0,this.selectorMatcher=new ea,ir.forEachWithIndex(e,function(t,e){var n=ta.parse(t.selector);s.selectorMatcher.addSelectables(n,t),s.directivesIndex.set(t,e)}),this.pipesByName=new Map,n.forEach(function(t){return s.pipesByName.set(t.name,t)})}return e.prototype._reportError=function(t,e,n){void 0===n&&(n=js.FATAL),this.errors.push(new Ru(t,e,n))},e.prototype._parseInterpolation=function(t,e){var n=e.start.toString();try{var i=this._exprParser.parseInterpolation(t,n);if(this._checkPipes(i,e),a(i)&&i.ast.expressions.length>bi)throw new or("Only support at most "+bi+" interpolation values!");return i}catch(r){return this._reportError(""+r,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},e.prototype._parseAction=function(t,e){var n=e.start.toString();try{var i=this._exprParser.parseAction(t,n);return this._checkPipes(i,e),i}catch(r){return this._reportError(""+r,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},e.prototype._parseBinding=function(t,e){var n=e.start.toString();try{var i=this._exprParser.parseBinding(t,n);return this._checkPipes(i,e),i}catch(r){return this._reportError(""+r,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},e.prototype._parseTemplateBindings=function(t,e){var n=this,i=e.start.toString();try{var r=this._exprParser.parseTemplateBindings(t,i);return r.templateBindings.forEach(function(t){a(t.expression)&&n._checkPipes(t.expression,e)}),r.warnings.forEach(function(t){n._reportError(t,e,js.WARNING)}),r.templateBindings}catch(s){return this._reportError(""+s,e),[]}},e.prototype._checkPipes=function(t,e){var n=this;if(a(t)){var i=new Wu;t.visit(i),i.pipes.forEach(function(t){n.pipesByName.has(t)||n._reportError("The pipe '"+t+"' could not be found",e)})}},e.prototype.visitExpansion=function(t,e){return null},e.prototype.visitExpansionCase=function(t,e){return null},e.prototype.visitText=function(t,e){var n=e.findNgContentIndex(Nu),i=this._parseInterpolation(t.value,t.sourceSpan);return a(i)?new ni(i,n,t.sourceSpan):new ei(t.value,n,t.sourceSpan)},e.prototype.visitAttr=function(t,e){return new ii(t.name,t.value,t.sourceSpan)},e.prototype.visitComment=function(t,e){return null},e.prototype.visitElement=function(t,e){var n=this,i=t.name,r=ct(t);if(r.type===Jo.SCRIPT||r.type===Jo.STYLE)return null;if(r.type===Jo.STYLESHEET&&ht(r.hrefAttr))return null;var s=[],o=[],u=[],p=[],c=[],l=[],h=[],f=[],d=!1,v=[],m=Q(i.toLowerCase())[1],y=m==Su;t.attrs.forEach(function(t){var e=n._parseAttr(y,t,s,o,c,u,p),i=n._parseInlineTemplateBinding(t,h,l,f);e||i||(v.push(n.visitAttr(t,null)),s.push([t.name,t.value])),i&&(d=!0)});var g=Ht(i,s),_=this._parseDirectives(this.selectorMatcher,g),w=[],x=this._createDirectiveAsts(y,t.name,_,o,u,t.sourceSpan,w),E=this._createElementPropertyAsts(t.name,o,x),C=e.isTemplateElement||d,S=new Eu(this.providerViewContext,e.providerContext,C,x,v,w,t.sourceSpan),b=q(r.nonBindable?Qu:this,t.children,qu.create(y,x,y?e.providerContext:S));S.afterElement();var A,T=a(r.projectAs)?ta.parse(r.projectAs)[0]:g,P=e.findNgContentIndex(T);if(r.type===Jo.NG_CONTENT)a(t.children)&&t.children.length>0&&this._reportError("<ng-content> element cannot have content. <ng-content> must be immediately followed by </ng-content>",t.sourceSpan),A=new fi(this.ngContentCount++,d?null:P,t.sourceSpan);else if(y)this._assertAllEventsPublishedByDirectives(x,c),this._assertNoComponentsNorElementBindingsOnTemplate(x,E,t.sourceSpan),A=new pi(v,c,w,p,S.transformedDirectiveAsts,S.transformProviders,S.transformedHasViewContainer,b,d?null:P,t.sourceSpan);else{this._assertOnlyOneComponent(x,t.sourceSpan);var k=d?null:e.findNgContentIndex(T);A=new ui(i,v,E,c,w,S.transformedDirectiveAsts,S.transformProviders,S.transformedHasViewContainer,b,d?null:k,t.sourceSpan)}if(d){var I=Ht(Su,h),M=this._parseDirectives(this.selectorMatcher,I),N=this._createDirectiveAsts(!0,t.name,M,l,[],t.sourceSpan,[]),O=this._createElementPropertyAsts(t.name,l,N);this._assertNoComponentsNorElementBindingsOnTemplate(N,O,t.sourceSpan);var R=new Eu(this.providerViewContext,e.providerContext,e.isTemplateElement,N,[],[],t.sourceSpan);R.afterElement(),A=new pi([],[],[],f,R.transformedDirectiveAsts,R.transformProviders,R.transformedHasViewContainer,[A],P,t.sourceSpan)}return A},e.prototype._parseInlineTemplateBinding=function(t,e,n,i){var r=null;if(t.name==bu)r=t.value;else if(t.name.startsWith(Au)){var s=t.name.substring(Au.length);r=0==t.value.length?s:s+" "+t.value}if(a(r)){for(var o=this._parseTemplateBindings(r,t.sourceSpan),u=0;u<o.length;u++){var p=o[u];p.keyIsVar?i.push(new ai(p.key,p.name,t.sourceSpan)):a(p.expression)?this._parsePropertyAst(p.key,p.expression,t.sourceSpan,e,n):(e.push([p.key,""]),this._parseLiteralAttr(p.key,null,t.sourceSpan,n))}return!0}return!1},e.prototype._parseAttr=function(t,e,n,i,r,s,o){var u=this._normalizeAttributeName(e.name),p=e.value,c=$n.firstMatch(Cu,u),l=!1;if(a(c))if(l=!0,a(c[1]))this._parseProperty(c[7],p,e.sourceSpan,n,i);else if(a(c[2])){var h=c[7];t?(this._reportError('"var-" on <template> elements is deprecated. Use "let-" instead!',e.sourceSpan,js.WARNING),this._parseVariable(h,p,e.sourceSpan,o)):(this._reportError('"var-" on non <template> elements is deprecated. Use "ref-" instead!',e.sourceSpan,js.WARNING),this._parseReference(h,p,e.sourceSpan,s))}else if(a(c[3]))if(t){var h=c[7];this._parseVariable(h,p,e.sourceSpan,o)}else this._reportError('"let-" is only supported on template elements.',e.sourceSpan);else if(a(c[4])){var h=c[7];this._parseReference(h,p,e.sourceSpan,s)}else a(c[5])?this._parseEvent(c[7],p,e.sourceSpan,n,r):a(c[6])?(this._parseProperty(c[7],p,e.sourceSpan,n,i),this._parseAssignmentEvent(c[7],p,e.sourceSpan,n,r)):a(c[8])?(this._parseProperty(c[8],p,e.sourceSpan,n,i),this._parseAssignmentEvent(c[8],p,e.sourceSpan,n,r)):a(c[9])?this._parseProperty(c[9],p,e.sourceSpan,n,i):a(c[10])&&this._parseEvent(c[10],p,e.sourceSpan,n,r);else l=this._parsePropertyInterpolation(u,p,e.sourceSpan,n,i);return l||this._parseLiteralAttr(u,p,e.sourceSpan,i),l},e.prototype._normalizeAttributeName=function(t){return t.toLowerCase().startsWith("data-")?t.substring(5):t},e.prototype._parseVariable=function(t,e,n,i){t.indexOf("-")>-1&&this._reportError('"-" is not allowed in variable names',n),i.push(new ai(t,e,n))},e.prototype._parseReference=function(t,e,n,i){t.indexOf("-")>-1&&this._reportError('"-" is not allowed in reference names',n),i.push(new ju(t,e,n))},e.prototype._parseProperty=function(t,e,n,i,r){this._parsePropertyAst(t,this._parseBinding(e,n),n,i,r)},e.prototype._parsePropertyInterpolation=function(t,e,n,i,r){var s=this._parseInterpolation(e,n);return a(s)?(this._parsePropertyAst(t,s,n,i,r),!0):!1},e.prototype._parsePropertyAst=function(t,e,n,i,r){i.push([t,e.source]),r.push(new Bu(t,e,!1,n))},e.prototype._parseAssignmentEvent=function(t,e,n,i,r){this._parseEvent(t+"Change",e+"=$event",n,i,r)},e.prototype._parseEvent=function(t,e,n,i,r){var s=vt(t,[null,t]),o=s[0],a=s[1],u=this._parseAction(e,n);i.push([t,u.source]),r.push(new si(a,o,u,n))},e.prototype._parseLiteralAttr=function(t,e,n,i){i.push(new Bu(t,this._exprParser.wrapLiteralPrimitive(e,""),!0,n))},e.prototype._parseDirectives=function(t,e){var n=this,i=ir.createFixedSize(this.directivesIndex.size);return t.match(e,function(t,e){i[n.directivesIndex.get(e)]=e}),i.filter(function(t){return a(t)})},e.prototype._createDirectiveAsts=function(t,e,n,i,r,s,o){var a=this,p=new Set,c=null,l=n.map(function(t){t.isComponent&&(c=t);var n=[],u=[],l=[];return a._createDirectiveHostPropertyAsts(e,t.hostProperties,s,n),a._createDirectiveHostEventAsts(t.hostListeners,s,u),a._createDirectivePropertyAsts(t.inputs,i,l),r.forEach(function(e){(0===e.value.length&&t.isComponent||t.exportAs==e.value)&&(o.push(new oi(e.name,Ot(t.type),e.sourceSpan)),p.add(e.name))}),new li(t,l,n,u,s)});return r.forEach(function(e){if(e.value.length>0)sr.has(p,e.name)||a._reportError('There is no directive with "exportAs" set to "'+e.value+'"',e.sourceSpan);else if(u(c)){var n=null;t&&(n=Ot(_u.TemplateRef)),o.push(new oi(e.name,n,e.sourceSpan))}}),l},e.prototype._createDirectiveHostPropertyAsts=function(t,e,n,i){var r=this;a(e)&&nr.forEach(e,function(e,s){var o=r._parseBinding(e,n);i.push(r._createElementPropertyAst(t,s,o,n))})},e.prototype._createDirectiveHostEventAsts=function(t,e,n){var i=this;a(t)&&nr.forEach(t,function(t,r){i._parseEvent(r,t,e,[],n)})},e.prototype._createDirectivePropertyAsts=function(t,e,n){if(a(t)){var i=new Map;e.forEach(function(t){var e=i.get(t.name);(u(e)||e.isLiteral)&&i.set(t.name,t)}),
nr.forEach(t,function(t,e){var r=i.get(t);a(r)&&n.push(new ci(e,r.name,r.expression,r.sourceSpan))})}},e.prototype._createElementPropertyAsts=function(t,e,n){var i=this,r=[],s=new Map;return n.forEach(function(t){t.inputs.forEach(function(t){s.set(t.templateName,t)})}),e.forEach(function(e){!e.isLiteral&&u(s.get(e.name))&&r.push(i._createElementPropertyAst(t,e.name,e.expression,e.sourceSpan))}),r},e.prototype._createElementPropertyAst=function(e,n,i,r){var s,o,a,u=null,p=n.split(Pu);if(1===p.length)o=this._schemaRegistry.getMappedPropName(p[0]),a=this._schemaRegistry.securityContext(e,o),s=t.PropertyBindingType.Property,this._schemaRegistry.hasProperty(e,o)||this._reportError("Can't bind to '"+o+"' since it isn't a known native property",r);else if(p[0]==ku){o=p[1],o.toLowerCase().startsWith("on")&&this._reportError("Binding to event attribute '"+o+"' is disallowed "+("for security reasons, please use ("+o.slice(2)+")=..."),r),a=this._schemaRegistry.securityContext(e,this._schemaRegistry.getMappedPropName(o));var c=o.indexOf(":");if(c>-1){var l=o.substring(0,c),h=o.substring(c+1);o=z(l,h)}s=t.PropertyBindingType.Attribute}else p[0]==Iu?(o=p[1],s=t.PropertyBindingType.Class,a=Li.NONE):p[0]==Mu?(u=p.length>2?p[2]:null,o=p[1],s=t.PropertyBindingType.Style,a=Li.STYLE):(this._reportError("Invalid property name '"+n+"'",r),s=null,a=null);return new ri(o,s,a,i,u,r)},e.prototype._findComponentDirectiveNames=function(t){var e=[];return t.forEach(function(t){var n=t.directive.type.name;t.directive.isComponent&&e.push(n)}),e},e.prototype._assertOnlyOneComponent=function(t,e){var n=this._findComponentDirectiveNames(t);n.length>1&&this._reportError("More than one component: "+n.join(","),e)},e.prototype._assertNoComponentsNorElementBindingsOnTemplate=function(t,e,n){var i=this,r=this._findComponentDirectiveNames(t);r.length>0&&this._reportError("Components on an embedded template: "+r.join(","),n),e.forEach(function(t){i._reportError("Property binding "+t.name+" not used by any directive on an embedded template",n)})},e.prototype._assertAllEventsPublishedByDirectives=function(t,e){var n=this,i=new Set;t.forEach(function(t){nr.forEach(t.directive.outputs,function(t,e){i.add(t)})}),e.forEach(function(t){(a(t.target)||!sr.has(i,t.name))&&n._reportError("Event binding "+t.fullName+" not emitted by any directive on an embedded template",t.sourceSpan)})},e}(),Fu=function(){function t(){}return t.prototype.visitElement=function(t,e){var n=ct(t);if(n.type===Jo.SCRIPT||n.type===Jo.STYLE||n.type===Jo.STYLESHEET)return null;var i=t.attrs.map(function(t){return[t.name,t.value]}),r=Ht(t.name,i),s=e.findNgContentIndex(r),o=q(this,t.children,Hu);return new ui(t.name,q(this,t.attrs),[],[],[],[],[],!1,o,s,t.sourceSpan)},t.prototype.visitComment=function(t,e){return null},t.prototype.visitAttr=function(t,e){return new ii(t.name,t.value,t.sourceSpan)},t.prototype.visitText=function(t,e){var n=e.findNgContentIndex(Nu);return new ei(t.value,n,t.sourceSpan)},t.prototype.visitExpansion=function(t,e){return t},t.prototype.visitExpansionCase=function(t,e){return t},t}(),Bu=function(){function t(t,e,n,i){this.name=t,this.expression=e,this.isLiteral=n,this.sourceSpan=i}return t}(),ju=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t}(),qu=function(){function t(t,e,n,i){this.isTemplateElement=t,this._ngContentIndexMatcher=e,this._wildcardNgContentIndex=n,this.providerContext=i}return t.create=function(e,n,i){var r=new ea,s=null,o=n.find(function(t){return t.directive.isComponent});if(a(o))for(var u=o.directive.template.ngContentSelectors,p=0;p<u.length;p++){var c=u[p];Xn.equals(c,"*")?s=p:r.addSelectables(ta.parse(u[p]),p)}return new t(e,r,s,i)},t.prototype.findNgContentIndex=function(t){var e=[];return this._ngContentIndexMatcher.match(t,function(t,n){e.push(n)}),ir.sort(e),a(this._wildcardNgContentIndex)&&e.push(this._wildcardNgContentIndex),e.length>0?e[0]:null},t}(),Hu=new qu(!0,new ea,null,null),Qu=new Fu,Wu=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];t.apply(this,e),this.pipes=new Set}return __extends(e,t),e.prototype.visitPipe=function(t,e){return this.pipes.add(t.name),t.exp.visit(this),this.visitAll(t.args,e),null},e}(Ir),zu=function(){function t(t,e,n,i){void 0===i&&(i=null),this.genDebugInfo=t,this.logBindingUpdate=e,this.useJit=n,u(i)&&(i=new Xu),this.renderTypes=i}return t}(),Ku=function(){function t(){}return Object.defineProperty(t.prototype,"renderer",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderText",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderElement",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderComment",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderEvent",{get:function(){return A()},enumerable:!0,configurable:!0}),t}(),Xu=function(){function t(){this.renderer=_u.Renderer,this.renderText=null,this.renderElement=null,this.renderComment=null,this.renderNode=null,this.renderEvent=null}return t}();!function(t){t[t.Const=0]="Const"}(Lu||(Lu={}));var Gu,Ju=function(){function t(t){void 0===t&&(t=null),this.modifiers=t,u(t)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return-1!==this.modifiers.indexOf(t)},t}();!function(t){t[t.Dynamic=0]="Dynamic",t[t.Bool=1]="Bool",t[t.String=2]="String",t[t.Int=3]="Int",t[t.Number=4]="Number",t[t.Function=5]="Function"}(Gu||(Gu={}));var Yu,$u=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.name=e}return __extends(e,t),e.prototype.visitType=function(t,e){return t.visitBuiltintType(this,e)},e}(Ju),Zu=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),t.call(this,i),this.value=e,this.typeParams=n}return __extends(e,t),e.prototype.visitType=function(t,e){return t.visitExternalType(this,e)},e}(Ju),tp=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.of=e}return __extends(e,t),e.prototype.visitType=function(t,e){return t.visitArrayType(this,e)},e}(Ju),ep=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.valueType=e}return __extends(e,t),e.prototype.visitType=function(t,e){return t.visitMapType(this,e)},e}(Ju),np=new $u(Gu.Dynamic),ip=new $u(Gu.Bool),rp=(new $u(Gu.Int),new $u(Gu.Number)),sp=new $u(Gu.String),op=new $u(Gu.Function);!function(t){t[t.Equals=0]="Equals",t[t.NotEquals=1]="NotEquals",t[t.Identical=2]="Identical",t[t.NotIdentical=3]="NotIdentical",t[t.Minus=4]="Minus",t[t.Plus=5]="Plus",t[t.Divide=6]="Divide",t[t.Multiply=7]="Multiply",t[t.Modulo=8]="Modulo",t[t.And=9]="And",t[t.Or=10]="Or",t[t.Lower=11]="Lower",t[t.LowerEquals=12]="LowerEquals",t[t.Bigger=13]="Bigger",t[t.BiggerEquals=14]="BiggerEquals"}(Yu||(Yu={}));var ap,up=function(){function t(t){this.type=t}return t.prototype.prop=function(t){return new Ap(this,t)},t.prototype.key=function(t,e){return void 0===e&&(e=null),new Tp(this,t,e)},t.prototype.callMethod=function(t,e){return new vp(this,t,e)},t.prototype.callFn=function(t){return new mp(this,t)},t.prototype.instantiate=function(t,e){return void 0===e&&(e=null),new yp(this,t,e)},t.prototype.conditional=function(t,e){return void 0===e&&(e=null),new wp(this,t,e)},t.prototype.equals=function(t){return new bp(Yu.Equals,this,t)},t.prototype.notEquals=function(t){return new bp(Yu.NotEquals,this,t)},t.prototype.identical=function(t){return new bp(Yu.Identical,this,t)},t.prototype.notIdentical=function(t){return new bp(Yu.NotIdentical,this,t)},t.prototype.minus=function(t){return new bp(Yu.Minus,this,t)},t.prototype.plus=function(t){return new bp(Yu.Plus,this,t)},t.prototype.divide=function(t){return new bp(Yu.Divide,this,t)},t.prototype.multiply=function(t){return new bp(Yu.Multiply,this,t)},t.prototype.modulo=function(t){return new bp(Yu.Modulo,this,t)},t.prototype.and=function(t){return new bp(Yu.And,this,t)},t.prototype.or=function(t){return new bp(Yu.Or,this,t)},t.prototype.lower=function(t){return new bp(Yu.Lower,this,t)},t.prototype.lowerEquals=function(t){return new bp(Yu.LowerEquals,this,t)},t.prototype.bigger=function(t){return new bp(Yu.Bigger,this,t)},t.prototype.biggerEquals=function(t){return new bp(Yu.BiggerEquals,this,t)},t.prototype.isBlank=function(){return this.equals(Np)},t.prototype.cast=function(t){return new Ep(this,t)},t.prototype.toStmt=function(){return new Vp(this)},t}();!function(t){t[t.This=0]="This",t[t.Super=1]="Super",t[t.CatchError=2]="CatchError",t[t.CatchStack=3]="CatchStack"}(ap||(ap={}));var pp,cp=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),l(e)?(this.name=e,this.builtin=null):(this.name=null,this.builtin=e)}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadVarExpr(this,e)},e.prototype.set=function(t){return new lp(this.name,t)},e}(up),lp=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,a(i)?i:n.type),this.name=e,this.value=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitWriteVarExpr(this,e)},e.prototype.toDeclStmt=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),new Rp(this.name,this.value,t,e)},e}(up),hp=function(t){function e(e,n,i,r){void 0===r&&(r=null),t.call(this,a(r)?r:i.type),this.receiver=e,this.index=n,this.value=i}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitWriteKeyExpr(this,e)},e}(up),fp=function(t){function e(e,n,i,r){void 0===r&&(r=null),t.call(this,a(r)?r:i.type),this.receiver=e,this.name=n,this.value=i}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitWritePropExpr(this,e)},e}(up);!function(t){t[t.ConcatArray=0]="ConcatArray",t[t.SubscribeObservable=1]="SubscribeObservable",t[t.bind=2]="bind"}(pp||(pp={}));var dp,vp=function(t){function e(e,n,i,r){void 0===r&&(r=null),t.call(this,r),this.receiver=e,this.args=i,l(n)?(this.name=n,this.builtin=null):(this.name=null,this.builtin=n)}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitInvokeMethodExpr(this,e)},e}(up),mp=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,i),this.fn=e,this.args=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitInvokeFunctionExpr(this,e)},e}(up),yp=function(t){function e(e,n,i){t.call(this,i),this.classExpr=e,this.args=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitInstantiateExpr(this,e)},e}(up),gp=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.value=e}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralExpr(this,e)},e}(up),_p=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),t.call(this,n),this.value=e,this.typeParams=i}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitExternalExpr(this,e)},e}(up),wp=function(t){function e(e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),t.call(this,a(r)?r:n.type),this.condition=e,this.falseCase=i,this.trueCase=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitConditionalExpr(this,e)},e}(up),xp=function(t){function e(e){t.call(this,ip),this.condition=e}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitNotExpr(this,e)},e}(up),Ep=function(t){function e(e,n){t.call(this,n),this.value=e}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitCastExpr(this,e)},e}(up),Cp=function(){function t(t,e){void 0===e&&(e=null),this.name=t,this.type=e}return t}(),Sp=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,i),this.params=e,this.statements=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitFunctionExpr(this,e)},e.prototype.toDeclStmt=function(t,e){return void 0===e&&(e=null),new Dp(t,this.params,this.statements,this.type,e)},e}(up),bp=function(t){function e(e,n,i,r){void 0===r&&(r=null),t.call(this,a(r)?r:n.type),this.operator=e,this.rhs=i,this.lhs=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitBinaryOperatorExpr(this,e)},e}(up),Ap=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,i),this.receiver=e,this.name=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadPropExpr(this,e)},e.prototype.set=function(t){return new fp(this.receiver,this.name,t)},e}(up),Tp=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,i),this.receiver=e,this.index=n}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadKeyExpr(this,e)},e.prototype.set=function(t){return new hp(this.receiver,this.index,t)},e}(up),Pp=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.entries=e}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralArrayExpr(this,e)},e}(up),kp=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.entries=e,this.valueType=null,a(n)&&(this.valueType=n.valueType)}return __extends(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralMapExpr(this,e)},e}(up),Ip=new cp(ap.This),Mp=new cp(ap.Super),Np=(new cp(ap.CatchError),new cp(ap.CatchStack),new gp(null,null));!function(t){t[t.Final=0]="Final",t[t.Private=1]="Private"}(dp||(dp={}));var Op=function(){function t(t){void 0===t&&(t=null),this.modifiers=t,u(t)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return-1!==this.modifiers.indexOf(t)},t}(),Rp=function(t){function e(e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),t.call(this,r),this.name=e,this.value=n,this.type=a(i)?i:n.type}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareVarStmt(this,e)},e}(Op),Dp=function(t){function e(e,n,i,r,s){void 0===r&&(r=null),void 0===s&&(s=null),t.call(this,s),this.name=e,this.params=n,this.statements=i,this.type=r}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareFunctionStmt(this,e)},e}(Op),Vp=function(t){function e(e){t.call(this),this.expr=e}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitExpressionStmt(this,e)},e}(Op),Lp=function(t){function e(e){t.call(this),this.value=e}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitReturnStmt(this,e)},e}(Op),Up=function(){function t(t,e){void 0===t&&(t=null),this.type=t,this.modifiers=e,u(e)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return-1!==this.modifiers.indexOf(t)},t}(),Fp=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),t.call(this,n,i),this.name=e}return __extends(e,t),e}(Up),Bp=function(t){function e(e,n,i,r,s){void 0===r&&(r=null),void 0===s&&(s=null),t.call(this,r,s),this.name=e,this.params=n,this.body=i}return __extends(e,t),e}(Up),jp=function(t){function e(e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),t.call(this,i,r),this.name=e,this.body=n}return __extends(e,t),e}(Up),qp=function(t){function e(e,n,i,r,s,o,a){void 0===a&&(a=null),t.call(this,a),this.name=e,this.parent=n,this.fields=i,this.getters=r,this.constructorMethod=s,this.methods=o}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareClassStmt(this,e)},e}(Op),Hp=function(t){function e(e,n,i){void 0===i&&(i=[]),t.call(this),this.condition=e,this.trueCase=n,this.falseCase=i}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitIfStmt(this,e)},e}(Op),Qp=function(t){function e(e,n){t.call(this),this.bodyStmts=e,this.catchStmts=n}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitTryCatchStmt(this,e)},e}(Op),Wp=function(t){function e(e){t.call(this),this.error=e}return __extends(e,t),e.prototype.visitStatement=function(t,e){return t.visitThrowStmt(this,e)},e}(Op),zp=function(){function t(){}return t.prototype.visitReadVarExpr=function(t,e){return t},t.prototype.visitWriteVarExpr=function(t,e){return new lp(t.name,t.value.visitExpression(this,e))},t.prototype.visitWriteKeyExpr=function(t,e){return new hp(t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.value.visitExpression(this,e))},t.prototype.visitWritePropExpr=function(t,e){return new fp(t.receiver.visitExpression(this,e),t.name,t.value.visitExpression(this,e))},t.prototype.visitInvokeMethodExpr=function(t,e){var n=a(t.builtin)?t.builtin:t.name;return new vp(t.receiver.visitExpression(this,e),n,this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitInvokeFunctionExpr=function(t,e){return new mp(t.fn.visitExpression(this,e),this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitInstantiateExpr=function(t,e){return new yp(t.classExpr.visitExpression(this,e),this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitLiteralExpr=function(t,e){return t},t.prototype.visitExternalExpr=function(t,e){return t},t.prototype.visitConditionalExpr=function(t,e){return new wp(t.condition.visitExpression(this,e),t.trueCase.visitExpression(this,e),t.falseCase.visitExpression(this,e))},t.prototype.visitNotExpr=function(t,e){return new xp(t.condition.visitExpression(this,e))},t.prototype.visitCastExpr=function(t,e){return new Ep(t.value.visitExpression(this,e),e)},t.prototype.visitFunctionExpr=function(t,e){return t},t.prototype.visitBinaryOperatorExpr=function(t,e){return new bp(t.operator,t.lhs.visitExpression(this,e),t.rhs.visitExpression(this,e),t.type)},t.prototype.visitReadPropExpr=function(t,e){return new Ap(t.receiver.visitExpression(this,e),t.name,t.type)},t.prototype.visitReadKeyExpr=function(t,e){return new Tp(t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.type)},t.prototype.visitLiteralArrayExpr=function(t,e){return new Pp(this.visitAllExpressions(t.entries,e))},t.prototype.visitLiteralMapExpr=function(t,e){var n=this;return new kp(t.entries.map(function(t){return[t[0],t[1].visitExpression(n,e)]}))},t.prototype.visitAllExpressions=function(t,e){var n=this;return t.map(function(t){return t.visitExpression(n,e)})},t.prototype.visitDeclareVarStmt=function(t,e){return new Rp(t.name,t.value.visitExpression(this,e),t.type,t.modifiers)},t.prototype.visitDeclareFunctionStmt=function(t,e){return t},t.prototype.visitExpressionStmt=function(t,e){return new Vp(t.expr.visitExpression(this,e))},t.prototype.visitReturnStmt=function(t,e){return new Lp(t.value.visitExpression(this,e))},t.prototype.visitDeclareClassStmt=function(t,e){return t},t.prototype.visitIfStmt=function(t,e){return new Hp(t.condition.visitExpression(this,e),this.visitAllStatements(t.trueCase,e),this.visitAllStatements(t.falseCase,e))},t.prototype.visitTryCatchStmt=function(t,e){return new Qp(this.visitAllStatements(t.bodyStmts,e),this.visitAllStatements(t.catchStmts,e))},t.prototype.visitThrowStmt=function(t,e){return new Wp(t.error.visitExpression(this,e))},t.prototype.visitCommentStmt=function(t,e){return t},t.prototype.visitAllStatements=function(t,e){var n=this;return t.map(function(t){return t.visitStatement(n,e)})},t}(),Kp=function(){function t(){}return t.prototype.visitReadVarExpr=function(t,e){return t},t.prototype.visitWriteVarExpr=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitWriteKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.value.visitExpression(this,e),t},t.prototype.visitWritePropExpr=function(t,e){return t.receiver.visitExpression(this,e),t.value.visitExpression(this,e),t},t.prototype.visitInvokeMethodExpr=function(t,e){return t.receiver.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitInvokeFunctionExpr=function(t,e){return t.fn.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitInstantiateExpr=function(t,e){return t.classExpr.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitLiteralExpr=function(t,e){return t},t.prototype.visitExternalExpr=function(t,e){return t},t.prototype.visitConditionalExpr=function(t,e){return t.condition.visitExpression(this,e),t.trueCase.visitExpression(this,e),t.falseCase.visitExpression(this,e),t},t.prototype.visitNotExpr=function(t,e){return t.condition.visitExpression(this,e),t},t.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitFunctionExpr=function(t,e){return t},t.prototype.visitBinaryOperatorExpr=function(t,e){return t.lhs.visitExpression(this,e),t.rhs.visitExpression(this,e),t},t.prototype.visitReadPropExpr=function(t,e){return t.receiver.visitExpression(this,e),t},t.prototype.visitReadKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t},t.prototype.visitLiteralArrayExpr=function(t,e){return this.visitAllExpressions(t.entries,e),t},t.prototype.visitLiteralMapExpr=function(t,e){var n=this;return t.entries.forEach(function(t){return t[1].visitExpression(n,e)}),t},t.prototype.visitAllExpressions=function(t,e){var n=this;t.forEach(function(t){return t.visitExpression(n,e)})},t.prototype.visitDeclareVarStmt=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitDeclareFunctionStmt=function(t,e){return t},t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e),t},t.prototype.visitReturnStmt=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitDeclareClassStmt=function(t,e){return t},t.prototype.visitIfStmt=function(t,e){return t.condition.visitExpression(this,e),this.visitAllStatements(t.trueCase,e),this.visitAllStatements(t.falseCase,e),t},t.prototype.visitTryCatchStmt=function(t,e){return this.visitAllStatements(t.bodyStmts,e),this.visitAllStatements(t.catchStmts,e),t},t.prototype.visitThrowStmt=function(t,e){return t.error.visitExpression(this,e),t},t.prototype.visitCommentStmt=function(t,e){return t},t.prototype.visitAllStatements=function(t,e){var n=this;t.forEach(function(t){return t.visitStatement(n,e)})},t}(),Xp=function(t){function e(e,n){t.call(this),this._varName=e,this._newValue=n}return __extends(e,t),e.prototype.visitReadVarExpr=function(t,e){return t.name==this._varName?this._newValue:t},e}(zp),Gp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];t.apply(this,e),this.varNames=new Set}return __extends(e,t),e.prototype.visitReadVarExpr=function(t,e){return this.varNames.add(t.name),null},e}(Kp),Jp=new ka({name:"ComponentFactory",runtime:e.ComponentFactory,moduleUrl:gt("core","linker/component_factory")}),Yp=function(){function t(t,e){this.moduleUrl=t,this.source=e}return t}(),$p=function(){function t(t,e){this.source=t,this.importedUrls=e}return t}(),Zp=function(){function t(t,e,n){this.component=t,this.directives=e,this.pipes=n}return t}(),tc=function(){function t(t,e,n,i,r,s){this._directiveNormalizer=t,this._templateParser=e,this._styleCompiler=n,this._viewCompiler=i,this._outputEmitter=r,this._xhr=s}return t.prototype.normalizeDirectiveMetadata=function(t){return this._directiveNormalizer.normalizeDirective(t)},t.prototype.compileTemplates=function(t){var e=this;if(0===t.length)throw new or("No components given");var n=[],i=[],r=ie(t[0].component);return t.forEach(function(t){var r=t.component;se(r);var s=e._compileComponent(r,t.directives,t.pipes,n);i.push(s);var o=Tt(r.type,r.selector),a=e._compileComponent(o,[r],[],n),u=r.type.name+"NgFactory";n.push(Kt(u).set(Xt(Jp,[Gt(r.type)]).instantiate([Jt(r.selector),Kt(a),Xt(r.type)],Gt(Jp,[Gt(r.type)],[Lu.Const]))).toDeclStmt(null,[dp.Final])),i.push(u)}),this._codegenSourceModule(r,n,i)},t.prototype.loadAndCompileStylesheet=function(t,e,n){var i=this;return this._xhr.get(t).then(function(r){var s=i._styleCompiler.compileStylesheet(t,r,e),o=[];return s.dependencies.forEach(function(t){o.push(t.moduleUrl),t.valuePlaceholder.moduleUrl=re(t.moduleUrl,t.isShimmed,n)}),new $p(i._codgenStyles(t,e,n,s),o)})},t.prototype._compileComponent=function(t,e,n,i){var r=this._styleCompiler.compileComponent(t),s=this._templateParser.parse(t,t.template.template,e,n,t.type.name),o=this._viewCompiler.compileComponent(t,s,Kt(r.stylesVar),n);return ir.addAll(i,ne(t.type.moduleUrl,r)),ir.addAll(i,ee(o)),o.viewFactoryVar},t.prototype._codgenStyles=function(t,e,n,i){return this._codegenSourceModule(re(t,e,n),i.statements,[i.stylesVar])},t.prototype._codegenSourceModule=function(t,e,n){return new Yp(t,this._outputEmitter.emitStatements(t,e,n))},t}(),ec=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}(),nc=function(){function t(){}return t.resolve=function(t){return Promise.resolve(t)},t.reject=function(t,e){return Promise.reject(t)},t.catchError=function(t,e){return t["catch"](e)},t.all=function(t){return 0==t.length?Promise.resolve([]):Promise.all(t)},t.then=function(t,e,n){return t.then(e,n)},t.wrap=function(t){return new Promise(function(e,n){try{e(t())}catch(i){n(i)}})},t.scheduleMicrotask=function(e){t.then(t.resolve(null),e,function(t){})},t.isPromise=function(t){return t instanceof Promise},t.completer=function(){return new ec},t}(),ic=function(){function t(){}return t.subscribe=function(t,e,n,i){return void 0===i&&(i=function(){}),n="function"==typeof n&&n||v,i="function"==typeof i&&i||v,t.subscribe({next:e,error:n,complete:i})},t.isObservable=function(t){return!!t.subscribe},t.hasSubscribers=function(t){return t.observers.length>0},t.dispose=function(t){t.unsubscribe()},t.callNext=function(t,e){t.next(e)},t.callEmit=function(t,e){t.emit(e)},t.callError=function(t,e){t.error(e)},t.callComplete=function(t){t.complete()},t.fromPromise=function(t){return i.PromiseObservable.create(t)},t.toPromise=function(t){return r.toPromise.call(t)},t}(),rc=function(){function t(){this.strictStyling=!0}return t.prototype.shimCssText=function(t,e,n){return void 0===n&&(n=""),t=ae(t),t=this._insertDirectives(t),this._scopeCssText(t,e,n)},t.prototype._insertDirectives=function(t){return t=this._insertPolyfillDirectivesInCssText(t),this._insertPolyfillRulesInCssText(t)},t.prototype._insertPolyfillDirectivesInCssText=function(t){return Xn.replaceAllMapped(t,sc,function(t){return t[1]+"{"})},t.prototype._insertPolyfillRulesInCssText=function(t){return Xn.replaceAllMapped(t,oc,function(t){var e=t[0];return e=Xn.replace(e,t[1],""),e=Xn.replace(e,t[2],""),t[3]+e})},t.prototype._scopeCssText=function(t,e,n){var i=this._extractUnscopedRulesFromCssText(t);return t=this._insertPolyfillHostInCssText(t),t=this._convertColonHost(t),t=this._convertColonHostContext(t),t=this._convertShadowDOMSelectors(t),a(e)&&(t=this._scopeSelectors(t,e,n)),t=t+"\n"+i,t.trim()},t.prototype._extractUnscopedRulesFromCssText=function(t){for(var e,n="",i=$n.matcher(ac,t);a(e=Zn.next(i));){var r=e[0];r=Xn.replace(r,e[2],""),r=Xn.replace(r,e[1],e[3]),n+=r+"\n\n"}return n},t.prototype._convertColonHost=function(t){return this._convertColonRule(t,lc,this._colonHostPartReplacer)},t.prototype._convertColonHostContext=function(t){return this._convertColonRule(t,hc,this._colonHostContextPartReplacer)},t.prototype._convertColonRule=function(t,e,n){return Xn.replaceAllMapped(t,e,function(t){if(a(t[2])){for(var e=t[2].split(","),i=[],r=0;r<e.length;r++){var s=e[r];if(u(s))break;s=s.trim(),i.push(n(fc,s,t[3]))}return i.join(",")}return fc+t[3]})},t.prototype._colonHostContextPartReplacer=function(t,e,n){return Xn.contains(e,uc)?this._colonHostPartReplacer(t,e,n):t+e+n+", "+e+" "+t+n},t.prototype._colonHostPartReplacer=function(t,e,n){return t+Xn.replace(e,uc,"")+n},t.prototype._convertShadowDOMSelectors=function(t){for(var e=0;e<dc.length;e++)t=Xn.replaceAll(t,dc[e]," ");return t},t.prototype._scopeSelectors=function(t,e,n){var i=this;return ue(t,function(t){var r=t.selector,s=t.content;return"@"!=t.selector[0]||t.selector.startsWith("@page")?r=i._scopeSelector(t.selector,e,n,i.strictStyling):t.selector.startsWith("@media")&&(s=i._scopeSelectors(t.content,e,n)),new Ac(r,s)})},t.prototype._scopeSelector=function(t,e,n,i){for(var r=[],s=t.split(","),o=0;o<s.length;o++){var a=s[o].trim(),u=Xn.split(a,vc),p=u[0];this._selectorNeedsScoping(p,e)&&(u[0]=i&&!Xn.contains(p,fc)?this._applyStrictSelectorScope(p,e):this._applySelectorScope(p,e,n)),r.push(u.join(" "))}return r.join(", ")},t.prototype._selectorNeedsScoping=function(t,e){var n=this._makeScopeMatcher(e);return!a($n.firstMatch(n,t))},t.prototype._makeScopeMatcher=function(t){var e=/\[/g,n=/\]/g;return t=Xn.replaceAll(t,e,"\\["),t=Xn.replaceAll(t,n,"\\]"),$n.create("^("+t+")"+mc,"m")},t.prototype._applySelectorScope=function(t,e,n){return this._applySimpleSelectorScope(t,e,n)},t.prototype._applySimpleSelectorScope=function(t,e,n){if(a($n.firstMatch(yc,t))){var i=this.strictStyling?"["+n+"]":e;return t=Xn.replace(t,fc,i),Xn.replaceAll(t,yc,i+" ")}return e+" "+t},t.prototype._applyStrictSelectorScope=function(t,e){var n=/\[is=([^\]]*)\]/g;e=Xn.replaceAllMapped(e,n,function(t){return t[1]});for(var i=[" ",">","+","~"],r=t,s="["+e+"]",o=0;o<i.length;o++){var u=i[o],p=r.split(u);r=p.map(function(t){var e=Xn.replaceAll(t.trim(),yc,"");if(e.length>0&&!ir.contains(i,e)&&!Xn.contains(e,s)){var n=/([^:]*)(:*)(.*)/g,r=$n.firstMatch(n,e);a(r)&&(t=r[1]+s+r[2]+r[3])}return t}).join(u)}return r},t.prototype._insertPolyfillHostInCssText=function(t){return t=Xn.replaceAll(t,_c,pc),t=Xn.replaceAll(t,gc,uc)},t}(),sc=/polyfill-next-selector[^}]*content:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,oc=/(polyfill-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,ac=/(polyfill-unscoped-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,uc="-shadowcsshost",pc="-shadowcsscontext",cc=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",lc=$n.create("("+uc+cc,"im"),hc=$n.create("("+pc+cc,"im"),fc=uc+"-no-combinator",dc=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],vc=/(?:>>>)|(?:\/deep\/)/g,mc="([>\\s~+[.,{:][\\s\\S]*)?$",yc=$n.create(uc,"im"),gc=/:host/gim,_c=/:host-context/gim,wc=/\/\*[\s\S]*?\*\//g,xc=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Ec=/([{}])/g,Cc="{",Sc="}",bc="%BLOCK%",Ac=function(){function t(t,e){this.selector=t,this.content=e}return t}(),Tc=function(){function t(t,e){this.escapedString=t,this.blocks=e}return t}(),Pc="%COMP%",kc="_nghost-"+Pc,Ic="_ngcontent-"+Pc,Mc=function(){function t(t,e,n){this.moduleUrl=t,this.isShimmed=e,this.valuePlaceholder=n}return t}(),Nc=function(){function t(t,e,n){this.statements=t,this.stylesVar=e,this.dependencies=n}return t}(),Oc=function(){function t(t){this._urlResolver=t,this._shadowCss=new rc}return t.prototype.compileComponent=function(t){var n=t.template.encapsulation===e.ViewEncapsulation.Emulated;return this._compileStyles(ce(t),t.template.styles,t.template.styleUrls,n)},t.prototype.compileStylesheet=function(t,e,n){var i=ft(this._urlResolver,t,e);return this._compileStyles(ce(null),[i.style],i.styleUrls,n)},t.prototype._compileStyles=function(t,e,n,i){for(var r=this,s=e.map(function(t){return Jt(r._shimIfNeeded(t,i))}),o=[],a=0;a<n.length;a++){var u=new ka({name:ce(null)});o.push(new Mc(n[a],i,u)),s.push(new _p(u))}var p=Kt(t).set(Yt(s,new tp(np,[Lu.Const]))).toDeclStmt(null,[dp.Final]);return new Nc([p],t,o)},t.prototype._shimIfNeeded=function(t,e){return e?this._shadowCss.shimCssText(t,Ic,kc):t},t}();Oc.decorators=[{type:e.Injectable}],Oc.ctorParameters=[{type:Ca}];var Rc=function(){function t(){}return t.fromValue=function(t){return le(_u.ViewType,t)},t}();Rc.HOST=Rc.fromValue(Si.HOST),Rc.COMPONENT=Rc.fromValue(Si.COMPONENT),Rc.EMBEDDED=Rc.fromValue(Si.EMBEDDED);var Dc=function(){function t(){}return t.fromValue=function(t){return le(_u.ViewEncapsulation,t)},t}();Dc.Emulated=Dc.fromValue(e.ViewEncapsulation.Emulated),Dc.Native=Dc.fromValue(e.ViewEncapsulation.Native),Dc.None=Dc.fromValue(e.ViewEncapsulation.None);var Vc=function(){function t(){}return t.fromValue=function(t){return le(_u.ChangeDetectorState,t)},t}();Vc.NeverChecked=Vc.fromValue(mi.NeverChecked),Vc.CheckedBefore=Vc.fromValue(mi.CheckedBefore),Vc.Errored=Vc.fromValue(mi.Errored);

var Lc=function(){function t(){}return t.fromValue=function(t){return le(_u.ChangeDetectionStrategy,t)},t}();Lc.CheckOnce=Lc.fromValue(e.ChangeDetectionStrategy.CheckOnce),Lc.Checked=Lc.fromValue(e.ChangeDetectionStrategy.Checked),Lc.CheckAlways=Lc.fromValue(e.ChangeDetectionStrategy.CheckAlways),Lc.Detached=Lc.fromValue(e.ChangeDetectionStrategy.Detached),Lc.OnPush=Lc.fromValue(e.ChangeDetectionStrategy.OnPush),Lc.Default=Lc.fromValue(e.ChangeDetectionStrategy.Default);var Uc=function(){function t(){}return t}();Uc.viewUtils=Kt("viewUtils"),Uc.parentInjector=Kt("parentInjector"),Uc.declarationEl=Kt("declarationEl");var Fc=function(){function t(){}return t}();Fc.renderer=Ip.prop("renderer"),Fc.projectableNodes=Ip.prop("projectableNodes"),Fc.viewUtils=Ip.prop("viewUtils");var Bc=function(){function t(){}return t}();Bc.event=Kt("$event");var jc=function(){function t(){}return t}();jc.token=Kt("token"),jc.requestNodeIndex=Kt("requestNodeIndex"),jc.notFoundResult=Kt("notFoundResult");var qc=function(){function t(){}return t}();qc.throwOnChange=Kt("throwOnChange"),qc.changes=Kt("changes"),qc.changed=Kt("changed"),qc.valUnwrapper=Kt("valUnwrapper");var Hc,Qc=function(){function t(t,e){this.view=t,this.values=e}return t}(),Wc=function(){function t(t,e,n,i){this.meta=t,this.queryList=e,this.ownerDirectiveExpression=n,this.view=i,this._values=new Qc(i,[])}return t.prototype.addValue=function(t,e){for(var n=e,i=[];a(n)&&n!==this.view;){var r=n.declarationElement;i.unshift(r),n=r.view}var s=he(this.queryList,e,this.view),o=this._values;i.forEach(function(t){var e=o.values.length>0?o.values[o.values.length-1]:null;if(e instanceof Qc&&e.view===t.embeddedView)o=e;else{var n=new Qc(t.embeddedView,[]);o.values.push(n),o=n}}),o.values.push(t),i.length>0&&e.dirtyParentQueriesMethod.addStmt(s.callMethod("setDirty",[]).toStmt())},t.prototype.afterChildren=function(t){var e=ge(this._values),n=[this.queryList.callMethod("reset",[Yt(e)]).toStmt()];if(a(this.ownerDirectiveExpression)){var i=this.meta.first?this.queryList.prop("first"):this.queryList;n.push(this.ownerDirectiveExpression.prop(this.meta.propertyName).set(i).toStmt())}this.meta.first||n.push(this.queryList.callMethod("notifyOnChanges",[]).toStmt()),t.addStmt(new Hp(this.queryList.prop("dirty"),n))},t}(),zc=function(){function t(t,e){this.nodeIndex=t,this.sourceAst=e}return t}(),Kc=new zc(null,null),Xc=function(){function t(t){this._view=t,this._newState=Kc,this._currState=Kc,this._bodyStatements=[],this._debugEnabled=this._view.genConfig.genDebugInfo}return t.prototype._updateDebugContextIfNeeded=function(){if(this._newState.nodeIndex!==this._currState.nodeIndex||this._newState.sourceAst!==this._currState.sourceAst){var t=this._updateDebugContext(this._newState);a(t)&&this._bodyStatements.push(t.toStmt())}},t.prototype._updateDebugContext=function(t){if(this._currState=this._newState=t,this._debugEnabled){var e=a(t.sourceAst)?t.sourceAst.sourceSpan.start:null;return Ip.callMethod("debug",[Jt(t.nodeIndex),a(e)?Jt(e.line):Np,a(e)?Jt(e.col):Np])}return null},t.prototype.resetDebugInfoExpr=function(t,e){var n=this._updateDebugContext(new zc(t,e));return a(n)?n:Np},t.prototype.resetDebugInfo=function(t,e){this._newState=new zc(t,e)},t.prototype.addStmt=function(t){this._updateDebugContextIfNeeded(),this._bodyStatements.push(t)},t.prototype.addStmts=function(t){this._updateDebugContextIfNeeded(),ir.addAll(this._bodyStatements,t)},t.prototype.finish=function(){return this._bodyStatements},t.prototype.isEmpty=function(){return 0===this._bodyStatements.length},t}(),Gc=function(){function t(t,e,n,i,r){this.parent=t,this.view=e,this.nodeIndex=n,this.renderNode=i,this.sourceAst=r}return t.prototype.isNull=function(){return u(this.renderNode)},t.prototype.isRootElement=function(){return this.view!=this.parent.view},t}(),Jc=function(e){function n(t,n,i,r,s,o,u,p,c,l,h){var f=this;e.call(this,t,n,i,r,s),this.component=o,this._directives=u,this._resolvedProvidersArray=p,this.hasViewContainer=c,this.hasEmbeddedView=l,this._compViewExpr=null,this._instances=new Ra,this._queryCount=0,this._queries=new Ra,this._componentConstructorViewQueryLists=[],this.contentNodesByNgContentIndex=null,this.referenceTokens={},h.forEach(function(t){return f.referenceTokens[t.name]=t.value}),this.elementRef=Xt(_u.ElementRef).instantiate([this.renderNode]),this._instances.add(Ot(_u.ElementRef),this.elementRef),this.injector=Ip.callMethod("injector",[Jt(this.nodeIndex)]),this._instances.add(Ot(_u.Injector),this.injector),this._instances.add(Ot(_u.Renderer),Ip.prop("renderer")),(this.hasViewContainer||this.hasEmbeddedView||a(this.component))&&this._createAppElement()}return __extends(n,e),n.createNull=function(){return new n(null,null,null,null,null,null,[],[],!1,!1,[])},n.prototype._createAppElement=function(){var t="_appEl_"+this.nodeIndex,e=this.isRootElement()?null:this.parent.nodeIndex;this.view.fields.push(new Fp(t,Gt(_u.AppElement),[dp.Private]));var n=Ip.prop(t).set(Xt(_u.AppElement).instantiate([Jt(this.nodeIndex),Jt(e),Ip,this.renderNode])).toStmt();this.view.createMethod.addStmt(n),this.appElement=Ip.prop(t),this._instances.add(Ot(_u.AppElement),this.appElement)},n.prototype.setComponentView=function(t){this._compViewExpr=t,this.contentNodesByNgContentIndex=ir.createFixedSize(this.component.template.ngContentSelectors.length);for(var e=0;e<this.contentNodesByNgContentIndex.length;e++)this.contentNodesByNgContentIndex[e]=[]},n.prototype.setEmbeddedView=function(e){if(this.embeddedView=e,a(e)){var n=Xt(_u.TemplateRef_).instantiate([this.appElement,this.embeddedView.viewFactory]),i=new Ma({token:Ot(_u.TemplateRef),useValue:n});this._resolvedProvidersArray.unshift(new hi(i.token,!1,!0,[i],t.ProviderAstType.Builtin,this.sourceAst.sourceSpan))}},n.prototype.beforeChildren=function(){var t=this;this.hasViewContainer&&this._instances.add(Ot(_u.ViewContainerRef),this.appElement.prop("vcRef")),this._resolvedProviders=new Ra,this._resolvedProvidersArray.forEach(function(e){return t._resolvedProviders.add(e.token,e)}),this._resolvedProviders.values().forEach(function(e){var n=e.providers.map(function(n){if(a(n.useExisting))return t._getDependency(e.providerType,new Ia({token:n.useExisting}));if(a(n.useFactory)){var i=a(n.deps)?n.deps:n.useFactory.diDeps,r=i.map(function(n){return t._getDependency(e.providerType,n)});return Xt(n.useFactory).callFn(r)}if(a(n.useClass)){var i=a(n.deps)?n.deps:n.useClass.diDeps,r=i.map(function(n){return t._getDependency(e.providerType,n)});return Xt(n.useClass).instantiate(r,Gt(n.useClass))}return Se(n.useValue)}),i="_"+e.token.name+"_"+t.nodeIndex+"_"+t._instances.size,r=Ce(i,e,n,e.multiProvider,e.eager,t);t._instances.add(e.token,r)}),this.directiveInstances=this._directives.map(function(e){return t._instances.get(Ot(e.type))});for(var e=0;e<this.directiveInstances.length;e++){var n=this.directiveInstances[e],i=this._directives[e];i.queries.forEach(function(e){t._addQuery(e,n)})}var r=[];if(this._resolvedProviders.values().forEach(function(e){var n=t._getQueriesFor(e.token);ir.addAll(r,n.map(function(t){return new Yc(t,e.token)}))}),nr.forEach(this.referenceTokens,function(e,n){var i,s=t.referenceTokens[n];i=a(s)?t._instances.get(s):t.renderNode,t.view.locals.set(n,i);var o=new Oa({value:n});ir.addAll(r,t._getQueriesFor(o).map(function(t){return new Yc(t,o)}))}),r.forEach(function(e){var n;if(a(e.read.identifier))n=t._instances.get(e.read);else{var i=t.referenceTokens[e.read.value];n=a(i)?t._instances.get(i):t.elementRef}a(n)&&e.query.addValue(n,t.view)}),a(this.component)){var s=a(this.component)?Yt(this._componentConstructorViewQueryLists):Np,o=a(this.getComponent())?this.getComponent():Np;this.view.createMethod.addStmt(this.appElement.callMethod("initComponent",[o,s,this._compViewExpr]).toStmt())}},n.prototype.afterChildren=function(e){var n=this;this._resolvedProviders.values().forEach(function(i){var r=n._instances.get(i.token),s=i.providerType===t.ProviderAstType.PrivateService?0:e;n.view.injectorGetMethod.addStmt(Ee(n.nodeIndex,s,i,r))}),this._queries.values().forEach(function(t){return t.forEach(function(t){return t.afterChildren(n.view.updateContentQueriesMethod)})})},n.prototype.addContentNode=function(t,e){this.contentNodesByNgContentIndex[t].push(e)},n.prototype.getComponent=function(){return a(this.component)?this._instances.get(Ot(this.component.type)):null},n.prototype.getProviderTokens=function(){return this._resolvedProviders.values().map(function(t){return ve(t.token)})},n.prototype._getQueriesFor=function(t){for(var e,n=[],i=this,r=0;!i.isNull();)e=i._queries.get(t),a(e)&&ir.addAll(n,e.filter(function(t){return t.meta.descendants||1>=r})),i._directives.length>0&&r++,i=i.parent;return e=this.view.componentView.viewQueries.get(t),a(e)&&ir.addAll(n,e),n},n.prototype._addQuery=function(t,e){var n="_query_"+t.selectors[0].name+"_"+this.nodeIndex+"_"+this._queryCount++,i=we(t,e,n,this.view),r=new Wc(t,i,e,this.view);return xe(this._queries,r),r},n.prototype._getLocalDependency=function(e,n){var i=null;if(u(i)&&a(n.query)&&(i=this._addQuery(n.query,null).queryList),u(i)&&a(n.viewQuery)&&(i=we(n.viewQuery,null,"_viewQuery_"+n.viewQuery.selectors[0].name+"_"+this.nodeIndex+"_"+this._componentConstructorViewQueryLists.length,this.view),this._componentConstructorViewQueryLists.push(i)),a(n.token)){if(u(i)&&n.token.equalsTo(Ot(_u.ChangeDetectorRef)))return e===t.ProviderAstType.Component?this._compViewExpr.prop("ref"):he(Ip.prop("ref"),this.view,this.view.componentView);u(i)&&(i=this._instances.get(n.token))}return i},n.prototype._getDependency=function(e,n){var i=this,r=null;for(n.isValue&&(r=Jt(n.value)),u(r)&&!n.isSkipSelf&&(r=this._getLocalDependency(e,n));u(r)&&!i.parent.isNull();)i=i.parent,r=i._getLocalDependency(t.ProviderAstType.PublicService,new Ia({token:n.token}));return u(r)&&(r=fe(n.token,n.isOptional)),u(r)&&(r=Np),he(r,this.view,i.view)},n}(Gc),Yc=function(){function t(t,e){this.query=t,this.read=a(t.meta.read)?t.meta.read:e}return t}(),$c=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.visitArray=function(t,e){var n=this;return Yt(t.map(function(t){return yt(t,n,e)}))},n.prototype.visitStringMap=function(t,e){var n=this,i=[];return nr.forEach(t,function(t,r){i.push([r,yt(t,n,e)])}),$t(i)},n.prototype.visitPrimitive=function(t,e){return Jt(t)},n.prototype.visitOther=function(t,n){if(t instanceof ka)return Xt(t);if(t instanceof up)return t;throw new e.BaseException("Illegal state: Don't now how to compile value "+t)},n}(wa),Zc=function(){function t(t,e,n){this.view=t,this.instance=e,this.argCount=n}return t}(),tl=function(){function t(t,e){this.view=t,this.meta=e,this._purePipeProxies=[],this.instance=Ip.prop("_pipe_"+e.name+"_"+t.pipeCount++)}return t.call=function(e,n,i){var r,s=e.componentView,o=be(s,n);return o.pure?(r=s.purePipes.get(n),u(r)&&(r=new t(s,o),s.purePipes.set(n,r),s.pipes.push(r))):(r=new t(e,o),e.pipes.push(r)),r._call(e,i)},Object.defineProperty(t.prototype,"pure",{get:function(){return this.meta.pure},enumerable:!0,configurable:!0}),t.prototype.create=function(){var t=this,e=this.meta.type.diDeps.map(function(e){return e.token.equalsTo(Ot(_u.ChangeDetectorRef))?he(Ip.prop("ref"),t.view,t.view.componentView):fe(e.token,!1)});this.view.fields.push(new Fp(this.instance.name,Gt(this.meta.type))),this.view.createMethod.resetDebugInfo(null,null),this.view.createMethod.addStmt(Ip.prop(this.instance.name).set(Xt(this.meta.type).instantiate(e)).toStmt()),this._purePipeProxies.forEach(function(e){var n=he(t.instance,e.view,t.view);ye(n.prop("transform").callMethod(pp.bind,[n]),e.argCount,e.instance,e.view)})},t.prototype._call=function(t,e){if(this.meta.pure){var n=new Zc(t,Ip.prop(this.instance.name+"_"+this._purePipeProxies.length),e.length);return this._purePipeProxies.push(n),Xt(_u.castByValue).callFn([n.instance,he(this.instance.prop("transform"),t,this.view)]).callFn(e)}return he(this.instance,t,this.view).callMethod("transform",e)},t}(),el=function(){function t(t,e,n,i,r,s,o){var u=this;this.component=t,this.genConfig=e,this.pipeMetas=n,this.styles=i,this.viewIndex=r,this.declarationElement=s,this.templateVariableBindings=o,this.nodes=[],this.rootNodesOrAppElements=[],this.bindings=[],this.classStatements=[],this.eventHandlerMethods=[],this.fields=[],this.getters=[],this.disposables=[],this.subscriptions=[],this.purePipes=new Map,this.pipes=[],this.locals=new Map,this.literalArrayCount=0,this.literalMapCount=0,this.pipeCount=0,this.createMethod=new Xc(this),this.injectorGetMethod=new Xc(this),this.updateContentQueriesMethod=new Xc(this),this.dirtyParentQueriesMethod=new Xc(this),this.updateViewQueriesMethod=new Xc(this),this.detectChangesInInputsMethod=new Xc(this),this.detectChangesRenderPropertiesMethod=new Xc(this),this.afterContentLifecycleCallbacksMethod=new Xc(this),this.afterViewLifecycleCallbacksMethod=new Xc(this),this.destroyMethod=new Xc(this),this.viewType=Ae(t,r),this.className="_View_"+t.type.name+r,this.classType=Gt(new ka({name:this.className})),this.viewFactory=Kt(de(t,r)),this.componentView=this.viewType===Si.COMPONENT||this.viewType===Si.HOST?this:this.declarationElement.view.componentView,this.componentContext=he(Ip.prop("context"),this,this.componentView);var p=new Ra;if(this.viewType===Si.COMPONENT){var c=Ip.prop("context");ir.forEachWithIndex(this.component.viewQueries,function(t,e){var n="_viewQuery_"+t.selectors[0].name+"_"+e,i=we(t,c,n,u),r=new Wc(t,i,c,u);xe(p,r)});var l=0;this.component.type.diDeps.forEach(function(t){if(a(t.viewQuery)){var e=Ip.prop("declarationAppElement").prop("componentConstructorViewQueries").key(Jt(l++)),n=new Wc(t.viewQuery,e,null,u);xe(p,n)}})}this.viewQueries=p,o.forEach(function(t){u.locals.set(t[1],Ip.prop("context").prop(t[0]))}),this.declarationElement.isNull()||this.declarationElement.setEmbeddedView(this)}return t.prototype.callPipe=function(t,e,n){return tl.call(this,t,[e].concat(n))},t.prototype.getLocal=function(t){if(t==Bc.event.name)return Bc.event;for(var e=this,n=e.locals.get(t);u(n)&&a(e.declarationElement.view);)e=e.declarationElement.view,n=e.locals.get(t);return a(n)?he(n,this,e):null},t.prototype.createLiteralArray=function(t){if(0===t.length)return Xt(_u.EMPTY_ARRAY);for(var e=Ip.prop("_arr_"+this.literalArrayCount++),n=[],i=[],r=0;r<t.length;r++){var s="p"+r;n.push(new Cp(s)),i.push(Kt(s))}return ye(te(n,[new Lp(Yt(i))]),t.length,e,this),e.callFn(t)},t.prototype.createLiteralMap=function(t){if(0===t.length)return Xt(_u.EMPTY_MAP);for(var e=Ip.prop("_map_"+this.literalMapCount++),n=[],i=[],r=[],s=0;s<t.length;s++){var o="p"+s;n.push(new Cp(o)),i.push([t[s][0],Kt(o)]),r.push(t[s][1])}return ye(te(n,[new Lp($t(i))]),t.length,e,this),e.callFn(r)},t.prototype.afterNodes=function(){var t=this;this.pipes.forEach(function(t){return t.create()}),this.viewQueries.values().forEach(function(e){return e.forEach(function(e){return e.afterChildren(t.updateViewQueriesMethod)})})},t}(),nl="$implicit",il="class",rl="style",sl=Kt("parentRenderNode"),ol=Kt("rootSelector"),al=function(){function t(t,e){this.comp=t,this.factoryPlaceholder=e}return t}(),ul=function(){function t(t,e){this.view=t,this.targetDependencies=e,this.nestedViewCount=0}return t.prototype._isRootNode=function(t){return t.view!==this.view},t.prototype._addRootNodeAndProject=function(t,e,n){var i=t instanceof Jc&&t.hasViewContainer?t.appElement:null;this._isRootNode(n)?this.view.viewType!==Si.COMPONENT&&this.view.rootNodesOrAppElements.push(a(i)?i:t.renderNode):a(n.component)&&a(e)&&n.addContentNode(e,a(i)?i:t.renderNode)},t.prototype._getParentRenderNode=function(t){return this._isRootNode(t)?this.view.viewType===Si.COMPONENT?sl:Np:a(t.component)&&t.component.template.encapsulation!==e.ViewEncapsulation.Native?Np:t.renderNode},t.prototype.visitBoundText=function(t,e){return this._visitText(t,"",t.ngContentIndex,e)},t.prototype.visitText=function(t,e){return this._visitText(t,t.value,t.ngContentIndex,e)},t.prototype._visitText=function(t,e,n,i){var r="_text_"+this.view.nodes.length;this.view.fields.push(new Fp(r,Gt(this.view.genConfig.renderTypes.renderText)));var s=Ip.prop(r),o=new Gc(i,this.view,this.view.nodes.length,s,t),a=Ip.prop(r).set(Fc.renderer.callMethod("createText",[this._getParentRenderNode(i),Jt(e),this.view.createMethod.resetDebugInfoExpr(this.view.nodes.length,t)])).toStmt();return this.view.nodes.push(o),this.view.createMethod.addStmt(a),this._addRootNodeAndProject(o,n,i),s},t.prototype.visitNgContent=function(t,e){this.view.createMethod.resetDebugInfo(null,t);var n=this._getParentRenderNode(e),i=Fc.projectableNodes.key(Jt(t.index),new tp(Gt(this.view.genConfig.renderTypes.renderNode)));return n!==Np?this.view.createMethod.addStmt(Fc.renderer.callMethod("projectNodes",[n,Xt(_u.flattenNestedViewRenderNodes).callFn([i])]).toStmt()):this._isRootNode(e)?this.view.viewType!==Si.COMPONENT&&this.view.rootNodesOrAppElements.push(i):a(e.component)&&a(t.ngContentIndex)&&e.addContentNode(t.ngContentIndex,i),null},t.prototype.visitElement=function(t,e){var n,i=this.view.nodes.length,r=this.view.createMethod.resetDebugInfoExpr(i,t);n=0===i&&this.view.viewType===Si.HOST?Ip.callMethod("selectOrCreateHostElement",[Jt(t.name),ol,r]):Fc.renderer.callMethod("createElement",[this._getParentRenderNode(e),Jt(t.name),r]);var s="_el_"+i;this.view.fields.push(new Fp(s,Gt(this.view.genConfig.renderTypes.renderElement))),this.view.createMethod.addStmt(Ip.prop(s).set(n).toStmt());for(var o=Ip.prop(s),u=t.directives.map(function(t){return t.directive}),p=u.find(function(t){return t.isComponent}),c=Ie(t.attrs),l=ke(c,u),h=0;h<l.length;h++){var f=l[h][0],d=l[h][1];this.view.createMethod.addStmt(Fc.renderer.callMethod("setElementAttribute",[o,Jt(f),Jt(d)]).toStmt())}var v=new Jc(e,this.view,i,o,t,p,u,t.providers,t.hasViewContainer,!1,t.references);this.view.nodes.push(v);var m=null;if(a(p)){var y=new ka({name:de(p,0)});this.targetDependencies.push(new al(p,y)),m=Kt("compView_"+i),v.setComponentView(m),this.view.createMethod.addStmt(m.set(Xt(y).callFn([Fc.viewUtils,v.injector,v.appElement])).toDeclStmt())}if(v.beforeChildren(),this._addRootNodeAndProject(v,t.ngContentIndex,e),S(this,t.children,v),v.afterChildren(this.view.nodes.length-i-1),a(m)){var g;g=this.view.component.type.isHost?Fc.projectableNodes:Yt(v.contentNodesByNgContentIndex.map(function(t){return me(t)})),this.view.createMethod.addStmt(m.callMethod("create",[v.getComponent(),g,Np]).toStmt())}return null},t.prototype.visitEmbeddedTemplate=function(t,e){var n=this.view.nodes.length,i="_anchor_"+n;this.view.fields.push(new Fp(i,Gt(this.view.genConfig.renderTypes.renderComment))),this.view.createMethod.addStmt(Ip.prop(i).set(Fc.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(e),this.view.createMethod.resetDebugInfoExpr(n,t)])).toStmt());var r=Ip.prop(i),s=t.variables.map(function(t){return[t.value.length>0?t.value:nl,t.name]}),o=t.directives.map(function(t){return t.directive}),a=new Jc(e,this.view,n,r,t,null,o,t.providers,t.hasViewContainer,!0,t.references);this.view.nodes.push(a),this.nestedViewCount++;var u=new el(this.view.component,this.view.genConfig,this.view.pipeMetas,Np,this.view.viewIndex+this.nestedViewCount,a,s);return this.nestedViewCount+=Te(u,t.children,this.targetDependencies),a.beforeChildren(),this._addRootNodeAndProject(a,t.ngContentIndex,e),a.afterChildren(0),null},t.prototype.visitAttr=function(t,e){return null},t.prototype.visitDirective=function(t,e){return null},t.prototype.visitEvent=function(t,e){return null},t.prototype.visitReference=function(t,e){return null},t.prototype.visitVariable=function(t,e){return null},t.prototype.visitDirectiveProperty=function(t,e){return null},t.prototype.visitElementProperty=function(t,e){return null},t}(),pl=Kt("#implicit"),cl=function(){function t(t,e){this.expression=t,this.needsValueUnwrapper=e}return t}();!function(t){t[t.Statement=0]="Statement",t[t.Expression=1]="Expression"}(Hc||(Hc={}));var ll=function(){function t(t,e,n){this._nameResolver=t,this._implicitReceiver=e,this._valueUnwrapper=n,this.needsValueUnwrapper=!1}return t.prototype.visitBinary=function(t,e){var n;switch(t.operation){case"+":n=Yu.Plus;break;case"-":n=Yu.Minus;break;case"*":n=Yu.Multiply;break;case"/":n=Yu.Divide;break;case"%":n=Yu.Modulo;break;case"&&":n=Yu.And;break;case"||":n=Yu.Or;break;case"==":n=Yu.Equals;break;case"!=":n=Yu.NotEquals;break;case"===":n=Yu.Identical;break;case"!==":n=Yu.NotIdentical;break;case"<":n=Yu.Lower;break;case">":n=Yu.Bigger;break;case"<=":n=Yu.LowerEquals;break;case">=":n=Yu.BiggerEquals;break;default:throw new or("Unsupported operation "+t.operation)}return ze(e,new bp(n,t.left.visit(this,Hc.Expression),t.right.visit(this,Hc.Expression)))},t.prototype.visitChain=function(t,e){return Qe(e,t),this.visitAll(t.expressions,e)},t.prototype.visitConditional=function(t,e){var n=t.condition.visit(this,Hc.Expression);return ze(e,n.conditional(t.trueExp.visit(this,Hc.Expression),t.falseExp.visit(this,Hc.Expression)))},t.prototype.visitPipe=function(t,e){var n=t.exp.visit(this,Hc.Expression),i=this.visitAll(t.args,Hc.Expression),r=this._nameResolver.callPipe(t.name,n,i);return this.needsValueUnwrapper=!0,ze(e,this._valueUnwrapper.callMethod("unwrap",[r]))},t.prototype.visitFunctionCall=function(t,e){return ze(e,t.target.visit(this,Hc.Expression).callFn(this.visitAll(t.args,Hc.Expression)))},t.prototype.visitImplicitReceiver=function(t,e){return We(e,t),pl},t.prototype.visitInterpolation=function(t,e){We(e,t);for(var n=[Jt(t.expressions.length)],i=0;i<t.strings.length-1;i++)n.push(Jt(t.strings[i])),n.push(t.expressions[i].visit(this,Hc.Expression));return n.push(Jt(t.strings[t.strings.length-1])),Xt(_u.interpolate).callFn(n)},t.prototype.visitKeyedRead=function(t,e){return ze(e,t.obj.visit(this,Hc.Expression).key(t.key.visit(this,Hc.Expression)))},t.prototype.visitKeyedWrite=function(t,e){var n=t.obj.visit(this,Hc.Expression),i=t.key.visit(this,Hc.Expression),r=t.value.visit(this,Hc.Expression);return ze(e,n.key(i).set(r))},t.prototype.visitLiteralArray=function(t,e){return ze(e,this._nameResolver.createLiteralArray(this.visitAll(t.expressions,e)))},t.prototype.visitLiteralMap=function(t,e){for(var n=[],i=0;i<t.keys.length;i++)n.push([t.keys[i],t.values[i].visit(this,Hc.Expression)]);return ze(e,this._nameResolver.createLiteralMap(n))},t.prototype.visitLiteralPrimitive=function(t,e){return ze(e,Jt(t.value))},t.prototype.visitMethodCall=function(t,e){var n=this.visitAll(t.args,Hc.Expression),i=null,r=t.receiver.visit(this,Hc.Expression);if(r===pl){var s=this._nameResolver.getLocal(t.name);a(s)?i=s.callFn(n):r=this._implicitReceiver}return u(i)&&(i=r.callMethod(t.name,n)),ze(e,i)},t.prototype.visitPrefixNot=function(t,e){return ze(e,Zt(t.expression.visit(this,Hc.Expression)))},t.prototype.visitPropertyRead=function(t,e){var n=null,i=t.receiver.visit(this,Hc.Expression);return i===pl&&(n=this._nameResolver.getLocal(t.name),u(n)&&(i=this._implicitReceiver)),u(n)&&(n=i.prop(t.name)),ze(e,n)},t.prototype.visitPropertyWrite=function(t,e){var n=t.receiver.visit(this,Hc.Expression);if(n===pl){var i=this._nameResolver.getLocal(t.name);if(a(i))throw new or("Cannot assign to a reference or variable!");n=this._implicitReceiver}return ze(e,n.prop(t.name).set(t.value.visit(this,Hc.Expression)))},t.prototype.visitSafePropertyRead=function(t,e){var n=t.receiver.visit(this,Hc.Expression);return ze(e,n.isBlank().conditional(Np,n.prop(t.name)))},t.prototype.visitSafeMethodCall=function(t,e){var n=t.receiver.visit(this,Hc.Expression),i=this.visitAll(t.args,Hc.Expression);return ze(e,n.isBlank().conditional(Np,n.callMethod(t.name,i)))},t.prototype.visitAll=function(t,e){var n=this;return t.map(function(t){return t.visit(n,e)})},t.prototype.visitQuote=function(t,e){throw new or("Quotes are not supported for evaluation!")},t}(),hl=function(){function t(t,e){this.node=t,this.sourceAst=e}return t}(),fl=function(){function t(t,e,n,i){this.compileElement=t,this.eventTarget=e,this.eventName=n,this._hasComponentHostListener=!1,this._actionResultExprs=[],this._method=new Xc(t.view),this._methodName="_handle_"+pn(n)+"_"+t.nodeIndex+"_"+i,this._eventParam=new Cp(Bc.event.name,Gt(this.compileElement.view.genConfig.renderTypes.renderEvent))}return t.getOrCreate=function(e,n,i,r){var s=r.find(function(t){return t.eventTarget==n&&t.eventName==i});return u(s)&&(s=new t(e,n,i,r.length),r.push(s)),s},t.prototype.addAction=function(t,e,n){a(e)&&e.isComponent&&(this._hasComponentHostListener=!0),this._method.resetDebugInfo(this.compileElement.nodeIndex,t);var i=a(n)?n:this.compileElement.view.componentContext,r=He(this.compileElement.view,i,t.handler),s=r.length-1;if(s>=0){var o=r[s],u=un(o),p=Kt("pd_"+this._actionResultExprs.length);this._actionResultExprs.push(p),a(u)&&(r[s]=p.set(u.cast(np).notIdentical(Jt(!1))).toDeclStmt(null,[dp.Final]))}this._method.addStmts(r)},t.prototype.finishMethod=function(){var t=this._hasComponentHostListener?this.compileElement.appElement.prop("componentView"):Ip,e=Jt(!0);this._actionResultExprs.forEach(function(t){e=e.and(t)});var n=[t.callMethod("markPathToRootAsCheckOnce",[]).toStmt()].concat(this._method.finish()).concat([new Lp(e)]);this.compileElement.view.eventHandlerMethods.push(new Bp(this._methodName,[this._eventParam],n,ip,[dp.Private]))},t.prototype.listenToRenderer=function(){var t,e=Ip.callMethod("eventHandler",[Ip.prop(this._methodName).callMethod(pp.bind,[Ip])]);t=a(this.eventTarget)?Fc.renderer.callMethod("listenGlobal",[Jt(this.eventTarget),Jt(this.eventName),e]):Fc.renderer.callMethod("listen",[this.compileElement.renderNode,Jt(this.eventName),e]);var n=Kt("disposable_"+this.compileElement.view.disposables.length);this.compileElement.view.disposables.push(n),this.compileElement.view.createMethod.addStmt(n.set(t).toDeclStmt(op,[dp.Private]))},t.prototype.listenToDirective=function(t,e){var n=Kt("subscription_"+this.compileElement.view.subscriptions.length);this.compileElement.view.subscriptions.push(n);var i=Ip.callMethod("eventHandler",[Ip.prop(this._methodName).callMethod(pp.bind,[Ip])]);this.compileElement.view.createMethod.addStmt(n.set(t.prop(e).callMethod(pp.SubscribeObservable,[i])).toDeclStmt(null,[dp.Final]))},t}(),dl=Ip.prop("cdState").identical(Vc.NeverChecked),vl=Zt(qc.throwOnChange),ml=function(){function t(t){this.view=t,this._nodeIndex=0}return t.prototype.visitBoundText=function(t,e){var n=this.view.nodes[this._nodeIndex++];return Ye(t,n,this.view),null},t.prototype.visitText=function(t,e){return this._nodeIndex++,null},t.prototype.visitNgContent=function(t,e){return null},t.prototype.visitElement=function(t,e){var n=this.view.nodes[this._nodeIndex++],i=sn(t.outputs,t.directives,n);return tn(t.inputs,n),an(i),ir.forEachWithIndex(t.directives,function(t,e){var r=n.directiveInstances[e];nn(t,r,n),cn(t,r,n),en(t,r,n),on(t,r,i)}),S(this,t.children,n),ir.forEachWithIndex(t.directives,function(t,e){var i=n.directiveInstances[e];ln(t.directive,i,n),hn(t.directive,i,n),fn(t.directive,i,n)}),null},t.prototype.visitEmbeddedTemplate=function(t,e){var n=this.view.nodes[this._nodeIndex++],i=sn(t.outputs,t.directives,n);return ir.forEachWithIndex(t.directives,function(t,e){var r=n.directiveInstances[e];nn(t,r,n),cn(t,r,n),on(t,r,i),ln(t.directive,r,n),hn(t.directive,r,n),fn(t.directive,r,n)}),vn(n.embeddedView,t.children),null},t.prototype.visitAttr=function(t,e){return null},t.prototype.visitDirective=function(t,e){return null},t.prototype.visitEvent=function(t,e){return null},t.prototype.visitReference=function(t,e){return null},t.prototype.visitVariable=function(t,e){return null},t.prototype.visitDirectiveProperty=function(t,e){return null},t.prototype.visitElementProperty=function(t,e){return null},t}(),yl=function(){function t(t,e,n){this.statements=t,this.viewFactoryVar=e,this.dependencies=n}return t}(),gl=function(){function t(t){this._genConfig=t}return t.prototype.compileComponent=function(t,e,n,i){var r=[],s=[],o=new el(t,this._genConfig,i,n,0,Jc.createNull(),[]);return Te(o,e,s),vn(o,e),Pe(o,r),new yl(r,o.viewFactory.name,s)},t}();gl.decorators=[{type:e.Injectable}],gl.ctorParameters=[{type:zu}];var _l=function(){function t(){}return t.prototype.get=function(t){return null},t}(),wl=function(){function t(t,e,n){this._xhr=t,this._urlResolver=e,this._htmlParser=n}return t.prototype.normalizeDirective=function(t){return t.isComponent?this.normalizeTemplate(t.type,t.template).then(function(e){return new Ua({type:t.type,isComponent:t.isComponent,selector:t.selector,exportAs:t.exportAs,changeDetection:t.changeDetection,inputs:t.inputs,outputs:t.outputs,hostListeners:t.hostListeners,hostProperties:t.hostProperties,hostAttributes:t.hostAttributes,lifecycleHooks:t.lifecycleHooks,providers:t.providers,viewProviders:t.viewProviders,queries:t.queries,viewQueries:t.viewQueries,template:e})}):nc.resolve(t)},t.prototype.normalizeTemplate=function(t,e){var n=this;if(a(e.template))return nc.resolve(this.normalizeLoadedTemplate(t,e,e.template,t.moduleUrl));if(a(e.templateUrl)){var i=this._urlResolver.resolve(t.moduleUrl,e.templateUrl);return this._xhr.get(i).then(function(r){return n.normalizeLoadedTemplate(t,e,r,i)})}throw new or("No template specified for component "+t.name)},t.prototype.normalizeLoadedTemplate=function(t,n,i,r){var s=this,o=this._htmlParser.parse(i,t.name);if(o.errors.length>0){var a=o.errors.join("\n");throw new or("Template parse errors:\n"+a)}var u=new xl;q(u,o.rootNodes);var p=n.styles.concat(u.styles),c=u.styleUrls.filter(ht).map(function(t){return s._urlResolver.resolve(r,t)}).concat(n.styleUrls.filter(ht).map(function(e){return s._urlResolver.resolve(t.moduleUrl,e)})),l=p.map(function(t){var e=ft(s._urlResolver,r,t);return e.styleUrls.forEach(function(t){return c.push(t)}),e.style}),h=n.encapsulation;return h===e.ViewEncapsulation.Emulated&&0===l.length&&0===c.length&&(h=e.ViewEncapsulation.None),new La({encapsulation:h,template:i,templateUrl:r,styles:l,styleUrls:c,ngContentSelectors:u.ngContentSelectors})},t}();wl.decorators=[{type:e.Injectable}],wl.ctorParameters=[{type:_l},{type:Ca},{type:Go}];var xl=function(){function t(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}return t.prototype.visitElement=function(t,e){var n=ct(t);switch(n.type){case Jo.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(n.selectAttr);break;case Jo.STYLE:var i="";t.children.forEach(function(t){t instanceof Qs&&(i+=t.value)}),this.styles.push(i);break;case Jo.STYLESHEET:this.styleUrls.push(n.hrefAttr)}return n.nonBindable&&this.ngNonBindableStackCount++,q(this,t.children),n.nonBindable&&this.ngNonBindableStackCount--,null},t.prototype.visitComment=function(t,e){return null},t.prototype.visitAttr=function(t,e){return null},t.prototype.visitText=function(t,e){return null},t.prototype.visitExpansion=function(t,e){return null},t.prototype.visitExpansionCase=function(t,e){return null},t}(),El=function(){function t(t){this._reflector=a(t)?t:e.reflector}return t.prototype.resolve=function(t){var n=this._reflector.annotations(e.resolveForwardRef(t));if(a(n)){var i=n.find(mn);if(a(i)){var r=this._reflector.propMetadata(t);return this._mergeWithPropertyMetadata(i,r,t)}}throw new or("No Directive annotation found on "+m(t))},t.prototype._mergeWithPropertyMetadata=function(t,n,i){var r=[],s=[],o={},u={};return nr.forEach(n,function(t,n){t.forEach(function(t){if(t instanceof e.InputMetadata&&r.push(a(t.bindingPropertyName)?n+": "+t.bindingPropertyName:n),t instanceof e.OutputMetadata&&s.push(a(t.bindingPropertyName)?n+": "+t.bindingPropertyName:n),t instanceof e.HostBindingMetadata&&(a(t.hostPropertyName)?o["["+t.hostPropertyName+"]"]=n:o["["+n+"]"]=n),t instanceof e.HostListenerMetadata){var i=a(t.args)?t.args.join(", "):"";o["("+t.eventName+")"]=n+"("+i+")"}t instanceof e.ContentChildrenMetadata&&(u[n]=t),t instanceof e.ViewChildrenMetadata&&(u[n]=t),t instanceof e.ContentChildMetadata&&(u[n]=t),t instanceof e.ViewChildMetadata&&(u[n]=t)})}),this._merge(t,r,s,o,u,i)},t.prototype._merge=function(t,n,i,r,s,o){
var u,p=a(t.inputs)?ir.concat(t.inputs,n):n;a(t.outputs)?(t.outputs.forEach(function(t){if(ir.contains(i,t))throw new or("Output event '"+t+"' defined multiple times in '"+m(o)+"'")}),u=ir.concat(t.outputs,i)):u=i;var c=a(t.host)?nr.merge(t.host,r):r,l=a(t.queries)?nr.merge(t.queries,s):s;return t instanceof e.ComponentMetadata?new e.ComponentMetadata({selector:t.selector,inputs:p,outputs:u,host:c,exportAs:t.exportAs,moduleId:t.moduleId,queries:l,changeDetection:t.changeDetection,providers:t.providers,viewProviders:t.viewProviders}):new e.DirectiveMetadata({selector:t.selector,inputs:p,outputs:u,host:c,exportAs:t.exportAs,queries:l,providers:t.providers})},t}();El.decorators=[{type:e.Injectable}],El.ctorParameters=[{type:wi}];var Cl=(new El(e.reflector),function(){function t(t){this._reflector=a(t)?t:e.reflector}return t.prototype.resolve=function(t){var n=this._reflector.annotations(e.resolveForwardRef(t));if(a(n)){var i=n.find(yn);if(a(i))return i}throw new or("No Pipe decorator found on "+m(t))},t}());Cl.decorators=[{type:e.Injectable}],Cl.ctorParameters=[{type:wi}];var Sl=(new Cl(e.reflector),function(){function t(t){this._cache=new tr,this._reflector=a(t)?t:e.reflector}return t.prototype.resolve=function(t){var e=this._cache.get(t);return u(e)&&(e=this._resolve(t),this._cache.set(t,e)),e},t.prototype._resolve=function(t){var n,i;if(this._reflector.annotations(t).forEach(function(t){t instanceof e.ViewMetadata&&(i=t),t instanceof e.ComponentMetadata&&(n=t)}),!a(n)){if(u(i))throw new or("Could not compile '"+m(t)+"' because it is not a component.");return i}if(u(n.template)&&u(n.templateUrl)&&u(i))throw new or("Component '"+m(t)+"' must have either 'template' or 'templateUrl' set.");if(a(n.template)&&a(i))this._throwMixingViewAndComponent("template",t);else if(a(n.templateUrl)&&a(i))this._throwMixingViewAndComponent("templateUrl",t);else if(a(n.directives)&&a(i))this._throwMixingViewAndComponent("directives",t);else if(a(n.pipes)&&a(i))this._throwMixingViewAndComponent("pipes",t);else if(a(n.encapsulation)&&a(i))this._throwMixingViewAndComponent("encapsulation",t);else if(a(n.styles)&&a(i))this._throwMixingViewAndComponent("styles",t);else{if(!a(n.styleUrls)||!a(i))return a(i)?i:new e.ViewMetadata({templateUrl:n.templateUrl,template:n.template,directives:n.directives,pipes:n.pipes,encapsulation:n.encapsulation,styles:n.styles,styleUrls:n.styleUrls});this._throwMixingViewAndComponent("styleUrls",t)}return null},t.prototype._throwMixingViewAndComponent=function(t,e){throw new or("Component '"+m(e)+"' cannot have both '"+t+"' and '@View' set at the same time\"")},t}());Sl.decorators=[{type:e.Injectable}],Sl.ctorParameters=[{type:wi}];var bl=function(){function t(t,n,i,r,s,o){this._directiveResolver=t,this._pipeResolver=n,this._viewResolver=i,this._platformDirectives=r,this._platformPipes=s,this._directiveCache=new Map,this._pipeCache=new Map,this._anonymousTypes=new Map,this._anonymousTypeIndex=0,this._reflector=a(o)?o:e.reflector}return t.prototype.sanitizeTokenName=function(t){var e=m(t);if(e.indexOf("(")>=0){var n=this._anonymousTypes.get(t);u(n)&&(this._anonymousTypes.set(t,this._anonymousTypeIndex++),n=this._anonymousTypes.get(t)),e="anonymous_token_"+n+"_"}return mt(e)},t.prototype.getDirectiveMetadata=function(t){var n=this._directiveCache.get(t);if(u(n)){var i=this._directiveResolver.resolve(t),r=null,s=null,o=[],p=bn(t);if(i instanceof e.ComponentMetadata){_n("styles",i.styles);var c=i,l=this._viewResolver.resolve(t);_n("styles",l.styles),r=new La({encapsulation:l.encapsulation,template:l.template,templateUrl:l.templateUrl,styles:l.styles,styleUrls:l.styleUrls}),s=c.changeDetection,a(i.viewProviders)&&(o=this.getProvidersMetadata(i.viewProviders)),p=An(this._reflector,t,c)}var h=[];a(i.providers)&&(h=this.getProvidersMetadata(i.providers));var f=[],d=[];a(i.queries)&&(f=this.getQueriesMetadata(i.queries,!1),d=this.getQueriesMetadata(i.queries,!0)),n=Ua.create({selector:i.selector,exportAs:i.exportAs,isComponent:a(r),type:this.getTypeMetadata(t,p),template:r,changeDetection:s,inputs:i.inputs,outputs:i.outputs,host:i.host,lifecycleHooks:_i.filter(function(e){return gn(e,t)}),providers:h,viewProviders:o,queries:f,viewQueries:d}),this._directiveCache.set(t,n)}return n},t.prototype.maybeGetDirectiveMetadata=function(t){try{return this.getDirectiveMetadata(t)}catch(e){if(-1!==e.message.indexOf("No Directive annotation"))return null;throw e}},t.prototype.getTypeMetadata=function(t,e){return new Da({name:this.sanitizeTokenName(t),moduleUrl:e,runtime:t,diDeps:this.getDependenciesMetadata(t,null)})},t.prototype.getFactoryMetadata=function(t,e){return new Na({name:this.sanitizeTokenName(t),moduleUrl:e,runtime:t,diDeps:this.getDependenciesMetadata(t,null)})},t.prototype.getPipeMetadata=function(t){var e=this._pipeCache.get(t);if(u(e)){var n=this._pipeResolver.resolve(t);e=new Fa({type:this.getTypeMetadata(t,bn(t)),name:n.name,pure:n.pure,lifecycleHooks:_i.filter(function(e){return gn(e,t)})}),this._pipeCache.set(t,e)}return e},t.prototype.getViewDirectivesMetadata=function(t){for(var e=this,n=this._viewResolver.resolve(t),i=wn(n,this._platformDirectives),r=0;r<i.length;r++)if(!Sn(i[r]))throw new or("Unexpected directive value '"+m(i[r])+"' on the View of component '"+m(t)+"'");return i.map(function(t){return e.getDirectiveMetadata(t)})},t.prototype.getViewPipesMetadata=function(t){for(var e=this,n=this._viewResolver.resolve(t),i=xn(n,this._platformPipes),r=0;r<i.length;r++)if(!Sn(i[r]))throw new or("Unexpected piped value '"+m(i[r])+"' on the View of component '"+m(t)+"'");return i.map(function(t){return e.getPipeMetadata(t)})},t.prototype.getDependenciesMetadata=function(t,n){var i=this,r=a(n)?n:this._reflector.parameters(t);return u(r)&&(r=[]),r.map(function(t){if(u(t))return null;var n=!1,r=!1,s=!1,o=!1,p=!1,c=null,l=null,h=null;return d(t)?t.forEach(function(t){t instanceof e.HostMetadata?r=!0:t instanceof e.SelfMetadata?s=!0:t instanceof e.SkipSelfMetadata?o=!0:t instanceof e.OptionalMetadata?p=!0:t instanceof e.AttributeMetadata?(n=!0,h=t.attributeName):t instanceof e.QueryMetadata?t.isViewQuery?l=t:c=t:t instanceof e.InjectMetadata?h=t.token:Sn(t)&&u(h)&&(h=t)}):h=t,u(h)?null:new Ia({isAttribute:n,isHost:r,isSelf:s,isSkipSelf:o,isOptional:p,query:a(c)?i.getQueryMetadata(c,null):null,viewQuery:a(l)?i.getQueryMetadata(l,null):null,token:i.getTokenMetadata(h)})})},t.prototype.getTokenMetadata=function(t){t=e.resolveForwardRef(t);var n;return n=new Oa(l(t)?{value:t}:{identifier:new ka({runtime:t,name:this.sanitizeTokenName(t),moduleUrl:bn(t)})})},t.prototype.getProvidersMetadata=function(t){var n=this;return t.map(function(t){return t=e.resolveForwardRef(t),d(t)?n.getProvidersMetadata(t):t instanceof e.Provider?n.getProviderMetadata(t):Fi(t)?n.getProviderMetadata(Ui(t)):n.getTypeMetadata(t,bn(t))})},t.prototype.getProviderMetadata=function(t){var e;return a(t.useClass)?e=this.getDependenciesMetadata(t.useClass,t.dependencies):a(t.useFactory)&&(e=this.getDependenciesMetadata(t.useFactory,t.dependencies)),new Ma({token:this.getTokenMetadata(t.token),useClass:a(t.useClass)?this.getTypeMetadata(t.useClass,bn(t.useClass)):null,useValue:Tn(t.useValue),useFactory:a(t.useFactory)?this.getFactoryMetadata(t.useFactory,bn(t.useFactory)):null,useExisting:a(t.useExisting)?this.getTokenMetadata(t.useExisting):null,deps:e,multi:t.multi})},t.prototype.getQueriesMetadata=function(t,e){var n=this,i=[];return nr.forEach(t,function(t,r){t.isViewQuery===e&&i.push(n.getQueryMetadata(t,r))}),i},t.prototype.getQueryMetadata=function(t,e){var n,i=this;return n=t.isVarBindingQuery?t.varBindings.map(function(t){return i.getTokenMetadata(t)}):[this.getTokenMetadata(t.selector)],new Va({selectors:n,first:t.first,descendants:t.descendants,propertyName:e,read:a(t.read)?this.getTokenMetadata(t.read):null})},t}();bl.decorators=[{type:e.Injectable}],bl.ctorParameters=[{type:El},{type:Cl},{type:Sl},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[e.PLATFORM_DIRECTIVES]}]},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[e.PLATFORM_PIPES]}]},{type:wi}];var Al=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.visitOther=function(t,e){return new ka(Cn(t)?{name:t.name,moduleUrl:bn(t)}:{runtime:t})},e}(wa),Tl=/'|\\|\n|\r|\$/g,Pl=Kt("error"),kl=Kt("stack"),Il=function(){function t(t){this.indent=t,this.parts=[]}return t}(),Ml=function(){function t(t,e){this._exportedVars=t,this._indent=e,this._classes=[],this._lines=[new Il(e)]}return t.createRoot=function(e){return new t(e,0)},Object.defineProperty(t.prototype,"_currentLine",{get:function(){return this._lines[this._lines.length-1]},enumerable:!0,configurable:!0}),t.prototype.isExportedVar=function(t){return-1!==this._exportedVars.indexOf(t)},t.prototype.println=function(t){void 0===t&&(t=""),this.print(t,!0)},t.prototype.lineIsEmpty=function(){return 0===this._currentLine.parts.length},t.prototype.print=function(t,e){void 0===e&&(e=!1),t.length>0&&this._currentLine.parts.push(t),e&&this._lines.push(new Il(this._indent))},t.prototype.removeEmptyLastLine=function(){this.lineIsEmpty()&&this._lines.pop()},t.prototype.incIndent=function(){this._indent++,this._currentLine.indent=this._indent},t.prototype.decIndent=function(){this._indent--,this._currentLine.indent=this._indent},t.prototype.pushClass=function(t){this._classes.push(t)},t.prototype.popClass=function(){return this._classes.pop()},Object.defineProperty(t.prototype,"currentClass",{get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null},enumerable:!0,configurable:!0}),t.prototype.toSource=function(){var t=this._lines;return 0===t[t.length-1].parts.length&&(t=t.slice(0,t.length-1)),t.map(function(t){return t.parts.length>0?kn(t.indent)+t.parts.join(""):""}).join("\n")},t}(),Nl=function(){function t(t){this._escapeDollarInStrings=t}return t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e),e.println(";"),null},t.prototype.visitReturnStmt=function(t,e){return e.print("return "),t.value.visitExpression(this,e),e.println(";"),null},t.prototype.visitIfStmt=function(t,e){e.print("if ("),t.condition.visitExpression(this,e),e.print(") {");var n=a(t.falseCase)&&t.falseCase.length>0;return t.trueCase.length<=1&&!n?(e.print(" "),this.visitAllStatements(t.trueCase,e),e.removeEmptyLastLine(),e.print(" ")):(e.println(),e.incIndent(),this.visitAllStatements(t.trueCase,e),e.decIndent(),n&&(e.println("} else {"),e.incIndent(),this.visitAllStatements(t.falseCase,e),e.decIndent())),e.println("}"),null},t.prototype.visitThrowStmt=function(t,e){return e.print("throw "),t.error.visitExpression(this,e),e.println(";"),null},t.prototype.visitCommentStmt=function(t,e){var n=t.comment.split("\n");return n.forEach(function(t){e.println("// "+t)}),null},t.prototype.visitWriteVarExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),e.print(t.name+" = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitWriteKeyExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),t.receiver.visitExpression(this,e),e.print("["),t.index.visitExpression(this,e),e.print("] = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitWritePropExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),t.receiver.visitExpression(this,e),e.print("."+t.name+" = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitInvokeMethodExpr=function(t,e){t.receiver.visitExpression(this,e);var n=t.name;return a(t.builtin)&&(n=this.getBuiltinMethodName(t.builtin),u(n))?null:(e.print("."+n+"("),this.visitAllExpressions(t.args,e,","),e.print(")"),null)},t.prototype.visitInvokeFunctionExpr=function(t,e){return t.fn.visitExpression(this,e),e.print("("),this.visitAllExpressions(t.args,e,","),e.print(")"),null},t.prototype.visitReadVarExpr=function(t,e){var n=t.name;if(a(t.builtin))switch(t.builtin){case ap.Super:n="super";break;case ap.This:n="this";break;case ap.CatchError:n=Pl.name;break;case ap.CatchStack:n=kl.name;break;default:throw new or("Unknown builtin variable "+t.builtin)}return e.print(n),null},t.prototype.visitInstantiateExpr=function(t,e){return e.print("new "),t.classExpr.visitExpression(this,e),e.print("("),this.visitAllExpressions(t.args,e,","),e.print(")"),null},t.prototype.visitLiteralExpr=function(t,e){var n=t.value;return e.print(l(n)?Pn(n,this._escapeDollarInStrings):u(n)?"null":""+n),null},t.prototype.visitConditionalExpr=function(t,e){return e.print("("),t.condition.visitExpression(this,e),e.print("? "),t.trueCase.visitExpression(this,e),e.print(": "),t.falseCase.visitExpression(this,e),e.print(")"),null},t.prototype.visitNotExpr=function(t,e){return e.print("!"),t.condition.visitExpression(this,e),null},t.prototype.visitBinaryOperatorExpr=function(t,e){var n;switch(t.operator){case Yu.Equals:n="==";break;case Yu.Identical:n="===";break;case Yu.NotEquals:n="!=";break;case Yu.NotIdentical:n="!==";break;case Yu.And:n="&&";break;case Yu.Or:n="||";break;case Yu.Plus:n="+";break;case Yu.Minus:n="-";break;case Yu.Divide:n="/";break;case Yu.Multiply:n="*";break;case Yu.Modulo:n="%";break;case Yu.Lower:n="<";break;case Yu.LowerEquals:n="<=";break;case Yu.Bigger:n=">";break;case Yu.BiggerEquals:n=">=";break;default:throw new or("Unknown operator "+t.operator)}return e.print("("),t.lhs.visitExpression(this,e),e.print(" "+n+" "),t.rhs.visitExpression(this,e),e.print(")"),null},t.prototype.visitReadPropExpr=function(t,e){return t.receiver.visitExpression(this,e),e.print("."),e.print(t.name),null},t.prototype.visitReadKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),e.print("["),t.index.visitExpression(this,e),e.print("]"),null},t.prototype.visitLiteralArrayExpr=function(t,e){var n=t.entries.length>1;return e.print("[",n),e.incIndent(),this.visitAllExpressions(t.entries,e,",",n),e.decIndent(),e.print("]",n),null},t.prototype.visitLiteralMapExpr=function(t,e){var n=this,i=t.entries.length>1;return e.print("{",i),e.incIndent(),this.visitAllObjects(function(t){e.print(Pn(t[0],n._escapeDollarInStrings)+": "),t[1].visitExpression(n,e)},t.entries,e,",",i),e.decIndent(),e.print("}",i),null},t.prototype.visitAllExpressions=function(t,e,n,i){var r=this;void 0===i&&(i=!1),this.visitAllObjects(function(t){return t.visitExpression(r,e)},t,e,n,i)},t.prototype.visitAllObjects=function(t,e,n,i,r){void 0===r&&(r=!1);for(var s=0;s<e.length;s++)s>0&&n.print(i,r),t(e[s]);r&&n.println()},t.prototype.visitAllStatements=function(t,e){var n=this;t.forEach(function(t){return t.visitStatement(n,e)})},t}(),Ol=function(t){function e(){t.call(this,!1)}return __extends(e,t),e.prototype.visitDeclareClassStmt=function(t,e){var n=this;return e.pushClass(t),this._visitClassConstructor(t,e),a(t.parent)&&(e.print(t.name+".prototype = Object.create("),t.parent.visitExpression(this,e),e.println(".prototype);")),t.getters.forEach(function(i){return n._visitClassGetter(t,i,e)}),t.methods.forEach(function(i){return n._visitClassMethod(t,i,e)}),e.popClass(),null},e.prototype._visitClassConstructor=function(t,e){e.print("function "+t.name+"("),a(t.constructorMethod)&&this._visitParams(t.constructorMethod.params,e),e.println(") {"),e.incIndent(),a(t.constructorMethod)&&t.constructorMethod.body.length>0&&(e.println("var self = this;"),this.visitAllStatements(t.constructorMethod.body,e)),e.decIndent(),e.println("}")},e.prototype._visitClassGetter=function(t,e,n){n.println("Object.defineProperty("+t.name+".prototype, '"+e.name+"', { get: function() {"),n.incIndent(),e.body.length>0&&(n.println("var self = this;"),this.visitAllStatements(e.body,n)),n.decIndent(),n.println("}});")},e.prototype._visitClassMethod=function(t,e,n){n.print(t.name+".prototype."+e.name+" = function("),this._visitParams(e.params,n),n.println(") {"),n.incIndent(),e.body.length>0&&(n.println("var self = this;"),this.visitAllStatements(e.body,n)),n.decIndent(),n.println("};")},e.prototype.visitReadVarExpr=function(e,n){if(e.builtin===ap.This)n.print("self");else{if(e.builtin===ap.Super)throw new or("'super' needs to be handled at a parent ast node, not at the variable level!");t.prototype.visitReadVarExpr.call(this,e,n)}return null},e.prototype.visitDeclareVarStmt=function(t,e){return e.print("var "+t.name+" = "),t.value.visitExpression(this,e),e.println(";"),null},e.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e),null},e.prototype.visitInvokeFunctionExpr=function(e,n){var i=e.fn;return i instanceof cp&&i.builtin===ap.Super?(n.currentClass.parent.visitExpression(this,n),n.print(".call(this"),e.args.length>0&&(n.print(", "),this.visitAllExpressions(e.args,n,",")),n.print(")")):t.prototype.visitInvokeFunctionExpr.call(this,e,n),null},e.prototype.visitFunctionExpr=function(t,e){return e.print("function("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.print("}"),null},e.prototype.visitDeclareFunctionStmt=function(t,e){return e.print("function "+t.name+"("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.println("}"),null},e.prototype.visitTryCatchStmt=function(t,e){e.println("try {"),e.incIndent(),this.visitAllStatements(t.bodyStmts,e),e.decIndent(),e.println("} catch ("+Pl.name+") {"),e.incIndent();var n=[kl.set(Pl.prop("stack")).toDeclStmt(null,[dp.Final])].concat(t.catchStmts);return this.visitAllStatements(n,e),e.decIndent(),e.println("}"),null},e.prototype._visitParams=function(t,e){this.visitAllObjects(function(t){return e.print(t.name)},t,e,",")},e.prototype.getBuiltinMethodName=function(t){var e;switch(t){case pp.ConcatArray:e="concat";break;case pp.SubscribeObservable:e="subscribe";break;case pp.bind:e="bind";break;default:throw new or("Unknown builtin method: "+t)}return e},e}(Nl),Rl=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];t.apply(this,e),this._evalArgNames=[],this._evalArgValues=[]}return __extends(e,t),e.prototype.getArgs=function(){for(var t={},e=0;e<this._evalArgNames.length;e++)t[this._evalArgNames[e]]=this._evalArgValues[e];return t},e.prototype.visitExternalExpr=function(t,e){var n=t.value.runtime,i=this._evalArgValues.indexOf(n);if(-1===i){i=this._evalArgValues.length,this._evalArgValues.push(n);var r=a(t.value.name)?mt(t.value.name):"val";this._evalArgNames.push(mt("jit_"+r+i))}return e.print(this._evalArgNames[i]),null},e}(Ol),Dl="asset://debug/lib",Vl=function(t){function e(e){t.call(this,!0),this._moduleUrl=e,this.importsWithPrefixes=new Map}return __extends(e,t),e.prototype.visitExternalExpr=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitDeclareVarStmt=function(t,e){return t.hasModifier(dp.Final)?e.print(On(t.type)?"const ":"final "):u(t.type)&&e.print("var "),a(t.type)&&(t.type.visitType(this,e),e.print(" ")),e.print(t.name+" = "),t.value.visitExpression(this,e),e.println(";"),null},e.prototype.visitCastExpr=function(t,e){return e.print("("),t.value.visitExpression(this,e),e.print(" as "),t.type.visitType(this,e),e.print(")"),null},e.prototype.visitDeclareClassStmt=function(t,e){var n=this;return e.pushClass(t),e.print("class "+t.name),a(t.parent)&&(e.print(" extends "),t.parent.visitExpression(this,e)),e.println(" {"),e.incIndent(),t.fields.forEach(function(t){return n._visitClassField(t,e)}),a(t.constructorMethod)&&this._visitClassConstructor(t,e),t.getters.forEach(function(t){return n._visitClassGetter(t,e)}),t.methods.forEach(function(t){return n._visitClassMethod(t,e)}),e.decIndent(),e.println("}"),e.popClass(),null},e.prototype._visitClassField=function(t,e){t.hasModifier(dp.Final)?e.print("final "):u(t.type)&&e.print("var "),a(t.type)&&(t.type.visitType(this,e),e.print(" ")),e.println(t.name+";")},e.prototype._visitClassGetter=function(t,e){a(t.type)&&(t.type.visitType(this,e),e.print(" ")),e.println("get "+t.name+" {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype._visitClassConstructor=function(t,e){e.print(t.name+"("),this._visitParams(t.constructorMethod.params,e),e.print(")");var n=t.constructorMethod.body,i=n.length>0?Nn(n[0]):null;a(i)&&(e.print(": "),i.visitExpression(this,e),n=n.slice(1)),e.println(" {"),e.incIndent(),this.visitAllStatements(n,e),e.decIndent(),e.println("}")},e.prototype._visitClassMethod=function(t,e){a(t.type)?t.type.visitType(this,e):e.print("void"),e.print(" "+t.name+"("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype.visitFunctionExpr=function(t,e){return e.print("("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.print("}"),null},e.prototype.visitDeclareFunctionStmt=function(t,e){return a(t.type)?t.type.visitType(this,e):e.print("void"),e.print(" "+t.name+"("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.println("}"),null},e.prototype.getBuiltinMethodName=function(t){var e;switch(t){case pp.ConcatArray:e=".addAll";break;case pp.SubscribeObservable:e="listen";break;case pp.bind:e=null;break;default:throw new or("Unknown builtin method: "+t)}return e},e.prototype.visitTryCatchStmt=function(t,e){return e.println("try {"),e.incIndent(),this.visitAllStatements(t.bodyStmts,e),e.decIndent(),e.println("} catch ("+Pl.name+", "+kl.name+") {"),e.incIndent(),this.visitAllStatements(t.catchStmts,e),e.decIndent(),e.println("}"),null},e.prototype.visitBinaryOperatorExpr=function(e,n){switch(e.operator){case Yu.Identical:n.print("identical("),e.lhs.visitExpression(this,n),n.print(", "),e.rhs.visitExpression(this,n),n.print(")");break;case Yu.NotIdentical:n.print("!identical("),e.lhs.visitExpression(this,n),n.print(", "),e.rhs.visitExpression(this,n),n.print(")");break;default:t.prototype.visitBinaryOperatorExpr.call(this,e,n)}return null},e.prototype.visitLiteralArrayExpr=function(e,n){return On(e.type)&&n.print("const "),t.prototype.visitLiteralArrayExpr.call(this,e,n)},e.prototype.visitLiteralMapExpr=function(e,n){return On(e.type)&&n.print("const "),a(e.valueType)&&(n.print("<String, "),e.valueType.visitType(this,n),n.print(">")),t.prototype.visitLiteralMapExpr.call(this,e,n)},e.prototype.visitInstantiateExpr=function(t,e){return e.print(On(t.type)?"const":"new"),e.print(" "),t.classExpr.visitExpression(this,e),e.print("("),this.visitAllExpressions(t.args,e,","),e.print(")"),null},e.prototype.visitBuiltintType=function(t,e){var n;switch(t.name){case Gu.Bool:n="bool";break;case Gu.Dynamic:n="dynamic";break;case Gu.Function:n="Function";break;case Gu.Number:n="num";break;case Gu.Int:n="int";break;case Gu.String:n="String";break;default:throw new or("Unsupported builtin type "+t.name)}return e.print(n),null},e.prototype.visitExternalType=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitArrayType=function(t,e){return e.print("List<"),a(t.of)?t.of.visitType(this,e):e.print("dynamic"),e.print(">"),null},e.prototype.visitMapType=function(t,e){return e.print("Map<String, "),a(t.valueType)?t.valueType.visitType(this,e):e.print("dynamic"),e.print(">"),null},e.prototype._visitParams=function(t,e){var n=this;this.visitAllObjects(function(t){a(t.type)&&(t.type.visitType(n,e),e.print(" ")),e.print(t.name)},t,e,",")},e.prototype._visitIdentifier=function(t,e,n){var i=this;if(u(t.name))throw new or("Internal error: unknown identifier "+t);if(a(t.moduleUrl)&&t.moduleUrl!=this._moduleUrl){var r=this.importsWithPrefixes.get(t.moduleUrl);u(r)&&(r="import"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(t.moduleUrl,r)),n.print(r+".")}n.print(t.name),a(e)&&e.length>0&&(n.print("<"),this.visitAllObjects(function(t){return t.visitType(i,n)},e,n,","),n.print(">"))},e}(Nl),Ll="asset://debug/lib",Ul=function(t){function e(e){t.call(this,!1),this._moduleUrl=e,this.importsWithPrefixes=new Map}return __extends(e,t),e.prototype.visitExternalExpr=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitDeclareVarStmt=function(t,e){return e.isExportedVar(t.name)&&e.print("export "),e.print(t.hasModifier(dp.Final)?"const":"var"),e.print(" "+t.name),a(t.type)&&(e.print(":"),t.type.visitType(this,e)),e.print(" = "),t.value.visitExpression(this,e),e.println(";"),null},e.prototype.visitCastExpr=function(t,e){return e.print("(<"),t.type.visitType(this,e),e.print(">"),t.value.visitExpression(this,e),e.print(")"),null},e.prototype.visitDeclareClassStmt=function(t,e){var n=this;return e.pushClass(t),e.isExportedVar(t.name)&&e.print("export "),e.print("class "+t.name),a(t.parent)&&(e.print(" extends "),t.parent.visitExpression(this,e)),e.println(" {"),e.incIndent(),t.fields.forEach(function(t){return n._visitClassField(t,e)}),a(t.constructorMethod)&&this._visitClassConstructor(t,e),t.getters.forEach(function(t){return n._visitClassGetter(t,e)}),t.methods.forEach(function(t){return n._visitClassMethod(t,e)}),e.decIndent(),e.println("}"),e.popClass(),null},e.prototype._visitClassField=function(t,e){t.hasModifier(dp.Private)&&e.print("private "),e.print(t.name),a(t.type)?(e.print(":"),t.type.visitType(this,e)):e.print(": any"),e.println(";")},e.prototype._visitClassGetter=function(t,e){t.hasModifier(dp.Private)&&e.print("private "),e.print("get "+t.name+"()"),a(t.type)&&(e.print(":"),t.type.visitType(this,e)),e.println(" {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype._visitClassConstructor=function(t,e){e.print("constructor("),this._visitParams(t.constructorMethod.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.constructorMethod.body,e),e.decIndent(),e.println("}")},e.prototype._visitClassMethod=function(t,e){t.hasModifier(dp.Private)&&e.print("private "),e.print(t.name+"("),this._visitParams(t.params,e),e.print("):"),a(t.type)?t.type.visitType(this,e):e.print("void"),e.println(" {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype.visitFunctionExpr=function(t,e){return e.print("("),this._visitParams(t.params,e),e.print("):"),a(t.type)?t.type.visitType(this,e):e.print("void"),e.println(" => {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.print("}"),null},e.prototype.visitDeclareFunctionStmt=function(t,e){return e.isExportedVar(t.name)&&e.print("export "),e.print("function "+t.name+"("),this._visitParams(t.params,e),e.print("):"),a(t.type)?t.type.visitType(this,e):e.print("void"),e.println(" {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.println("}"),null},e.prototype.visitTryCatchStmt=function(t,e){e.println("try {"),e.incIndent(),this.visitAllStatements(t.bodyStmts,e),e.decIndent(),e.println("} catch ("+Pl.name+") {"),e.incIndent();var n=[kl.set(Pl.prop("stack")).toDeclStmt(null,[dp.Final])].concat(t.catchStmts);return this.visitAllStatements(n,e),e.decIndent(),e.println("}"),null},e.prototype.visitBuiltintType=function(t,e){var n;switch(t.name){case Gu.Bool:n="boolean";break;case Gu.Dynamic:n="any";break;case Gu.Function:n="Function";break;case Gu.Number:n="number";break;case Gu.Int:n="number";break;case Gu.String:n="string";break;default:throw new or("Unsupported builtin type "+t.name)}return e.print(n),null},e.prototype.visitExternalType=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitArrayType=function(t,e){return a(t.of)?t.of.visitType(this,e):e.print("any"),e.print("[]"),null},e.prototype.visitMapType=function(t,e){return e.print("{[key: string]:"),a(t.valueType)?t.valueType.visitType(this,e):e.print("any"),e.print("}"),null},e.prototype.getBuiltinMethodName=function(t){var e;switch(t){case pp.ConcatArray:e="concat";break;case pp.SubscribeObservable:e="subscribe";break;case pp.bind:e="bind";break;default:throw new or("Unknown builtin method: "+t)}return e},e.prototype._visitParams=function(t,e){var n=this;this.visitAllObjects(function(t){e.print(t.name),a(t.type)&&(e.print(":"),t.type.visitType(n,e))},t,e,",")},e.prototype._visitIdentifier=function(t,e,n){var i=this;if(u(t.name))throw new or("Internal error: unknown identifier "+t);if(a(t.moduleUrl)&&t.moduleUrl!=this._moduleUrl){var r=this.importsWithPrefixes.get(t.moduleUrl);u(r)&&(r="import"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(t.moduleUrl,r)),n.print(r+".")}n.print(t.name),a(e)&&e.length>0&&(n.print("<"),this.visitAllObjects(function(t){return t.visitType(i,n)},e,n,","),n.print(">"))},e}(Nl),Fl=function(){function t(){}return Object.defineProperty(t.prototype,"props",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getters",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"methods",{get:function(){return A()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clazz",{get:function(){return A()},enumerable:!0,configurable:!0}),t}(),Bl=function(){function t(t,e,n,i,r,s,o,a,u){this.parent=t,this.superClass=e,this.superInstance=n,this.className=i,this.vars=r,this.props=s,this.getters=o,this.methods=a,this.instanceFactory=u}return t.prototype.createChildWihtLocalVars=function(){return new t(this,this.superClass,this.superInstance,this.className,new Map,this.props,this.getters,this.methods,this.instanceFactory)},t}(),jl=function(){function t(t){this.value=t}return t}(),ql=function(){function t(t,e,n){this._classStmt=t,this._ctx=e,this._visitor=n}return t.prototype.instantiate=function(t){var e=this,n=new Map,i=new Map,r=new Map,s=this._classStmt.parent.visitExpression(this._visitor,this._ctx),o=new Bl(this._ctx,s,null,this._classStmt.name,this._ctx.vars,n,i,r,this._ctx.instanceFactory);this._classStmt.fields.forEach(function(t){n.set(t.name,null)}),this._classStmt.getters.forEach(function(t){i.set(t.name,function(){return Ln([],[],t.body,o,e._visitor)})}),this._classStmt.methods.forEach(function(t){var n=t.params.map(function(t){return t.name});r.set(t.name,Un(n,t.body,o,e._visitor))});var a=this._classStmt.constructorMethod.params.map(function(t){return t.name});return Ln(a,t,this._classStmt.constructorMethod.body,o,this._visitor),o.superInstance},t.prototype.debugAst=function(){return this._visitor.debugAst(this._classStmt)},t}(),Hl=function(){function t(){}return t.prototype.debugAst=function(t){return Hn?Mn(t):Rn(t)},t.prototype.visitDeclareVarStmt=function(t,e){return e.vars.set(t.name,t.value.visitExpression(this,e)),null},t.prototype.visitWriteVarExpr=function(t,e){for(var n=t.value.visitExpression(this,e),i=e;null!=i;){if(i.vars.has(t.name))return i.vars.set(t.name,n),n;i=i.parent}throw new or("Not declared variable "+t.name)},t.prototype.visitReadVarExpr=function(t,e){var n=t.name;if(a(t.builtin))switch(t.builtin){case ap.Super:case ap.This:return e.superInstance;case ap.CatchError:n=Ql;break;case ap.CatchStack:n=Wl;break;default:throw new or("Unknown builtin variable "+t.builtin)}for(var i=e;null!=i;){if(i.vars.has(n))return i.vars.get(n);i=i.parent}throw new or("Not declared variable "+n)},t.prototype.visitWriteKeyExpr=function(t,e){var n=t.receiver.visitExpression(this,e),i=t.index.visitExpression(this,e),r=t.value.visitExpression(this,e);return n[i]=r,r},t.prototype.visitWritePropExpr=function(t,n){var i=t.receiver.visitExpression(this,n),r=t.value.visitExpression(this,n);if(Vn(i)){var s=i;s.props.has(t.name)?s.props.set(t.name,r):e.reflector.setter(t.name)(i,r)}else e.reflector.setter(t.name)(i,r);return r},t.prototype.visitInvokeMethodExpr=function(t,n){var i,r=t.receiver.visitExpression(this,n),s=this.visitAllExpressions(t.args,n);if(a(t.builtin))switch(t.builtin){case pp.ConcatArray:i=ir.concat(r,s[0]);break;case pp.SubscribeObservable:i=ic.subscribe(r,s[0]);break;case pp.bind:i=Hn?r:r.bind(s[0]);break;default:throw new or("Unknown builtin method "+t.builtin)}else if(Vn(r)){var o=r;i=o.methods.has(t.name)?ti.apply(o.methods.get(t.name),s):e.reflector.method(t.name)(r,s);

}else i=e.reflector.method(t.name)(r,s);return i},t.prototype.visitInvokeFunctionExpr=function(t,e){var n=this.visitAllExpressions(t.args,e),i=t.fn;if(i instanceof cp&&i.builtin===ap.Super)return e.superInstance=e.instanceFactory.createInstance(e.superClass,e.className,n,e.props,e.getters,e.methods),e.parent.superInstance=e.superInstance,null;var r=t.fn.visitExpression(this,e);return ti.apply(r,n)},t.prototype.visitReturnStmt=function(t,e){return new jl(t.value.visitExpression(this,e))},t.prototype.visitDeclareClassStmt=function(t,e){var n=new ql(t,e,this);return e.vars.set(t.name,n),null},t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e)},t.prototype.visitIfStmt=function(t,e){var n=t.condition.visitExpression(this,e);return n?this.visitAllStatements(t.trueCase,e):a(t.falseCase)?this.visitAllStatements(t.falseCase,e):null},t.prototype.visitTryCatchStmt=function(t,e){try{return this.visitAllStatements(t.bodyStmts,e)}catch(n){var i=e.createChildWihtLocalVars();return i.vars.set(Ql,n),i.vars.set(Wl,n.stack),this.visitAllStatements(t.catchStmts,i)}},t.prototype.visitThrowStmt=function(t,e){throw t.error.visitExpression(this,e)},t.prototype.visitCommentStmt=function(t,e){return null},t.prototype.visitInstantiateExpr=function(t,n){var i=this.visitAllExpressions(t.args,n),r=t.classExpr.visitExpression(this,n);return r instanceof ql?r.instantiate(i):ti.apply(e.reflector.factory(r),i)},t.prototype.visitLiteralExpr=function(t,e){return t.value},t.prototype.visitExternalExpr=function(t,e){return t.value.runtime},t.prototype.visitConditionalExpr=function(t,e){return t.condition.visitExpression(this,e)?t.trueCase.visitExpression(this,e):a(t.falseCase)?t.falseCase.visitExpression(this,e):null},t.prototype.visitNotExpr=function(t,e){return!t.condition.visitExpression(this,e)},t.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e)},t.prototype.visitFunctionExpr=function(t,e){var n=t.params.map(function(t){return t.name});return Un(n,t.statements,e,this)},t.prototype.visitDeclareFunctionStmt=function(t,e){var n=t.params.map(function(t){return t.name});return e.vars.set(t.name,Un(n,t.statements,e,this)),null},t.prototype.visitBinaryOperatorExpr=function(t,e){var n=this,i=function(){return t.lhs.visitExpression(n,e)},r=function(){return t.rhs.visitExpression(n,e)};switch(t.operator){case Yu.Equals:return i()==r();case Yu.Identical:return i()===r();case Yu.NotEquals:return i()!=r();case Yu.NotIdentical:return i()!==r();case Yu.And:return i()&&r();case Yu.Or:return i()||r();case Yu.Plus:return i()+r();case Yu.Minus:return i()-r();case Yu.Divide:return i()/r();case Yu.Multiply:return i()*r();case Yu.Modulo:return i()%r();case Yu.Lower:return i()<r();case Yu.LowerEquals:return i()<=r();case Yu.Bigger:return i()>r();case Yu.BiggerEquals:return i()>=r();default:throw new or("Unknown operator "+t.operator)}},t.prototype.visitReadPropExpr=function(t,n){var i,r=t.receiver.visitExpression(this,n);if(Vn(r)){var s=r;i=s.props.has(t.name)?s.props.get(t.name):s.getters.has(t.name)?s.getters.get(t.name)():s.methods.has(t.name)?s.methods.get(t.name):e.reflector.getter(t.name)(r)}else i=e.reflector.getter(t.name)(r);return i},t.prototype.visitReadKeyExpr=function(t,e){var n=t.receiver.visitExpression(this,e),i=t.index.visitExpression(this,e);return n[i]},t.prototype.visitLiteralArrayExpr=function(t,e){return this.visitAllExpressions(t.entries,e)},t.prototype.visitLiteralMapExpr=function(t,e){var n=this,i={};return t.entries.forEach(function(t){return i[t[0]]=t[1].visitExpression(n,e)}),i},t.prototype.visitAllExpressions=function(t,e){var n=this;return t.map(function(t){return t.visitExpression(n,e)})},t.prototype.visitAllStatements=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.visitStatement(this,e);if(r instanceof jl)return r}return null},t}(),Ql="error",Wl="stack",zl=function(){function t(){}return t.prototype.createInstance=function(t,e,n,i,r,s){if(t===Ei)return n=n.concat([null]),new Kl(n,i,r,s);if(t===Ci)return new Kl(n,i,r,s);throw new or("Can't instantiate class "+t+" in interpretative mode")},t}(),Kl=function(t){function e(e,n,i,r){t.call(this,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),this.props=n,this.getters=i,this.methods=r}return __extends(e,t),e.prototype.createInternal=function(e){var n=this.methods.get("createInternal");return a(n)?n(e):t.prototype.createInternal.call(this,e)},e.prototype.injectorGetInternal=function(e,n,i){var r=this.methods.get("injectorGetInternal");return a(r)?r(e,n,i):t.prototype.injectorGet.call(this,e,n,i)},e.prototype.destroyInternal=function(){var e=this.methods.get("destroyInternal");return a(e)?e():t.prototype.destroyInternal.call(this)},e.prototype.dirtyParentQueriesInternal=function(){var e=this.methods.get("dirtyParentQueriesInternal");return a(e)?e():t.prototype.dirtyParentQueriesInternal.call(this)},e.prototype.detectChangesInternal=function(e){var n=this.methods.get("detectChangesInternal");return a(n)?n(e):t.prototype.detectChangesInternal.call(this,e)},e}(Ci),Xl=function(){function t(t,e,n,i,r,s,o){this._metadataResolver=t,this._templateNormalizer=e,this._templateParser=n,this._styleCompiler=i,this._viewCompiler=r,this._xhr=s,this._genConfig=o,this._styleCache=new Map,this._hostCacheKeys=new Map,this._compiledTemplateCache=new Map,this._compiledTemplateDone=new Map}return t.prototype.resolveComponent=function(t){var n=this._metadataResolver.getDirectiveMetadata(t),i=this._hostCacheKeys.get(t);if(u(i)){i=new Object,this._hostCacheKeys.set(t,i),Fn(n);var r=Tt(n.type,n.selector);this._loadAndCompileComponent(i,r,[n],[],[])}return this._compiledTemplateDone.get(i).then(function(i){return new e.ComponentFactory(n.selector,i.viewFactory,t)})},t.prototype.clearCache=function(){this._styleCache.clear(),this._compiledTemplateCache.clear(),this._compiledTemplateDone.clear(),this._hostCacheKeys.clear()},t.prototype._loadAndCompileComponent=function(t,e,n,i,r){var s=this,o=this._compiledTemplateCache.get(t),a=this._compiledTemplateDone.get(t);return u(o)&&(o=new Gl,this._compiledTemplateCache.set(t,o),a=nc.all([this._compileComponentStyles(e)].concat(n.map(function(t){return s._templateNormalizer.normalizeDirective(t)}))).then(function(t){var n=t.slice(1),a=t[0],u=s._templateParser.parse(e,e.template.template,n,i,e.type.name),p=[];return o.init(s._compileComponent(e,u,a,i,r,p)),nc.all(p).then(function(t){return o})}),this._compiledTemplateDone.set(t,a)),o},t.prototype._compileComponent=function(t,e,n,i,r,s){var o=this,a=this._viewCompiler.compileComponent(t,e,new _p(new ka({runtime:n})),i);a.dependencies.forEach(function(t){var e=ir.clone(r),n=t.comp.type.runtime,i=o._metadataResolver.getViewDirectivesMetadata(t.comp.type.runtime),a=o._metadataResolver.getViewPipesMetadata(t.comp.type.runtime),u=ir.contains(e,n);e.push(n);var p=o._loadAndCompileComponent(t.comp.type.runtime,t.comp,i,a,e);t.factoryPlaceholder.runtime=p.proxyViewFactory,t.factoryPlaceholder.name="viewFactory_"+t.comp.type.name,u||s.push(o._compiledTemplateDone.get(n))});var u;return u=Hn||!this._genConfig.useJit?Dn(a.statements,a.viewFactoryVar,new zl):In(t.type.name+".template.js",a.statements,a.viewFactoryVar)},t.prototype._compileComponentStyles=function(t){var e=this._styleCompiler.compileComponent(t);return this._resolveStylesCompileResult(t.type.name,e)},t.prototype._resolveStylesCompileResult=function(t,e){var n=this,i=e.dependencies.map(function(t){return n._loadStylesheetDep(t)});return nc.all(i).then(function(t){for(var i=[],r=0;r<e.dependencies.length;r++){var s=e.dependencies[r],o=t[r],a=n._styleCompiler.compileStylesheet(s.moduleUrl,o,s.isShimmed);i.push(n._resolveStylesCompileResult(s.moduleUrl,a))}return nc.all(i)}).then(function(i){for(var r=0;r<e.dependencies.length;r++){var s=e.dependencies[r];s.valuePlaceholder.runtime=i[r],s.valuePlaceholder.name="importedStyles"+r}return Hn||!n._genConfig.useJit?Dn(e.statements,e.stylesVar,new zl):In(t+".css.js",e.statements,e.stylesVar)})},t.prototype._loadStylesheetDep=function(t){var e=""+t.moduleUrl+(t.isShimmed?".shim":""),n=this._styleCache.get(e);return u(n)&&(n=this._xhr.get(t.moduleUrl),this._styleCache.set(e,n)),n},t}();Xl.decorators=[{type:e.Injectable}],Xl.ctorParameters=[{type:bl},{type:wl},{type:Vu},{type:Oc},{type:gl},{type:_l},{type:zu}];var Gl=function(){function t(){var t=this;this.viewFactory=null,this.proxyViewFactory=function(e,n,i){return t.viewFactory(e,n,i)}}return t.prototype.init=function(t){this.viewFactory=t},t}(),Jl="boolean",Yl="number",$l="string",Zl="object",th=["*|%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop","^*|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*autocomplete,*autocompleteerror,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","media|!autoplay,!controls,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,#playbackRate,preload,src,#volume","@svg:^*|*abort,*autocomplete,*autocompleteerror,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex","@svg:graphics^@svg:|","@svg:animation^@svg:|*begin,*end,*repeat","@svg:geometry^@svg:|","@svg:componentTransferFunction^@svg:|","@svg:gradient^@svg:|","@svg:textContent^@svg:graphics|","@svg:textPositioning^@svg:textContent|","a|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,rel,rev,search,shape,target,text,type,username","area|alt,coords,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,search,shape,target,username","audio^media|","br|clear","base|href,target","body|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas|#height,#width","content|select","dl|!compact","datalist|","details|!open","dialog|!open,returnValue","dir|!compact","div|align","embed|align,height,name,src,type,width","fieldset|!disabled,name","font|color,face,size","form|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr|align,color,!noShade,size,width","head|","h1,h2,h3,h4,h5,h6|align","html|version","iframe|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,%sandbox,scrolling,src,srcdoc,width","img|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,sizes,src,srcset,useMap,#vspace,#width","input|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","keygen|!autofocus,challenge,!disabled,keytype,name","li|type,#value","label|htmlFor","legend|align","link|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,rel,%relList,rev,%sizes,target,type","map|name","marquee|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu|!compact","meta|content,httpEquiv,name,scheme","meter|#high,#low,#max,#min,#optimum,#value","ins,del|cite,dateTime","ol|!compact,!reversed,#start,type","object|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup|!disabled,label","option|!defaultSelected,!disabled,label,!selected,text,value","output|defaultValue,%htmlFor,name,value","p|align","param|name,type,value,valueType","picture|","pre|#width","progress|#max,#value","q,blockquote,cite|","script|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow|","source|media,sizes,src,srcset,type","span|","style|!disabled,media,type","caption|align","th,td|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup|align,ch,chOff,#span,vAlign,width","table|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody|align,ch,chOff,vAlign","template|","textarea|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title|text","track|!default,kind,label,src,srclang","ul|!compact,type","unknown|","video^media|#height,poster,#width","@svg:a^@svg:graphics|","@svg:animate^@svg:animation|","@svg:animateMotion^@svg:animation|","@svg:animateTransform^@svg:animation|","@svg:circle^@svg:geometry|","@svg:clipPath^@svg:graphics|","@svg:cursor^@svg:|","@svg:defs^@svg:graphics|","@svg:desc^@svg:|","@svg:discard^@svg:|","@svg:ellipse^@svg:geometry|","@svg:feBlend^@svg:|","@svg:feColorMatrix^@svg:|","@svg:feComponentTransfer^@svg:|","@svg:feComposite^@svg:|","@svg:feConvolveMatrix^@svg:|","@svg:feDiffuseLighting^@svg:|","@svg:feDisplacementMap^@svg:|","@svg:feDistantLight^@svg:|","@svg:feDropShadow^@svg:|","@svg:feFlood^@svg:|","@svg:feFuncA^@svg:componentTransferFunction|","@svg:feFuncB^@svg:componentTransferFunction|","@svg:feFuncG^@svg:componentTransferFunction|","@svg:feFuncR^@svg:componentTransferFunction|","@svg:feGaussianBlur^@svg:|","@svg:feImage^@svg:|","@svg:feMerge^@svg:|","@svg:feMergeNode^@svg:|","@svg:feMorphology^@svg:|","@svg:feOffset^@svg:|","@svg:fePointLight^@svg:|","@svg:feSpecularLighting^@svg:|","@svg:feSpotLight^@svg:|","@svg:feTile^@svg:|","@svg:feTurbulence^@svg:|","@svg:filter^@svg:|","@svg:foreignObject^@svg:graphics|","@svg:g^@svg:graphics|","@svg:image^@svg:graphics|","@svg:line^@svg:geometry|","@svg:linearGradient^@svg:gradient|","@svg:mpath^@svg:|","@svg:marker^@svg:|","@svg:mask^@svg:|","@svg:metadata^@svg:|","@svg:path^@svg:geometry|","@svg:pattern^@svg:|","@svg:polygon^@svg:geometry|","@svg:polyline^@svg:geometry|","@svg:radialGradient^@svg:gradient|","@svg:rect^@svg:geometry|","@svg:svg^@svg:graphics|#currentScale,#zoomAndPan","@svg:script^@svg:|type","@svg:set^@svg:animation|","@svg:stop^@svg:|","@svg:style^@svg:|!disabled,media,title,type","@svg:switch^@svg:graphics|","@svg:symbol^@svg:|","@svg:tspan^@svg:textPositioning|","@svg:text^@svg:textPositioning|","@svg:textPath^@svg:textContent|","@svg:title^@svg:|","@svg:use^@svg:graphics|","@svg:view^@svg:|#zoomAndPan"],eh={"class":"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},nh=function(t){function e(){var e=this;t.call(this),this.schema={},th.forEach(function(t){var n=t.split("|"),i=n[1].split(","),r=(n[0]+"^").split("^"),s=r[0],o={};s.split(",").forEach(function(t){return e.schema[t]=o});var u=e.schema[r[1]];a(u)&&nr.forEach(u,function(t,e){return o[e]=t}),i.forEach(function(t){""==t||t.startsWith("*")||(t.startsWith("!")?o[t.substring(1)]=Jl:t.startsWith("#")?o[t.substring(1)]=Yl:t.startsWith("%")?o[t.substring(1)]=Zl:o[t]=$l)})})}return __extends(e,t),e.prototype.hasProperty=function(t,e){if(-1!==t.indexOf("-"))return!0;var n=this.schema[t.toLowerCase()];return a(n)||(n=this.schema.unknown),a(n[e])},e.prototype.securityContext=function(t,e){return"style"===e?Li.STYLE:"a"===t&&"href"===e?Li.URL:"innerHTML"===e?Li.HTML:Li.NONE},e.prototype.getMappedPropName=function(t){var e=nr.get(eh,t);return a(e)?e:t},e}(qn);nh.decorators=[{type:e.Injectable}],nh.ctorParameters=[];var ih=[Mr,Bs,Go,Vu,wl,bl,Ea,Oc,gl,{provide:zu,useFactory:Bn,deps:[]},Xl,{provide:e.ComponentResolver,useExisting:Xl},nh,{provide:qn,useExisting:nh},Ca,Sl,El,Cl],rh=/asset:([^\/]+)\/([^\/]+)\/(.+)/g,sh=function(){function t(){}return t.parseAssetUrl=function(t){return oh.parse(t)},t}(),oh=function(){function t(t,e,n){this.packageName=t,this.firstLevelDir=e,this.modulePath=n}return t.parse=function(e,n){void 0===n&&(n=!0);var i=$n.firstMatch(rh,e);if(a(i))return new t(i[1],i[2],i[3]);if(n)return null;throw new or("Url "+e+" is not a valid asset: url")},t}();t.__compiler_private__,function(t){t.SelectorMatcher=ea,t.CssSelector=ta,t.AssetUrl=oh,t.ImportGenerator=sh}(t.__compiler_private__||(t.__compiler_private__={})),t.ElementSchemaRegistry=qn,t.COMPILER_PROVIDERS=ih,t.TEMPLATE_TRANSFORMS=Ou,t.CompilerConfig=zu,t.RenderTypes=Ku,t.UrlResolver=Ca,t.DEFAULT_PACKAGE_URL_PROVIDER=Ea,t.createOfflineCompileUrlResolver=_t,t.XHR=_l,t.ViewResolver=Sl,t.DirectiveResolver=El,t.PipeResolver=Cl,t.SourceModule=Yp,t.NormalizedComponentWithViewDirectives=Zp,t.OfflineCompiler=tc,t.CompileMetadataWithIdentifier=Ta,t.CompileMetadataWithType=Pa,t.CompileIdentifierMetadata=ka,t.CompileDiDependencyMetadata=Ia,t.CompileProviderMetadata=Ma,t.CompileFactoryMetadata=Na,t.CompileTokenMetadata=Oa,t.CompileTypeMetadata=Da,t.CompileQueryMetadata=Va,t.CompileTemplateMetadata=La,t.CompileDirectiveMetadata=Ua,t.CompilePipeMetadata=Fa,t.TextAst=ei,t.BoundTextAst=ni,t.AttrAst=ii,t.BoundElementPropertyAst=ri,t.BoundEventAst=si,t.ReferenceAst=oi,t.VariableAst=ai,t.ElementAst=ui,t.EmbeddedTemplateAst=pi,t.BoundDirectivePropertyAst=ci,t.DirectiveAst=li,t.ProviderAst=hi,t.NgContentAst=fi,t.templateVisitAll=S});